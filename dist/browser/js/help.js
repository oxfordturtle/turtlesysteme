!function(e){var t={};function a(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=t,a.d=function(e,t,o){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)a.d(o,n,function(t){return e[t]}.bind(null,n));return o},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=9)}([function(e,t,a){"use strict";a.d(t,"b",function(){return n}),a.d(t,"a",function(){return r});const o=(e,t,a)=>({code:e,args:t,str:a}),n=[o(0,0,"NULL"),o(1,0,"DUPL"),o(2,0,"SWAP"),o(3,0,"ROTA"),o(4,0,"INCR"),o(5,0,"DECR"),void 0,void 0,o(8,0,"NOT"),o(9,0,"AND"),o(10,0,"OR"),o(11,0,"XOR"),void 0,void 0,void 0,void 0,o(16,0,"NEG"),o(17,0,"ABS"),o(18,0,"SIGN"),o(19,0,"RAND"),void 0,void 0,void 0,void 0,o(24,0,"PLUS"),o(25,0,"SUBT"),o(26,0,"MULT"),o(27,0,"DIVR"),o(28,0,"DIV"),o(29,0,"MOD"),void 0,void 0,o(32,0,"DIVM"),o(33,0,"SQRT"),o(34,0,"HYP"),o(35,0,"ROOT"),o(36,0,"POWR"),o(37,0,"LOG"),o(38,0,"ALOG"),o(39,0,"LN"),o(40,0,"EXP"),o(41,0,"SIN"),o(42,0,"COS"),o(43,0,"TAN"),o(44,0,"ASIN"),o(45,0,"ACOS"),o(46,0,"ATAN"),o(47,0,"PI"),o(48,0,"CTOS"),o(49,0,"ITOS"),o(50,0,"HEXS"),o(51,0,"SVAL"),o(52,0,"QTOS"),o(53,0,"QVAL"),o(54,0,"SCAT"),o(55,0,"SLEN"),o(56,0,"CASE"),o(57,0,"COPY"),o(58,0,"DELS"),o(59,0,"INSS"),o(60,0,"POSS"),o(61,0,"REPL"),void 0,void 0,o(64,0,"EQAL"),o(65,0,"NOEQ"),o(66,0,"LESS"),o(67,0,"MORE"),o(68,0,"LSEQ"),o(69,0,"MREQ"),o(70,0,"MAXI"),o(71,0,"MINI"),o(72,0,"SEQL"),o(73,0,"SNEQ"),o(74,0,"SLES"),o(75,0,"SMOR"),o(76,0,"SLEQ"),o(77,0,"SMEQ"),o(78,0,"SMAX"),o(79,0,"SMIN"),o(80,1,"LDIN"),o(81,1,"LDVG"),o(82,2,"LDVV"),o(83,2,"LDVR"),o(84,1,"LDAG"),o(85,2,"LDAV"),void 0,o(87,-1,"LSTR"),o(88,0,"LDMT"),void 0,void 0,void 0,void 0,void 0,void 0,void 0,o(96,2,"ZERO"),o(97,1,"STVG"),o(98,2,"STVV"),o(99,2,"STVR"),void 0,void 0,void 0,void 0,o(104,0,"STMT"),void 0,void 0,void 0,void 0,void 0,void 0,void 0,o(112,0,"LPTR"),o(113,0,"SPTR"),o(114,0,"CPTR"),o(115,0,"ZPTR"),void 0,void 0,void 0,void 0,o(120,0,"TEST"),o(121,0,"CSTR"),void 0,void 0,void 0,void 0,void 0,void 0,o(128,1,"JUMP"),o(129,1,"IFNO"),o(130,0,"HALT"),void 0,void 0,void 0,void 0,void 0,o(136,1,"SUBR"),o(137,0,"RETN"),void 0,void 0,o(140,1,"PSSR"),o(141,0,"PLSR"),o(142,0,"PSRJ"),o(143,0,"PLRJ"),o(144,2,"MEMC"),o(145,1,"MEMR"),o(146,0,"HFIX"),o(147,0,"HCLR"),o(148,0,"HRST"),void 0,void 0,void 0,o(152,-2,"NEWT"),o(153,-2,"OLDT"),o(154,-2,"RNDC"),o(155,-2,"TEXL"),o(156,-2,"UPPC"),o(157,-2,"LOWC"),o(158,-2,"LEFS"),o(159,-2,"RGTS"),o(160,0,"PNUP"),o(161,0,"PNDN"),o(162,0,"UDAT"),o(163,0,"NDAT"),o(164,0,"KECH"),void 0,o(166,0,"OUTP"),o(167,0,"CONS"),o(168,0,"TRAC"),o(169,0,"MEMW"),o(170,0,"DUMP"),o(171,-2,"SVD0"),o(172,-2,"BOOL"),o(173,-2,"ILIN"),void 0,void 0,o(176,0,"TIME"),o(177,0,"TSET"),o(178,0,"WAIT"),o(179,0,"TDET"),void 0,void 0,void 0,void 0,o(184,0,"INPT"),o(185,0,"ICLR"),o(186,0,"BUFR"),o(187,0,"READ"),o(188,0,"RDLN"),o(189,0,"PRNT"),o(190,0,"TEXT"),o(191,0,"NEWL"),o(192,0,"FDIR"),o(193,0,"OPEN"),o(194,0,"CLOS"),o(195,0,"FPTR"),o(196,0,"FBEG"),o(197,0,"EOF"),o(198,0,"FRDS"),o(199,0,"FRLN"),o(200,0,"FWRS"),o(201,0,"FWNL"),void 0,void 0,void 0,void 0,void 0,void 0,o(208,0,"CANV"),o(209,0,"RESO"),o(210,0,"PIXC"),o(211,0,"PIXS"),o(212,0,"ANGL"),o(213,0,"CURS"),void 0,void 0,o(216,0,"HOME"),o(217,0,"SETX"),o(218,0,"SETY"),o(219,0,"SETD"),o(220,0,"THIK"),o(221,0,"COLR"),o(222,0,"RGB"),o(223,0,"MIXC"),o(224,0,"TOXY"),o(225,0,"MVXY"),o(226,0,"DRXY"),o(227,0,"FWRD"),o(228,0,"BACK"),o(229,0,"LEFT"),o(230,0,"RGHT"),o(231,0,"TURN"),void 0,void 0,void 0,void 0,o(236,0,"RMBR"),o(237,0,"FRGT"),void 0,void 0,o(240,0,"POLY"),o(241,0,"PFIL"),o(242,0,"CIRC"),o(243,0,"BLOT"),o(244,0,"ELPS"),o(245,0,"EBLT"),o(246,0,"BOX"),void 0,o(248,0,"BLNK"),void 0,void 0,void 0,o(252,0,"RCOL"),o(253,0,"FILL"),void 0,o(255,0,"MXIN")],r=n.filter(e=>void 0!==e).reduce((e,t)=>(e[t.str.toLowerCase()]=t.code,e),{})},function(e,t,a){"use strict";a.d(t,"a",function(){return o}),a.d(t,"c",function(){return n}),a.d(t,"d",function(){return r}),a.d(t,"f",function(){return c}),a.d(t,"e",function(){return s}),a.d(t,"b",function(){return i});const o=(e,t={})=>{const a=document.createElement(e);return Object.keys(t).forEach(e=>{switch(e){case"classes":t.classes.forEach(e=>a.classList.add(e));break;case"content":"string"==typeof t.content?a.innerHTML=t.content:t.content.forEach(e=>{"string"==typeof e?a.appendChild(document.createTextNode(e)):a.appendChild(e)});break;case"value":a.value=t.value;break;case"on":t.on.forEach(e=>{a.addEventListener(e.type,e.callback)});break;default:a.setAttribute(e,t[e])}}),a},n=e=>`#${r(e.toString(16))}`,r=e=>e.length<6?r(`0${e}`):e,c=(e,t)=>o("div",{classes:["tsx-tabs",e],content:[u(t),p(t)]}),s=e=>{l(document.querySelector(`[data-target="${e}"]`)),l(document.getElementById(e))},i=({url:e,success:t,error:a})=>{const o=new window.XMLHttpRequest;o.onreadystatechange=(()=>{4===o.readyState&&(200===o.status?t(o.responseText):a(o.status))}),o.open("GET",e),o.send()},l=e=>{if(e){Array.from(e.parentElement.children).forEach(e=>e.classList.remove("active")),e.classList.add("active")}},d=e=>o("a",{classes:e.active?["tsx-tab","active"]:["tsx-tab"],content:e.label,"data-target":e.label.replace(/ /g,""),on:[{type:"click",callback:e=>{l(e.currentTarget),l(document.getElementById(e.currentTarget.getAttribute("data-target")))}}]}),u=e=>o("nav",{classes:["tsx-tab-list"],content:e.map(d)}),h=e=>o("div",{classes:e.active?["tsx-tab-pane","active"]:["tsx-tab-pane"],content:e.content,id:e.label.replace(/ /g,"")}),p=e=>o("div",{classes:["tsx-tab-panes"],content:e.map(h)})},function(e,t,a){"use strict";var o=a(6);t.a=((e,t)=>Object(o.a)(e,t).map(n).join(""));const n=e=>`<span class="tsx-${e.type}">${e.content}</span>`},function(e,t,a){"use strict";var o=a(1),n=a(4),r=a(7),c=a(5);const s=(e,t)=>` ${t.line.toString(10)}`,i=(e,t)=>e+t.count,l=(e,t,a)=>{const o=a.expressions.filter(((e,t,a)=>{const o=a.name||a.names[e];return t.filter(e=>e.content===o).length>0}).bind(null,e,t)).map(((e,t,a)=>{const o=a.name||a.names[e],n=t.filter(e=>e.content===o);return{name:o,level:a.level+1,count:n.length,lines:n.reduce(s,"").trim()}}).bind(null,e,t));return{title:a.title,expressions:o,total:o.reduce(i,0)}};var d=(e,t)=>{const a=t?new Error(e.replace("{lex}",`"${t.content}"`)):new Error(e);return a.lexeme=t,a.type="Compiler",a},u=a(6);const h=["Unterminated comment.","Unterminated string.","Binary numbers in Turtle BASIC begin with '%'.","Binary numbers in Turtle Pascal begin with '%'.","Binary numbers in Turtle Python begin with '0b'.","Turtle BASIC does not support octal numbers.","Octal numbers in Turtle Pascal begin with '&'","Octal numbers in Turtle Python begin with '0o'","Hexadecimal numbers in Turtle BASIC begin with '&'","Hexadecimal numbers in Turtle Pascal begin with '$'","Hexadecimal numbers in Turtle Python begin with '0x'","The Turtle System does not support real numbers.","Illegal character in this context."],p=(e,t,a,o)=>({type:b(e.type,e.content),content:"Pascal"===o?e.content.toLowerCase():e.content,value:m(e.type,e.content,o),line:t,offset:a}),b=(e,t)=>{switch(e){case"binary":case"octal":case"hexadecimal":case"decimal":return"integer";case"command":case"colour":case"custom":case"variable":return"identifier";default:return e}},m=(e,t,a)=>{switch(e){case"operator":switch(t.toLowerCase()){case"+":return"plus";case"-":return"subt";case"*":return"mult";case"/":return"divr";case"div":case"//":return"div";case"mod":case"%":return"mod";case"=":case"==":return"eqal";case"<>":case"!=":return"noeq";case"<=":return"lseq";case">=":return"mreq";case"<":return"less";case">":return"more";case"not":return"not";case"and":return"and";case"or":return"or";case"xor":case"eor":return"xor";default:return null}case"string":return t.slice(1,-1).replace(/''/g,"'").replace(/\\('|")/g,"$1");case"boolean":return"true"===t.toLowerCase()?-1:0;case"binary":return"Python"===a?parseInt(t.slice(2),2):parseInt(t.slice(1),2);case"octal":return"Python"===a?parseInt(t.slice(2),8):parseInt(t.slice(1),8);case"hexadecimal":return"Python"===a?parseInt(t.slice(2),16):parseInt(t.slice(1),16);case"decimal":return parseInt(t);case"turtle":return["x","y","d","t","c"].indexOf(t[4].toLowerCase())+1;default:return null}};var g=(e,t,a)=>{if("null"!==e&&t!==e&&("string"!==e||"char"!==t)&&("boolint"!==e||"boolean"!==t&&"integer"!==t)&&("boolint"!==t||"boolean"!==e&&"integer"!==e))throw d(`Type error: '${e}' expected but '${t}' found.`,a)};const f=e=>e.parent?f(e.parent):e,y=(e,t,a)=>k(e,"constants",t,a),w=(e,t,a)=>{const o=("BASIC"===a?["TURTX%","TURTY%","TURTD%","TURTT%","TURTC%"]:["turtx","turty","turtd","turtt","turtc"]).indexOf(t)+1,n=e.index>0&&e.globals.indexOf(t)>-1;return o>0?{turtle:o,fulltype:{type:"integer"}}:k(n?f(e):e,"variables",t,a)},O=(e,t)=>n.a.find(j.bind(null,T(e),t)),x=(e,t,a)=>k(e,"subroutines",t,a),v=(e,t,a)=>x(e,t,a)||((e,t)=>c.b.find(j.bind(null,T(e),t)))(t,a),j=(e,t,a)=>(a.name||a.names[t])===e,k=(e,t,a,o)=>e.parent?e[t].find(j.bind(null,a,o))||k(e.parent,t,a,o):e[t].find(j.bind(null,a,o)),T=e=>e.replace(/gray/,"grey").replace(/GRAY/,"GREY").replace(/^COLOR$/,"COLOUR").replace(/^color$/,"colour");var P=a(0);const S=(e,t)=>e.slice(0,-1).concat([e[e.length-1].concat(t[0])]).concat(t.slice(1)),$=(e,t,a)=>{const o=S(e,t.pcode),n=S(o,[P.a[a]]);return Object.assign(t,{pcode:n})},C=(e,t)=>"string"===e?[P.a.lstr,t.length].concat(Array.from(t).map(e=>e.charCodeAt(0))):[P.a.ldin,t],I=e=>e.turtle?[P.a.ldin,0,P.a.lptr,P.a.ldin,e.turtle,P.a.plus,P.a.lptr]:0===e.routine.index?[P.a.ldvg,e.routine.turtleAddress+5+e.index]:e.byref?[P.a.ldvr,e.routine.index+9,e.index]:[P.a.ldvv,e.routine.index+9,e.index],E=(e,t)=>e.turtle?[P.a.ldin,0,P.a.lptr,P.a.ldin,e.turtle,P.a.plus,P.a.sptr]:0===e.routine.index?"string"===e.fulltype.type?[P.a.ldvg,e.routine.turtleAddress+5+e.index,P.a.cstr]:[P.a.stvg,e.routine.turtleAddress+5+e.index]:"string"===e.fulltype.type?[P.a.ldvv,e.routine.index+9,e.index,P.a.cstr,P.a.hclr]:e.byref&&!t?[P.a.stvr,e.routine.index+9,e.index]:[P.a.stvv,e.routine.index+9,e.index],A=e=>[P.a[e]],R=(e,t,a)=>{const o=f(t).turtleAddress;switch(e.code){case P.a.newt:return[P.a.ldin,0,P.a.sptr];case P.a.oldt:return[P.a.ldin,o,P.a.ldin,0,P.a.sptr];case P.a.incr:case P.a.decr:return[P.a.dupl,P.a.lptr,e.code,P.a.swap,P.a.sptr];case P.a.rndc:return[P.a.rand,P.a.incr,P.a.rgb,P.a.colr];case P.a.rand:switch(a){case"BASIC":return[P.a.rand,P.a.incr];case"Pascal":return[P.a.rand];case"Python":return[P.a.swap,P.a.dupl,P.a.rota,P.a.incr,P.a.swap,P.a.subt,P.a.rand,P.a.plus]}break;case P.a.texl:return[P.a.text,P.a.newl];case P.a.uppc:return[P.a.ldin,1,P.a.case];case P.a.lowc:return[P.a.ldin,-1,P.a.case];case P.a.lefs:return[P.a.ldin,1,P.a.swap,P.a.copy];case P.a.rgts:return[P.a.swap,P.a.dupl,P.a.slen,P.a.incr,P.a.rota,P.a.subt,P.a.mxin,P.a.copy];case P.a.inss:switch(a){case"BASIC":case"Python":return[P.a.rota,P.a.rota,P.a.inss];case"Pascal":return[P.a.inss]}break;case P.a.poss:switch(a){case"BASIC":case"Python":return[P.a.swap,P.a.poss];case"Pascal":return[P.a.poss]}break;case P.a.svd0:return[P.a.ldin,0,P.a.sval];case P.a.bool:return[P.a.abs];case P.a.ilin:return[P.a.text,P.a.newl,P.a.rdln];case P.a.bufr:return[P.a.bufr,P.a.ldin,1,P.a.sptr,P.a.hfix];case void 0:return[P.a.subr,e.startLine];default:return[e.code]}},L=(e,t,a,o=[])=>{const n=o.length>0?2:1,r=[t.concat([P.a.ifno,a.length+e+n])],c=[[P.a.jump,a.length+o.length+e+n]];return o.length>0?r.concat(a).concat(c).concat(o):r.concat(a)},B=(e,t,a,o,n,r,c)=>{const s=c.length+e+4,i=[a,E(t).concat(o),I(t).concat([P.a[n],P.a.ifno,s])],l=[I(t).concat([P.a[r],P.a.jump,e+1])];return i.concat(c).concat(l)},N=(e,t,a)=>{const o=[t.concat([P.a.ifno,e])];return a.concat(o)},q=(e,t,a)=>{const o=[t.concat([P.a.ifno,a.length+e+2])],n=[[P.a.jump,e]];return o.concat(a).concat(n)},M=(e,t)=>{const a=D(e),o=W(e);return a.concat(t).concat(o)},D=e=>{const t=[[P.a.pssr,e.index]],a=t.concat(H(e));return e.variables.length>0&&e.parameters.length>0?a.concat(z(e)):e.variables.length>0?a:t},F=e=>e.variables.filter(e=>"string"===e.fulltype.type),U=e=>{const t=e.routine.turtleAddress+5+e.index;return[P.a.ldag,t+2,P.a.stvg,t,P.a.ldin,e.length-1,P.a.stvg,t+1]},G=e=>{const t=e.routine.index+9,a=e.index;return[P.a.ldav,t,a+2,P.a.stvv,t,a,P.a.ldin,e.fulltype.length-1,P.a.stvv,t,a+1]},H=e=>{const t=[[P.a.memc,e.index+9,e.memoryNeeded],[P.a.ldav,e.index+9,1,P.a.ldin,e.memoryNeeded,P.a.zptr]];return F(e).length>0?t.concat(F(e).map(G)):t},z=e=>{const t=[];let a=e.parameters.length;for(;a>0;)a-=1,t.push(E(e.parameters[a]));return t},W=e=>{const t=e.index+9,a=f(e).resultAddress,o=[P.a.ldvg,t,P.a.stvg,a],n=[P.a.memr,t],r=[P.a.plsr,P.a.retn];return e.variables.length>0&&"function"===e.type?[o,n.concat(r)]:e.variables.length>0?[n.concat(r)]:[r]},Y=[P.a.home,P.a.ldin,2,P.a.thik,P.a.ldin,32,P.a.bufr,P.a.ldin,1,P.a.sptr,P.a.hfix,P.a.ldin,0,P.a.dupl,P.a.ldin,1e3,P.a.dupl,P.a.dupl,P.a.dupl,P.a.reso,P.a.canv],K=e=>{const t=[((e,t)=>[P.a.ldin,e,P.a.dupl,P.a.dupl,P.a.ldin,0,P.a.sptr,P.a.ldin,5,P.a.swap,P.a.sptr,P.a.incr,P.a.ldin,t+5,P.a.zptr,P.a.ldin,e+t+5,P.a.stmt])(e.turtleAddress,e.memoryNeeded),Y];return F(e).length>0?t.concat(F(e).map(U)):t},X=(e,t,a,o)=>{const r=((e,t)=>n.e.find(j.bind(null,e,t)))(e[t].content,o);if(r)return g(a,r.type,e[t]),{type:"integer",lex:t+1,pcode:[(e=>e.value<0?C("integer",e.value):C("integer",e.value).concat(P.a.inpt))(r)]}},V=(e,t,a,o,n)=>{const r=["eqal","less","lseq","more","mreq","noeq"];"boolean"===o&&(o="null");let c=J(e,t,a,o,n);for(;e.lexemes[c.lex]&&r.indexOf(e.lexemes[c.lex].value)>-1;){let t=Z(e.lexemes[c.lex].value,c.type),a=J(e,c.lex+1,c.type,o,n);c=$(c.pcode,a,t)}return c},Q=(e,t,a,o)=>{const n=w(e,t,o);if(!n)throw d(`Variable "${t}" is not defined.`,e.lexemes[a]);if(!e.lexemes[a])throw d(`Variable "${t}" must be assigned a value.`,e.lexemes[a-1]);const r=V(e,a,"null",n.fulltype.type,o);return{lex:r.lex,pcode:S(r.pcode,[E(n)])}},_=(e,t,a,o=!0)=>{const n=v(e,e.lexemes[t].content,a);if(!n)throw d("{lex} is not defined.",e.lexemes[t]);if(o&&"procedure"!==n.type)throw d("{lex} is a function, not a procedure.",e.lexemes[t]);return 0===n.parameters.length?re(e,t,n,a):ce(e,t,n,a)},Z=(e,t)=>{return"string"===t||"char"===t?["seql","sles","sleq","smor","smeq","sneq","scat"][["eqal","less","lseq","more","mreq","noeq","plus"].indexOf(e)]:e},J=(e,t,a,o,n)=>{const r=["plus","subt","or","xor"];let c=ee(e,t,a,o,n);for(;e.lexemes[c.lex]&&r.indexOf(e.lexemes[c.lex].value)>-1;){let t=Z(e.lexemes[c.lex].value,c.type),a=ee(e,c.lex+1,c.type,o,n);c=$(c.pcode,a,t)}return c},ee=(e,t,a,o,n)=>{const r=["and","div","divr","mod","mult"];let c=te(e,t,a,o,n);for(;e.lexemes[c.lex]&&r.indexOf(e.lexemes[c.lex].value)>-1;){let t=Z(e.lexemes[c.lex].value,c.type),a=te(e,c.lex+1,c.type,o,n);c=$(c.pcode,a,t)}return c},te=(e,t,a,o,n)=>{switch(e.lexemes[t].type){case"operator":return ae(e,t,o,n)||(()=>{throw d("{lex} makes no sense here.",e.lexemes[t])})();case"boolean":case"char":case"integer":case"string":return((e,t,a)=>{const{type:o,value:n}=e[t];return g(a,o,e[t]),"char"===o&&"string"===a?{type:o,lex:t+1,pcode:[C(o,n),A("ctos")]}:{type:o,lex:t+1,pcode:[C(o,n)]}})(e.lexemes,t,o);case"keycode":case"query":return X(e.lexemes,t,o,n)||(()=>{throw d("{lex} is not a valid input code.",e.lexemes[t])})();case"turtle":case"identifier":return((e,t,a,o)=>{const{lexemes:n}=e,r=y(e,n[t].content,o);if(r)return g(a,r.type,n[t]),{type:r.type,lex:t+1,pcode:[C(r.type,r.value)]}})(e,t,o,n)||((e,t,a,o)=>{const{lexemes:n}=e,r=w(e,n[t].content,o);if(r)return g(a,r.fulltype.type,n[t]),{type:r.fulltype.type,lex:t+1,pcode:[I(r)]}})(e,t,o,n)||((e,t,a,o)=>{const{lexemes:n}=e,r=O(n[t].content,o);if(r)return g(a,"integer",n[t]),{type:"integer",lex:t+1,pcode:[C("integer",r.value)]}})(e,t,o,n)||oe(e,t,o,n)||(()=>{throw d("{lex} is not defined.",e.lexemes[t])})();default:return ne(e,t,a,o,n)||(()=>{throw d("{lex} makes no sense here.",e.lexemes[t])})()}},ae=(e,t,a,o)=>{if("-"===e.lexemes[t].content||"not"===e.lexemes[t].value){const n="-"===e.lexemes[t].content?"integer":"boolint",r="-"===e.lexemes[t].content?[A("neg")]:[A("not")];g(a,"integer",e.lexemes[t]);const c=te(e,t+1,n,a,o);return Object.assign(c,{pcode:S(c.pcode,r)})}return null},oe=(e,t,a,o)=>{const n=v(e,e.lexemes[t].content,o);if(n){if("function"!==n.type)throw d("{lex} is a procedure, not a function.",e.lexemes[t]);g(a,n.returns,e.lexemes[t]);const r=_(e,t,o,!1);return n.code||r.pcode.push((e=>[P.a.ldvv,e,1])(n.resultAddress)),Object.assign(r,{type:n.returns})}return null},ne=(e,t,a,o,n)=>{if("("===e.lexemes[t].content){const r=V(e,t+1,a,o,n);if(e.lexemes[r.lex]&&")"===e.lexemes[r.lex].content)return Object.assign(r,{lex:r.lex+1});throw d("Closing bracket missing.",e.lexemes[t-1])}return null},re=(e,t,a,o)=>{if("Python"===o){if(!e.lexemes[t+1]||"("!==e.lexemes[t+1].content)throw d("Opening bracket missing after command {lex}.",e.lexemes[t]);if(!e.lexemes[t+2]||")"!==e.lexemes[t+2].content)throw d("Command {lex} takes no arguments.",e.lexemes[t-1]);return{lex:t+3,pcode:[R(a,e,o)]}}if(e.lexemes[t+1]&&"("===e.lexemes[t+1].content)throw d("Command {lex} takes no arguments.",e.lexemes[t]);return{lex:t+1,pcode:[R(a,e,o)]}},ce=(e,t,a,o)=>{if(!e.lexemes[t+1]||"("!==e.lexemes[t+1].content)throw d("Opening bracket missing after command {lex}.",e.lexemes[t]);const n=se(e,t+2,a,o),r=[R(a,e,o)];return Object.assign(n,{pcode:S(n.pcode,r)})},se=(e,t,a,o)=>{const n=a.parameters.length;let r=0,c=[[]];for(;r<n&&")"!==e.lexemes[t].content;){let s=ie(e,t,a,r,o);if(r+=1,t=s.lex,c=S(c,s.pcode),r<n){if(!e.lexemes[t]||","!==e.lexemes[t].content)throw d("Comma needed after parameter.",e.lexemes[t]);t+=1}}const s=a.name||a.names[o];if(r<n)throw d(`Not enough arguments given for command "${s}".`,e.lexemes[t]);if(","===e.lexemes[t].content)throw d(`Too many arguments given for command "${s}"`,e.lexemes[t]);if(")"!==e.lexemes[t].content)throw d(`Closing bracket missing after command "${s}"`,e.lexemes[t-1]);return{lex:t+1,pcode:c}},ie=(e,t,a,o,n)=>{if(a.parameters[o].byref){let a=w(e,e.lexemes[t].content,n);if(!a)throw d("{lex} is not defined.}",e.lexemes[t]);return{lex:t+1,pcode:[(e=>e.turtle?[P.a.ldin,0,P.a.lptr,P.a.ldin,e.turtle,P.a.plus]:0===e.routine.index?[P.a.ldag,e.routine.turtleAddress+5+e.index]:[P.a.ldav,e.routine.index+9,e.index])(a)]}}const r=a.parameters[o].type||a.parameters[o].fulltype.type;return V(e,t,"null",r,n)},le=(e,t)=>({language:t,name:e,index:0,indent:0,constants:[],variables:[],subroutines:[],lexemes:[],turtleAddress:null,memoryNeeded:null}),de=(e,t,a)=>({name:e,type:t,level:-1,index:null,indent:null,globals:[],nonlocals:[],constants:[],parameters:[],variables:[],parent:a,subroutines:[],lexemes:[],memoryNeeded:null}),ue=(e,t,a)=>({name:e,type:t,value:a}),he=(e,t,a=!1)=>({name:e.content,lexeme:e,routine:t,byref:a,index:null,fulltype:null,private:null}),pe=(e,t=null,a=null,o=null)=>"string"===e?{type:e,length:33,start:a,fulltype:o}:{type:e,length:t,start:a,fulltype:o};var be=e=>{const t=[];for(var a,o,n,r,c,s,i,l=0,u="start";l<e.length;)switch(u){case"start":if(a=!0,o=!1,n=!1,c=le("!","BASIC"),t.push(c),"DEF"===e[l].content)throw d('Subroutines must be defined after program "END".',e[l]);u="DIM"===e[l].content?"dim":"prog";break;case"dim":break;case"prog":if("DIM"===e[l].content)throw d('"DIM" commands must occur at the top of the program.',e[l]);if("PRIVATE"===e[l].content)throw d("Private variables cannot be defined in the main program.",e[l]);if("LOCAL"===e[l].content)throw d("Local variables cannot be defined in the main program.",e[l]);if("DEF"===e[l].content)throw d('Subroutines must be defined after program "END".',e[l]);"END"===e[l].content?(a=!1,u="end"):("identifier"===e[l].type&&e[l+1]&&"="===e[l+1].content&&(me(t[0],e[l].content)||((s=he(e[l],t[0],!1)).fulltype=ge(e[l].content),t[0].variables.push(s))),t[0].lexemes.push(e[l])),l+=1;break;case"end":if(e[l]){if("DEF"!==e[l].content){if(0===c.index)throw d('No program text can appear after program "END" (except subroutine definitions).',e[l]);throw d("No program text can appear after subroutine end (except further subroutine definitions).",e[l])}l+=1,u="def"}break;case"def":if(!e[l])throw d('"DEF" must be followed by a valid procedure or function name. (Procedure names must begin with "PROC", and function names must begin with "FN".)',e[l-1]);if(!fe(e[l].content))throw d('"DIM" commands can only occur within the main program. To declare a local or private array, use "LOCAL" or "PRIVATE" instead.',e[l]);if((c=de(e[l].content,fe(e[l].content,t[0]))).parent=t[0],t.push(c),t[0].subroutines.push(c),"procedure"===c.type?o=!0:(n=!0,s=he({content:"result"},c),c.variables.push(s)),!e[l+1])throw d("No program text can appear after subroutine end (except further subroutine definitions).",e[l]);"("===e[l+=1].content?(l+=1,u="parameters"):u="variables";break;case"parameters":if(!e[l])throw d("Parameter name expected.",e[l-1]);if(r="RETURN"===e[l].content,!e[l="RETURN"===e[l].content?l+1:l])throw d("Parameter name expected.",e[l-1]);if("turtle"===e[l].type)throw d("{lex} is the name of a Turtle property, and cannot be used as a parameter name.",e[l]);if("identifier"!==e[l].type)throw d("{lex} is not a valid parameter name.",e[l]);if(!ge(e[l].content))throw d('{lex} is not a valid parameter name. Integer parameters must end with "%", and string parameters must end with "$".',e[l]);if(me(c,e[l].content))throw d("{lex} is already a parameter for this subroutine.",e[l]);if((s=he(e[l],c,r)).fulltype=ge(e[l].content),c.parameters.push(s),c.variables.push(s),!e[l+=1])throw d("Closing bracket needed after parameters.",e[l-1]);if("identifier"===e[l].type)throw d("Comma needed after parameter.",e[l]);if(")"===e[l].content)u="variables";else if(","!==e[l].content)throw d("Closing bracket needed after parameters.",e[l]);l+=1;break;case"variables":if(!e[l])throw d("Subroutine definition must be followed by some commands.",e[l-1]);switch(e[l].content){case"DIM":throw d('"DIM" commands can only occur within the main program. To declare a local or private array, use "LOCAL" or "PRIVATE" instead.',e[l]);case"PRIVATE":l+=1,u="private";break;case"LOCAL":l+=1,u="local";break;default:u="subroutine"}break;case"private":if(!e[l])throw d("Variable name expected.",e[l-1]);if("turtle"===e[l].type)throw d("{lex} is the name of a Turtle property, and cannot be used as a variable name.",e[l]);if("identifier"!==e[l].type)throw d("{lex} is not a valid variable name.",e[l]);if(!ge(e[l].content))throw d('{lex} is not a valid variable name. Integer variables must end with "%", and string variables must end with "$".',e[l]);if(me(c,e[l].content))throw d("{lex} is already a variable in the current scope.",e[l]);if((s=he(e[l],t[0])).fulltype=ge(e[l].content),s.private=c,t[0].variables.push(s),!e[l+=1])throw d("subNoEnd",e[l-1]);","===e[l].content?l+=1:u="variables";break;case"local":if(!e[l])throw d("Variable name expected.",e[l-1]);if("turtle"===e[l].type)throw d("{lex} is the name of a Turtle property, and cannot be used as a variable name.",e[l]);if("identifier"!==e[l].type)throw d("{lex} is not a valid variable name.",e[l]);if(!ge(e[l].content))throw d('{lex} is not a valid variable name. Integer variables must end with "%", and string variables must end with "$".',e[l]);if(me(c,e[l].content))throw d("{lex} is already a variable in the current scope.",e[l]);if((s=he(e[l],c)).fulltype=ge(e[l].content),c.variables.push(s),!e[l+=1]){if("procedure"===c.type)throw d('Procedure must finish with "ENDPROC".',e[l]);throw d('Function must finish with "=expression".',e[l])}","===e[l].content?l+=1:u="variables";break;case"subroutine":if("DIM"===e[l].content)throw d('"DIM" commands can only occur within the main program. To declare a local or private array, use "LOCAL" or "PRIVATE" instead.',e[l]);if("PRIVATE"===e[l].content)throw d("Private variables must be declared at the start of the subroutine.",e[l]);if("LOCAL"===e[l].content)throw d("Local variables must be declared at the start of the subroutine.",e[l]);if("DEF"===e[l].content)throw d('The next subroutine must be defined after subroutine "ENDPROC".',e[l]);if("variable"===e[l].type&&(me(t[0],e[l].content)||me(c,e[l].content)||((s=he(e[l],t[0])).fulltype=ge(e[l].content),t[0].variables.push(s))),"ENDPROC"===e[l].content){if("procedure"!==c.type)throw d('Function must end with "=&lt;expression&gt;", not "ENDPROC".',e[l]);l+=1,o=!1,u="end"}else if(e[l].line>e[l-1].line&&"="===e[l].content){if("function"!==c.type)throw d('Procedure must end with "ENDPROC", not "=&lt;expression&gt;".',e[l]);c.lexemes.push(e[l]),l+=1,u="result"}else c.lexemes.push(e[l]),l+=1;break;case"result":if(!e[l])throw d("Subroutine definition must be followed by some commands.",e[l-1]);for(i=e[l].line;e[l]&&e[l].line===i;)c.lexemes.push(e[l]),l+=1;n=!1,u="end"}if(a)throw d('Program must finish with "END".',e[l-1]);if(o)throw d('Procedure must finish with "ENDPROC".',e[l-1]);if(n)throw d('Function must finish with "=expression".',e[l-1]);return t};const me=(e,t)=>e.variables.some(e=>(e.name||e.names.basic)===t),ge=e=>{const t="%"===e.slice(-1)?"boolint":"string";return!!t&&pe(t,"boolint"===t?0:34)},fe=e=>"PROC"===e.slice(0,4)?"procedure":"FN"===e.slice(0,2)&&"function";var ye=e=>{const t=[],a=[];let o,n,r=0,c=0,s="program";for(;r<e.length;)switch(s){case"program":({lex:r,routine:o,state:s}=we(e,r)),t.push(o),a.push(o);break;case"crossroads":({lex:r,state:s}=Oe(e,r,o));break;case"constant":({lex:r,state:s}=xe(e,r,o));break;case"variable":({lex:r,state:s}=ke(e,r,o));break;case"procedure":case"function":n=a[a.length-1],({lex:r,routine:o}=$e(e,r,s,n)),n.subroutines.push(o),a.push(o),s="crossroads";break;case"begin":({lex:r,state:s}=Ie(e,r,o));break;case"end":if(0===o.index){if(!e[r])throw d('Program "END" must be followed by a full stop.',e[r-1]);if("."!==e[r].content)throw d('Program "END" must be followed by a full stop.',e[r]);if(e[r+1])throw d('No text can appear after program "END".',e[r+1]);r+=1}else r=Ae(e,r,!0),c+=1,o.index=c,t.push(a.pop()),o=a[a.length-1],s="crossroads"}return t};const we=(e,t)=>{const[a,o]=e.slice(t,t+2);if(!a)throw d('Program must start with keyword "PROGRAM".');if("program"!==a.content)throw d('Program must start with keyword "PROGRAM".',a);if(!o)throw d('"PROGRAM" must be followed by a legal program name.',a);if("turtle"===o.type)throw d("Program cannot be given the name of a Turtle attribute.",o);if("identifier"!==o.type)throw d("{lex} is not a valid program name.",o);return{lex:Ae(e,t+2,!0),routine:le(o.content,"Pascal"),state:"crossroads"}},Oe=(e,t,a)=>{const o=e[t],n='Expected "BEGIN", constant/variable definitions, or subroutine definitions.';if(!o)throw d(n,e[t-1]);switch(o.content){case"const":if(a.variables.length>0)throw d("Constants must be defined before any variables.",o);if(a.subroutines.length>0)throw d("Constants must be defined before any subroutines.",o);return{lex:t+1,state:"constant"};case"var":if(a.subroutines.length>0)throw d("Variables must be defined before any subroutines.",o);return{lex:t+1,state:"variable"};case"function":case"procedure":return{lex:t+1,state:o.content};case"begin":return{lex:Ae(e,t+1),state:"begin"};default:throw d(n,o)}},xe=(e,t,a)=>{const[o,n,r]=e.slice(t,t+3);if(!o)throw d("No constant name found.",e[t-1]);if("turtle"===o.type)throw d("{lex} is the name of a predefined Turtle property, and cannot be used as a constant name.",o);if("identifier"!==o.type)throw d("{lex} is not a valid constant name.",o);if(o.content===f(a).name)throw d("Constant name {lex} is already the name of the program.",o);if(Ee(a,o.content))throw d("{lex} is already the name of a constant in the current scope.",o);if(!n)throw d("Constant must be assigned a value.",o);if("="!==n.content||!r)throw d("Constant must be assigned a value.",n);let c="-"===r.content?ve(e,t+3,o.content,a):je(e,t+2,o.content,a);if(a.constants.push(c.constant),!e[c.lex])throw d("No program text found after constant definition.",e[c.lex-1]);return"identifier"===e[c.lex].type?{lex:c.lex,state:"constant"}:{lex:c.lex,state:"crossroads"}},ve=(e,t,a,o)=>{const n=e[t];if(!n)throw d("Constant must be assigned a value.",e[t-1]);switch(n.type){case"string":throw d("Strings cannot be negated.",n);case"boolean":throw d("Boolean values cannot be negated.",n);case"integer":return{lex:Ae(e,t+1,!0),constant:ue(a,n.type,-n.value)};case"identifier":let r=y(o,n.content,"Pascal")||O(n.content,"Pascal");if(!r)throw d("{lex} is not a valid constant value.",n);return{lex:Ae(e,t+1,!0),constant:ue(a,r.type,-r.value)};default:throw d("{lex} is not a valid constant value.",n)}},je=(e,t,a,o)=>{const n=e[t];if(!n)throw d("Constant must be assigned a value.",e[t-1]);switch(n.type){case"boolean":case"integer":case"string":return{lex:Ae(e,t+1,!0),constant:ue(a,n.type,n.value)};case"identifier":let r=y(o,n.content,"Pascal")||O(n.content,"Pascal");if(!r)throw d("{lex} is not a valid constant value.",n);return{lex:Ae(e,t+1,!0),constant:ue(a,r.type,r.value)};default:throw d("{lex} is not a valid constant value.",n)}},ke=(e,t,a,o=!1,n=!1)=>{const r=[];let c=!0;for(;c;){if(!e[t])throw d("No variable name found.",e[t-1]);if("turtle"===e[t].type)throw d("{lex} is the name of a predefined Turtle property, and cannot be used as a variable name.",e[t]);if("identifier"!==e[t].type)throw d("{lex} is not a valid variable name.",e[t]);if(e[t].content===f(a).name)throw d("Variable name {lex} is already the name of the program.",e[t]);if(Ee(a,e[t].content))throw d("{lex} is already the name of a constant or variable in the current scope.",e[t]);if(r.push(he(e[t],a,n)),!e[t+1])throw d("Variable name must be followed by a colon, then the variable type (array, boolean, char, integer, or string).",e[t]);if(","===e[t+1].content)t+=2;else{if(":"!==e[t+1].content)throw"identifier"===e[t+1].type?d("Comma missing between variable declarations.",e[t+1]):d("Variable name must be followed by a colon, then the variable type (array, boolean, char, integer, or string).",e[t+1]);t+=2,c=!1}}let s=Te(e,t,a,o,n);if(r.forEach(e=>{e.fulltype=s.fulltype}),a.variables=a.variables.concat(r),!e[t=o&&")"===e[s.lex].content?s.lex:Ae(e,s.lex,!0)])throw d("No text found after variable declarations.",e[t-1]);return"identifier"===e[t].type?{lex:t,variables:r,state:"variable"}:{lex:t,variables:r,state:"crossroads"}},Te=(e,t,a,o,n)=>{const r=e[t];if(!e[t])throw d("Variable name must be followed by a colon, then the variable type (array, boolean, char, integer, or string).",e[t-1]);switch(r.content){case"boolean":case"integer":case"char":return{lex:t+1,fulltype:pe(r.content)};case"string":if(e[t+1]&&"["===e[t+1].content){const[a,o]=e.slice(t+2,t+4);if(!a)throw d("Opening bracket must be followed by an integer value.",e[t+1]);if("integer"!==a.type)throw d("String size must be an integer.",a);if(!o)throw d('String size must be followed by a closing square bracket "]".',a);if("]"!==o.content)throw d('String size must be followed by a closing square bracket "]".',o);return{lex:t+4,fulltype:pe("string",a.value)}}return{lex:t+1,fulltype:pe("string")};case"array":return o?Pe(e,t+1,a,n):Se(e,t+1,a);default:throw d('{lex} is not a valid variable type (expected "array", "boolean", "char", "integer", or "string").',r)}},Pe=(e,t,a,o)=>{if(!e[t])throw d('Array declaration must be followed by "of", and then the type of the elements of the array.',e[t-1]);if(!o)throw d("Array parameters can only be passed by reference, not by value.",e[t]);if("["===e[t].content)throw d("Array references parameters cannot be given a size specification.",e[t]);if("of"!==e[t].content)throw d('Array declaration must be followed by "of", and then the type of the elements of the array.',e[t]);return Te(e,t+1,a,!0,o)},Se=(e,t,a)=>{const[o,n,r,c,s,i]=e.slice(t,t+6);let l,u,h;if(!o)throw d('Array declarations take the form "array[n..m]", where "n" and "m" are integer values specifying the start and end index of the array.',e[t-1]);if("["!==o.content)throw d('Array declarations take the form "array[n..m]", where "n" and "m" are integer values specifying the start and end index of the array.',o);if(!n)throw d('Array declarations take the form "array[n..m]", where "n" and "m" are integer values specifying the start and end index of the array.',o);switch(n.type){case"identifier":let e=y(a,n.content,"Pascal");if(!e)throw d("Constant {lex} has not been defined.",n);if("integer"!==e.type)throw d("{lex} is not an integer constant.",n);u=e.value;break;case"integer":u=n.value;break;default:throw d('Array declarations take the form "array[n..m]", where "n" and "m" are integer values specifying the start and end index of the array.',n)}if(!r)throw d('Array declarations take the form "array[n..m]", where "n" and "m" are integer values specifying the start and end index of the array.',n);if(".."!==r.content)throw d('Array declarations take the form "array[n..m]", where "n" and "m" are integer values specifying the start and end index of the array.',r);if(!c)throw d('Array declarations take the form "array[n..m]", where "n" and "m" are integer values specifying the start and end index of the array.',r);switch(c.type){case"identifier":let e=y(a,c.content,"Pascal");if(!e)throw d("Constant {lex} has not been defined.",c);if("integer"!==e.type)throw d("{lex} is not an integer constant.",c);l=e.value;break;case"integer":l=c.value;break;default:throw d('Array declarations take the form "array[n..m]", where "n" and "m" are integer values specifying the start and end index of the array.',c)}if(!s)throw d('Array declarations take the form "array[n..m]", where "n" and "m" are integer values specifying the start and end index of the array.',c);if("]"!==s.content)throw d('Array declarations take the form "array[n..m]", where "n" and "m" are integer values specifying the start and end index of the array.',s);if(!i)throw d('Array declaration must be followed by "of", and then the type of the elements of the array.',s);if("of"!==i.content)throw d('Array declaration must be followed by "of", and then the type of the elements of the array.',i);return{lex:(h=Te(e,t+6,a)).lex,fulltype:pe("array",l-u+1,u,h.fulltype)}},$e=(e,t,a,o)=>{const n=e[t];let r,c;if(!n)throw d("No subroutine name found.",e[t-1]);if("turtle"===n.type)throw d("{lex} is the name of a predefined Turtle property, and cannot be used as a subroutine name.",n);if("identifier"!==n.type)throw d("{lex} is not a valid subroutine name.",n);if(n.content===f(o).name)throw d("Subroutine name {lex} is already the name of the program.",n);if(x(o,n.content,"Pascal"))throw d("{lex} is already the name of a subroutine in the current scope.",n);if(r=de(n.content,a,o),"function"===a&&r.variables.push(he({content:"result"},r,!1)),!e[t+=1])throw d("Subroutine declaration must be followed by a semicolon.",n);if("("===e[t].content&&(c=Ce(e,t+1,r),r.parameters=c.parameters,r.variables=r.variables.concat(c.parameters),t=c.lex),"function"===a){if(!e[t])throw d("Function must be followed by a colon, the the return type (integer, boolean, char, or string).",e[t-1]);if(":"!==e[t].content)throw d("Function must be followed by a colon, the the return type (integer, boolean, char, or string).",e[t]);c=Te(e,t+1,r),r.variables[0].fulltype=c.fulltype,t=c.lex}return{lex:t=Ae(e,t,!0),routine:r}},Ce=(e,t,a)=>{let o,n=[],r=!0;for(;r;){if(o=e[t]&&"var"===e[t].content?ke(e,t+1,a,!0,!0):ke(e,t,a,!0,!1),n=n.concat(o.variables),!e[t=o.lex])throw d('Parameter declarations must be followed by a closing bracket ")".',e[t-1]);switch(e[t].content){case";":t+=1;break;case")":t+=1,r=!1;break;default:throw d('Parameter declarations must be followed by a closing bracket ")".',e[t])}}return{lex:t,parameters:n}},Ie=(e,t,a)=>{let o=1;for(;o>0&&e[t];)"begin"===e[t].content&&(o+=1),"end"===e[t].content&&(o-=1),a.lexemes.push(e[t]),t+=1;if(o>0)throw d('Routine commands must finish with "END".',e[t]);return a.lexemes.pop(),{lex:t,state:"end"}},Ee=(e,t)=>e.variables.concat(e.constants).some(e=>e.name===t),Ae=(e,t,a=!1)=>{if(a){if(!e[t])throw d("Semicolon needed after statement.",e[t-1]);if(";"!==e[t].content)throw d("Semicolon needed after statement.",e[t])}for(;e[t]&&";"===e[t].content;)t+=1;return t};var Re=e=>{const t=[],a=[];let o,n=0,r="crossroads";for(o=le("!","Python"),t.push(o),a.push(o);n<e.length;)switch(r){case"crossroads":({lex:n,state:r}=Le(e,n,o));break;case"global":({lex:n,state:r}=Be(e,n,o));break;case"nonlocal":({lex:n,state:r}=Ne(e,n,o));break;case"def":({lex:n,routine:o,state:r}=qe(e,n,o)),a.push(o);break;case"parameters":({lex:n,state:r}=Me(e,n,o));break;case"commands":({lex:n,state:r}=De(e,n,o)),null===o.index&&(o.index=t.length,t.push(a.pop()),o=a[a.length-1])}if(0===t[0].lexemes.length){if(!t.some(e=>"main"===e.name))throw d('Program must have some commands or define a "main" procedure.',e[e.length-1]);t[0].lexemes=[{type:"identifier",content:"main",indent:0},{type:"punctuation",content:"(",indent:0},{type:"punctuation",content:")",indent:0}]}return t};const Le=(e,t,a)=>{if(!e[t])throw d("No commands given.",e[t-1]);if(a.indent){if(e[t].offset<a.indent)throw d("Not enough indentation.",e[t]);if(e[t].offset>a.indent)throw d("Too much indentation.",e[t])}else a.indent=e[t].offset;switch(e[t].content){case"global":if(0===a.index)throw d("Global variables are only allowed in subroutines.",e[t]);if(a.subroutines.length>0)throw d("Global variables must be declared before any subroutine definitions.",e[t]);return{lex:t+1,state:"global"};case"nonlocal":if(0===a.index)throw d("Nonlocal variables are only allowed in subroutines.",e[t]);if(a.subroutines.length>0)throw d("Nonlocal variables must be declared before any subroutine definitions.",e[t]);return{lex:t+1,state:"nonlocal"};case"def":if(a.lexemes.length>0)throw d("Subroutine definitions must come before the routine's commands",e[t]);return{lex:t+1,state:"def"};default:return{lex:t,state:"commands"}}},Be=(e,t,a)=>{if(!e[t])throw d('"global" must be followed by an identifier.',e[t-1]);if(e[t].line!==e[t-1].line)throw d("Global variable declarations must be on a single line.",e[t]);for(;e[t]&&e[t].line===e[t-1].line;){if("turtle"!==e[t].type&&"identifier"!==e[t].type)throw d("{lex} is not a valid variable name.",e[t]);if(a.globals.indexOf(e[t].content)>-1)throw d("Global variable {lex} has already been declared.",e[t]);a.globals.push(e[t].content);const o=f(a);if("turtle"===e[t].type||o.variables.some(a=>a.name===e[t].content)||o.variables.push(he(e[t],o)),e[t+1].line>e[t].line)return{lex:t+1,state:"crossroads"};if(!e[t+1]||","!==e[t+1].content)throw d("Comma missing after global variable declaration.",e[t]);if(!e[t+2])throw d("Expected more global variable declarations after comma.",e[t+1]);if(e[t+2].line>e[t+1].line)throw d("Global variable declarations must be on a single line.",e[t+2]);t+=2}return{lex:t,state:"crossroads"}},Ne=(e,t,a)=>{if(!e[t])throw d('"local" must be followed by an identifier.',e[t-1]);if(e[t].line>e[t-1].line)throw d("Nonlocal variable definitions must be on a single line.",e[t]);if(a.nonlocals.indexOf(e[t].content)>-1)throw d("Nonlocal variable {lex} has already been defined.",e[t]);for(;e[t]&&e[t].line===e[t-1].line;){if("turtle"===e[t].type)throw d("Turtle variables are global, not nonlocal.",e[t]);if("identifier"!==e[t].type)throw d("{lex} is not a valid variable name.",e[t]);if(a.nonlocals.indexOf(e[t].content)>-1)throw d("Nonlocal variable {lex} has already been declared.",e[t]);if(a.nonlocals.push(e[t].content),e[t+1].line>e[t].line)return{lex:t+1,state:"crossroads"};if(!e[t+1]||","!==e[t+1].content)throw d("Comma missing after nonlocal variable declaration.",e[t]);if(!e[t+2])throw d("Expected more nonlocal variable declarations after comma.",e[t+1]);if(e[t+2].line>e[t+1].line)throw d("Nonlocal variable declarations must be on a single line.",e[t+2]);t+=2}return{lex:t,state:"crossroads"}},qe=(e,t,a)=>{if(!e[t])throw d('"def" must be followed by an identifier.',e[t-1]);if(e[t-1].line!==e[t].line)throw d('Subroutine name must be on the same line as "def".',e[t]);if("turtle"===e[t].type)throw d("Subroutine cannot have the name of a global Turtle variable.",e[t]);if("identifier"!==e[t].type)throw d("{lex} is not a valid subroutine name.",e[t]);if(Fe(e[t].content,a))throw d("{lex} is already the name of a subroutine or variable in the current scope.",e[t]);if((a=de(e[t].content,"procedure",a)).parent.subroutines.push(a),!e[t+1])throw d("Subroutine definition must be followed by an open bracket.",e[t-1]);if("("!==e[t+1].content)throw d("Subroutine definition must be followed by an open bracket.",e[t]);if(e[t].line!==e[t+1].line)throw d("Open bracket must be on the same line as the subroutine definition.",e[t]);return{lex:t+2,routine:a,state:"parameters"}},Me=(e,t,a)=>{if(!e[t])throw d("Expecting parameter definition or closing bracket.",e[t-1]);if(")"===e[t].content){if(e[t-1].line!==e[t].line)throw d("Closing bracket after parameters cannot be on a new line.",e[t]);if(!e[t+1])throw d("Subroutine definition must be followed by a colon.",e[t]);if(":"!==e[t+1].content)throw d("Subroutine definition must be followed by a colon.",e[t+1]);if(e[t+1].line>e[t].line)throw d("Colon following subroutine definition cannot be on a new line.",e[t+1]);if(!e[t+2])throw d("No commands found following subroutine declaration.",e[t+1]);if(e[t+2].line===e[t+1].line)throw d("Subroutine commands must be on a new line.",e[t]);return{lex:t+2,state:"crossroads"}}if("turtle"===e[t].type)throw d("{lex} is the name of a predefined global Turtle variable.",e[t]);if("identifier"!==e[t].type)throw d("{lex} is not a valid identifier.",e[t]);if(e[t-1].line!==e[t].line)throw d("Parameter declaration cannot be on a new line.",e[t]);if(a.parameters.some(a=>a.name===e[t].content))throw d("{lex} is already the name of a parameter for this subroutine.",e[t]);let o=he(e[t],a);if(a.parameters.push(o),a.variables.push(o),!e[t+1])throw d("Closing bracket missing after parameter declarations.",e[t]);if("turtle"===e[t+1].type||"identifier"===e[t+1].type)throw d("Comma missing between parameters.",e[t+1]);if(","===e[t+1].content){if(!e[t+2])throw d("Expected parameter declaration after comma.",e[t+1]);if(")"===e[t+2].content)throw d("Parameter list cannot end with a comma.",e[t+1]);return{lex:t+2,state:"parameters"}}if(")"===e[t+1].content)return{lex:t+1,state:"parameters"};throw d("py1parser43","parsNoCommaOrBracket",e[t])},De=(e,t,a)=>{let o;for(;e[t]&&e[t].offset>=a.indent;){if("return"===e[t].content){if(0===a.index)throw d("cmdMainReturn",e[t]);if("main"===a.name)throw d("cmdMainSubReturn",e[t]);if("function"===a.type)throw d("cmdRepeatReturn",e[t]);a.type="function",o=he(e[t],a,!1),a.variables.unshift(o)}Ue(a,e,t)&&(o=he(e[t],a,!1),a.variables.push(o)),a.lexemes.push(e[t]),t+=1}return{lex:t,state:"crossroads"}},Fe=(e,t)=>0===t.index?t.subroutines.some(t=>t.name===e):t.subroutines.some(t=>t.name===e)||t.globals.indexOf(e)>-1||t.nonlocals.indexOf(e)>-1,Ue=(e,t,a)=>"identifier"===t[a].type&&(!!t[a+1]&&(("="===t[a+1].content||"in"===t[a+1].content)&&(!(e.globals.indexOf(t[a].content)>-1)&&(!(e.nonlocals.indexOf(t[a].content)>-1)&&!w(e,t[a].content,"Python")))));const Ge=(e,t)=>{for(var a,o,n=e[t],r=n.lexemes,c=0;c<r.length;)if("identifier"===r[c].type)if((a=w(n,r[c].content,"Python"))&&null===a.fulltype){if(r[c+=1]&&"in"===r[c].content)a.fulltype=pe("integer"),c+=1;else if(r[c]&&"="===r[c].content&&r[c+=1])try{o=V(n,c,"null","null","Python"),a.fulltype=pe(o.type),c=o.lex}catch(e){c+=1}}else c+=1;else if("return"===r[c].content){if(a=w(n,"return","Python"),r[c+=1])try{o=V(n,c,"null","null","Python"),a.fulltype=pe(o.type),c=o.lex}catch(e){c+=1}}else c+=1;return 0===t?1===e.length?e:Ge(e,e.length-1):t>1?Ge(e,t-1):e},He=function(e,t){for(var a,o,n,r=e[t],c=r.lexemes,s=0;s<c.length;){if("identifier"===c[s].type&&(a=x(r,c[s].content,"Python"))&&a.parameters.length>0)for(o=0,s+=2;o<a.parameters.length;){try{n=V(r,s,"null","null","Python"),null===a.parameters[o].fulltype&&(a.parameters[o].fulltype=pe(n.type)),s=n.lex+1}catch(e){}o+=1}s+=1}return 1===t?e:He(e,t-1)},ze=e=>{return e.reduce((e,t)=>e.concat(t.variables),[]).find(e=>null===e.fulltype)},We=e=>{let t=0;e.variables.forEach(e=>{t+=1,e.index=t,e.fulltype&&null!==e.fulltype.length&&(t+=e.fulltype.length)}),e.memoryNeeded=t},Ye=e=>10+(e=>e.some(e=>"function"===e.type)?e.length+1:e.length)(e),Ke=(e,t,a)=>{let o;switch(e.lexemes[t].type){case"turtle":case"identifier":if(e.lexemes[t+1]&&"="===e.lexemes[t+1].content){o=Q(e,e.lexemes[t].content,t+2,"BASIC");break}o=_(e,t,"BASIC");break;case"keyword":switch(e.lexemes[t].content){case"IF":o=Xe(e,t+1,a);break;case"FOR":o=Ve(e,t+1,a);break;case"REPEAT":o=Qe(e,t+1,a);break;case"WHILE":o=_e(e,t+1,a);break;default:throw d("{lex} makes no sense here.",e.lexemes[t])}break;default:throw d("{lex} makes no sense here.",e.lexemes[t])}if(e.lexemes[o.lex])if(":"!==e.lexemes[o.lex].content){if(e.lexemes[o.lex].line===e.lexemes[o.lex-1].line&&"else"!==e.lexemes[o.lex].type)throw d("Command must be on a new line, or followed by a colon.",e.lexemes[o.lex-1])}else for(;e.lexemes[o.lex]&&":"===e.lexemes[o.lex].content;)o.lex+=1;return o},Xe=(e,t,a)=>{let o,n,r,c,s;if(!e.lexemes[t])throw d('"IF" must be followed by a boolean expression.',e.lexemes[t-1]);if(t=(s=V(e,t,"null","boolean","BASIC")).lex,o=s.pcode[0],!e.lexemes[t])throw d('"IF ..." must be followed by "THEN".',e.lexemes[t-1]);if("THEN"!==e.lexemes[t].content)throw d('"IF ..." must be followed by "THEN".',e.lexemes[t]);if(t+=1,!e.lexemes[t])throw d('No commands found after "IF".',e.lexemes[t]);if(e.lexemes[t].line>e.lexemes[t-1].line?(s=Ze(e,t,a+1,"IF"),c=!1):(s=Ke(e,t,a+1),c=!0),t=s.lex,n=s.pcode,e.lexemes[t]&&"ELSE"===e.lexemes[t].content){if(c&&e.lexemes[t].line>e.lexemes[t-1].line)throw d('"ELSE" cannot be on a new line.',e.lexemes[t]);if(t+=1,!e.lexemes[t])throw d('No commands found after "ELSE".',e.lexemes[t]);t=(s=e.lexemes[t].line>e.lexemes[t-1].line?Ze(e,t,a+n.length+2,"ELSE"):Ke(e,t,a+n.length+2)).lex,r=s.pcode}return{lex:t,pcode:L(a,o,n,r)}},Ve=(e,t,a)=>{let o,n,r,c,s,i,l;if(!e.lexemes[t])throw d('"FOR" must be followed by an integer variable.',e.lexemes[t-1]);if("turtle"===e.lexemes[t].type)throw d('Turtle attribute cannot be used as a "FOR" variable.',e.lexemes[t]);if("identifier"!==e.lexemes[t].type)throw d('"FOR" must be followed by an integer variable.',e.lexemes[t]);if(!(o=w(e,e.lexemes[t].content)))throw d("Variable {lex} not defined.",e.lexemes[t]);if("integer"!==o.fulltype.type&&"boolint"!==o.fulltype.type)throw d("{lex} is not an integer variable.",e.lexemes[t]);if(t+=1,!e.lexemes[t])throw d('"FOR" loop variable must be assigned an initial value.',e.lexemes[t-1]);if("="!==e.lexemes[t].content)throw d('"FOR" loop variable must be assigned an initial value.',e.lexemes[t]);if(t+=1,!e.lexemes[t])throw d('"FOR" loop variable must be assigned an initial value.',e.lexemes[t-1]);if(t=(l=V(e,t,"null","integer","Pascal")).lex,n=l.pcode[0],!e.lexemes[t])throw d("forToDownTo",e.lexemes[t-1]);if("TO"!==e.lexemes[t].content)throw d('"FOR" loop initialisation must be followed by "TO".',e.lexemes[t]);if(t+=1,!e.lexemes[t])throw d('"TO" must be followed by an integer (or integer constant).',e.lexemes[t-1]);if(t=(l=V(e,t,"null","integer","Pascal")).lex,r=l.pcode[0],e.lexemes[t]&&"STEP"===e.lexemes[t].content){if(t+=1,!e.lexemes[t])throw d('"STEP" instruction must be of the form "STEP -1".',e.lexemes[t-1]);if("-"!==e.lexemes[t].content)throw d('"STEP" instruction must be of the form "STEP -1".',e.lexemes[t]);if(t+=1,!e.lexemes[t])throw d('"STEP" instruction must be of the form "STEP -1".',e.lexemes[t-1]);if(1!==e.lexemes[t].value)throw d('"STEP" instruction must be of the form "STEP -1".',e.lexemes[t]);t+=1,c="lseq",s="decr"}else c="mreq",s="incr";if(!e.lexemes[t])throw d('No commands found after "FOR" loop initialisation.',e.lexemes[t]);return t=(l=e.lexemes[t-1].line<e.lexemes[t].line?Ze(e,t,a+3,"FOR"):Ke(e,t,a+3)).lex,i=l.pcode,{lex:t,pcode:B(a,o,n,r,c,s,i)}},Qe=(e,t,a)=>{let o,n,r;if(t=(r=Ze(e,t,a,"REPEAT")).lex,n=r.pcode,!e.lexemes[t])throw d('"UNTIL" must be followed by a boolean expression.',e.lexemes[t-1]);return t=(r=V(e,t,"null","boolean",!1)).lex,o=r.pcode[0],{lex:t,pcode:N(a,o,n)}},_e=(e,t,a)=>{let o,n,r;if(!e.lexemes[t])throw d('"WHILE" must be followed by a boolean expression.',e.lexemes[t-1]);if(t=(r=V(e,t,"null","boolean","BASIC")).lex,o=r.pcode[0],!e.lexemes[t])throw d('No commands found after "WHILE ... DO".',e.lexemes[t]);return t=(r=e.lexemes[t].line>e.lexemes[t-1].line?Ze(e,t,a+1,"WHILE"):Ke(e,t,a+1)).lex,n=r.pcode,{lex:t,pcode:q(a,o,n)}},Ze=(e,t,a,o)=>{let n,r=[],c=!1;if(!e.lexemes[t])throw d(`No commands found after "${o}".`,e.lexemes[t-1]);for(;!c&&t<e.lexemes.length;)(c=Je(o,e.lexemes[t]))?"ELSE"!==e.lexemes[t].content&&(t+=1):(n=r,({lex:t,pcode:r}=Ke(e,t,a+r.length)),r=n.concat(r));if(!c)throw d(`Unterminated "${o}" statement.`,e.lexemes[t-1]);return{lex:t,pcode:r}},Je=(e,t)=>{switch(t.content){case"ELSE":if("IF"!==e)throw d('"ELSE" does not have any matching "IF".',t);return!0;case"ENDIF":if("IF"!==e&&"else"!==e)throw d('"ENDIF" does not have any matching "IF".',t);return!0;case"NEXT":if("FOR"!==e)throw d('"NEXT" does not have any matching "FOR".',t);return!0;case"UNTIL":if("REPEAT"!==e)throw d('"UNTIL" does not have any matching "REPEAT".',t);return!0;case"ENDWHILE":if("WHILE"!==e)throw d('"ENDWHILE" does not have any matching "WHILE".',t);return!0;default:return!1}},et=(e,t,a)=>{const o=["begin","do",".","repeat",";","then"],n=["else","end",";","until"];let r;switch(e.lexemes[t].type){case"turtle":case"identifier":if(e.lexemes[t+1]&&"="===e.lexemes[t+1].content)throw d('Variable assignment in Pascal uses ":=", not "=".',e.lexemes[t+1]);if(e.lexemes[t+1]&&":="===e.lexemes[t+1].content){r=Q(e,e.lexemes[t].content,t+2,"Pascal");break}r=_(e,t,"Pascal");break;case"keyword":switch(e.lexemes[t].content){case"if":r=tt(e,t+1,a);break;case"for":r=at(e,t+1,a);break;case"repeat":r=ot(e,t+1,a);break;case"while":r=nt(e,t+1,a);break;default:throw d("Command cannot begin with {lex}.",e.lexemes[t])}break;default:throw d("Command cannot begin with {lex}.",e.lexemes[t])}if(e.lexemes[r.lex])if(";"!==e.lexemes[r.lex].content){if(-1===o.indexOf(e.lexemes[r.lex-1].content)&&-1===n.indexOf(e.lexemes[r.lex].content))throw d("Semicolon needed after command.",e.lexemes[r.lex])}else for(;e.lexemes[r.lex]&&";"===e.lexemes[r.lex].content;)r.lex+=1;return r},tt=(e,t,a)=>{let o,n,r,c;if(!e.lexemes[t])throw d('"IF" must be followed by a boolean expression.',e.lexemes[t-1]);if(t=(c=V(e,t,"null","boolean","Pascal")).lex,o=c.pcode[0],!e.lexemes[t])throw d('"IF ..." must be followed by "THEN".',e.lexemes[t-1]);if("then"!==e.lexemes[t].content)throw d('"IF ..." must be followed by "THEN".',e.lexemes[t]);if(t+=1,!e.lexemes[t])throw d('No commands found after "IF".',e.lexemes[t]);if(t=(c="begin"===e.lexemes[t].content?rt(e,t+1,a+1,"begin"):et(e,t,a+1)).lex,n=c.pcode,"else"===e.lexemes[t].content){if(t+=1,!e.lexemes[t])throw d('No commands found after "ELSE".',e.lexemes[t]);t=(c="begin"===e.lexemes[t].content?rt(e,t+1,a+n.length+2,"begin"):et(e,t,a+n.length+2)).lex,r=c.pcode}return{lex:t,pcode:L(a,o,n,r)}},at=(e,t,a)=>{let o,n,r,c,s,i,l;if(!e.lexemes[t])throw d('"FOR" must be followed by an integer variable.',e.lexemes[t-1]);if("turtle"===e.lexemes[t].type)throw d('Turtle attribute cannot be used as a "FOR" variable.',e.lexemes[t]);if("identifier"!==e.lexemes[t].type)throw d('"FOR" must be followed by an integer variable.',e.lexemes[t]);if(!(o=w(e,e.lexemes[t].content)))throw d("Variable {lex} has not been declared.",e.lexemes[t]);if("integer"!==o.fulltype.type)throw d("{lex} is not an integer variable.",e.lexemes[t]);if(t+=1,!e.lexemes[t])throw d('"FOR" loop variable must be assigned an initial value.',e.lexemes[t-1]);if("="===e.lexemes[t].content)throw d('Assignment operator is ":=", not "=".',e.lexemes[t]);if(":="!==e.lexemes[t].content)throw d('"FOR" loop variable must be assigned an initial value.',e.lexemes[t]);if(t+=1,!e.lexemes[t])throw d('"FOR" loop variable must be assigned an initial value.',e.lexemes[t-1]);if(t=(l=V(e,t,"null","integer","Pascal")).lex,n=l.pcode[0],!e.lexemes[t])throw d('"FOR ... := ..." must be followed by "TO" or "DOWNTO".',e.lexemes[t-1]);switch(e.lexemes[t].content){case"to":c="mreq",s="incr";break;case"downto":c="lseq",s="decr";break;default:throw d('"FOR ... := ..." must be followed by "TO" or "DOWNTO".',e.lexemes[t])}if(t+=1,!e.lexemes[t])throw d('"TO" or "DOWNTO" must be followed by an integer (or integer constant).',e.lexemes[t-1]);if(t=(l=V(e,t,"null","integer","Pascal")).lex,r=l.pcode[0],!e.lexemes[t])throw d('"FOR" loop range must be followed by "DO".',e.lexemes[t-1]);if("do"!==e.lexemes[t].content)throw d('"FOR" loop range must be followed by "DO".',e.lexemes[t]);if(t+=1,!e.lexemes[t])throw d('No commands found after "FOR" loop initialisation.',e.lexemes[t-1]);return t=(l="begin"===e.lexemes[t].content?rt(e,t+1,a+3,"begin"):et(e,t,a+3)).lex,i=l.pcode,{lex:t,pcode:B(a,o,n,r,c,s,i)}},ot=(e,t,a)=>{let o,n,r;if(t=(r=rt(e,t,a,"repeat")).lex,n=r.pcode,!e.lexemes[t])throw d('"UNTIL" must be followed by a boolean expression.',e.lexemes[t-1]);return t=(r=V(e,t,"null","boolean",!1)).lex,o=r.pcode[0],{lex:t,pcode:N(a,o,n)}},nt=(e,t,a)=>{let o,n,r;if(!e.lexemes[t])throw d('"WHILE" must be followed by a boolean expression.',e.lexemes[t-1]);if(t=(r=V(e,t,"null","boolean",!1)).lex,o=r.pcode[0],!e.lexemes[t])throw d('"WHILE ..." must be followed by "DO".',e.lexemes[t-1]);if("do"!==e.lexemes[t].content)throw d('"WHILE ..." must be followed by "DO".',e.lexemes[t]);if(t+=1,!e.lexemes[t])throw d('No commands found after "WHILE" loop initialisation.',e.lexemes[t]);return t=(r="begin"===e.lexemes[t].content?rt(e,t+1,a+1,"begin"):et(e,t,a+1)).lex,n=r.pcode,{lex:t,pcode:q(a,o,n)}},rt=(e,t,a,o)=>{let n,r=[],c=!1;if(!e.lexemes[t])throw d('No commands found after "BEGIN".',e.lexemes[t-1]);for(;!c&&t<e.lexemes.length;)(c=ct(o,e.lexemes[t]))?t+=1:(n=r,({lex:t,pcode:r}=et(e,t,a+r.length)),r=n.concat(r));if(!c)throw d('"BEGIN" does not have any matching "END".',e.lexemes[t-1]);return{lex:t,pcode:r}},ct=(e,t)=>{switch(t.content){case"end":if("begin"!==e)throw d('"END" does not have any matching "BEGIN".',t);return!0;case"until":if("repeat"!==e)throw d('"UNTIL" does not have any matching "REPEAT".',t);return!0;default:return!1}},st=(e,t,a)=>{let o;switch(e.lexemes[t].type){case"turtle":case"identifier":if(e.lexemes[t+1]&&"=="===e.lexemes[t+1].content)throw d('Variable assignment in Python uses "=", not "==".',e.lexemes[t+1]);if(e.lexemes[t+1]&&"="===e.lexemes[t+1].content){o=Q(e,e.lexemes[t].content,t+2,"Python");break}o=_(e,t,"Python");break;case"keyword":switch(e.lexemes[t].content){case"return":o=Q(e,"return",t+1,"Python");break;case"if":o=it(e,t+1,a);break;case"for":o=lt(e,t+1,a);break;case"while":o=dt(e,t+1,a);break;default:throw d("{lex} makes no sense here.",e.lexemes[t])}break;default:throw d("{lex} makes no sense here.",e.lexemes[t])}if(e.lexemes[o.lex]&&e.lexemes[o.lex].line===e.lexemes[o.lex-1].line)throw d("Command must be on a new line.",e.lexemes[o.lex]);return o},it=(e,t,a)=>{let o,n,r,c;if(!e.lexemes[t])throw d("if01",e.lexemes[t-1]);if(!ut(e.lexemes,t))throw d("if02",e.lexemes[t]);if(t=(c=V(e,t,"null","boolean","Python")).lex,o=c.pcode[0],!e.lexemes[t])throw d("if03",e.lexemes[t-1]);if(!pt(e.lexemes,t,":"))throw d("if04",e.lexemes[t]);if(t+=1,!e.lexemes[t])throw d("if05",e.lexemes[t-1]);if(ut(e.lexemes,t))throw d("if06",e.lexemes[t]);if(!bt(e.lexemes,t))throw d("if07",e.lexemes[t]);if(t=(c=mt(e,t,a+1,e.lexemes[t].offset)).lex,n=c.pcode,e.lexemes[t]&&"else"===e.lexemes[t].content){if(ut(e.lexemes,t))throw d("if08",e.lexemes[t]);if(t+=1,!e.lexemes[t])throw d("if09",e.lexemes[t-1]);if(!pt(e.lexemes,t,":"))throw d("if10",e.lexemes[t]);if(t+=1,!e.lexemes[t])throw d("if11",e.lexemes[t-1]);if(ut(e.lexemes,t))throw d("if12",e.lexemes[t]);if(!bt(e.lexemes,t))throw d("if13",e.lexemes[t]);t=(c=mt(e,t,a+n.length+2,e.lexemes[t].offset)).lex,r=c.pcode}return{lex:t,pcode:L(a,o,n,r)}},lt=(e,t,a)=>{let o,n,r,c,s,i,l;if(!e.lexemes[t])throw d("for01",e.lexemes[t-1]);if("turtle"===e.lexemes[t].type)throw d("for02",e.lexemes[t]);if(!ht(e.lexemes,t,"identifier"))throw d("for03",e.lexemes[t]);if(!(o=w(e,e.lexemes[t].content,"Python")))throw d("for04",e.lexemes[t]);if("integer"!==o.fulltype.type&&"boolint"!==o.fulltype.type)throw d("for05",e.lexemes[t]);if(t+=1,!e.lexemes[t])throw d("for06",e.lexemes[t-1]);if(!pt(e.lexemes,t,"in"))throw d("for07",e.lexemes[t]);if(t+=1,!e.lexemes[t])throw d("for08",e.lexemes[t-1]);if(!pt(e.lexemes,t,"range"))throw d("for09",e.lexemes[t]);if(t+=1,!e.lexemes[t])throw d("for10",e.lexemes[t-1]);if(!pt(e.lexemes,t,"("))throw d("for11",e.lexemes[t]);if(t+=1,!e.lexemes[t])throw d("for12",e.lexemes[t-1]);if(!ut(e.lexemes,t))throw d("for13",e.lexemes[t]);if(t=(l=V(e,t,"null","integer","Python")).lex,n=l.pcode[0],!e.lexemes[t])throw d("for14",e.lexemes[t-1]);if(!pt(e.lexemes,t,","))throw d("for15",e.lexemes[t]);if(t+=1,!e.lexemes[t])throw d("for16",e.lexemes[t-1]);if(!ut(e.lexemes,t))throw d("for17",e.lexemes[t]);if(t=(l=V(e,t,"null","integer","Python")).lex,r=l.pcode[0],!e.lexemes[t])throw d("for18",e.lexemes[t-1]);if(!pt(e.lexemes,t,","))throw d("for19",e.lexemes[t]);if(t+=1,!e.lexemes[t])throw d("for20",e.lexemes[t-1]);if(!ut(e.lexemes,t))throw d("for21",e.lexemes[t]);if("integer"===e.lexemes[t].type){if(1!==e.lexemes[t].value)throw d("for22",e.lexemes[t]);c="more",s="incr"}else{if("-"!==e.lexemes[t].content)throw d("for26",e.lexemes[t]);if(t+=1,!e.lexemes[t])throw d("for23",e.lexemes[t-1]);if(!ht(e.lexemes,t,"integer"))throw d("for24",e.lexemes[t]);if(1!==e.lexemes[t].value)throw d("for25",e.lexemes[t]);c="less",s="decr"}if(t+=1,!e.lexemes[t])throw d("for27",e.lexemes[t-1]);if(!pt(e.lexemes,t,")"))throw d("for28",e.lexemes[t]);if(t+=1,!e.lexemes[t])throw d("for29",e.lexemes[t-1]);if(!pt(e.lexemes,t,":"))throw d("for30",e.lexemes[t]);if(t+=1,!e.lexemes[t])throw d("for31",e.lexemes[t-1]);if(ut(e.lexemes,t))throw d("for32",e.lexemes[t]);if(!bt(e.lexemes,t))throw d("for33",e.lexemes[t]);return t=(l=mt(e,t,a+3,e.lexemes[t].offset)).lex,i=l.pcode,{lex:t,pcode:B(a,o,n,r,c,s,i)}},dt=(e,t,a)=>{let o,n,r;if(!e.lexemes[t])throw d("while01",e.lexemes[t-1]);if(!ut(e.lexemes,t))throw d("while02",e.lexemes[t]);if(t=(r=V(e,t,"null","boolean","Python")).lex,o=r.pcode[0],!e.lexemes[t])throw d("while03",e.lexemes[t-1]);if(!pt(e.lexemes,t,":"))throw d("while04",e.lexemes[t]);if(t+=1,!e.lexemes[t])throw d("while05",e.lexemes[t-1]);if(ut(e.lexemes,t))throw d("while06",e.lexemes[t]);if(!bt(e.lexemes,t))throw d("while07",e.lexemes[t]);return t=(r=mt(e,t,a+1,e.lexemes[t].offset)).lex,n=r.pcode,{lex:t,pcode:q(a,o,n)}},ut=(e,t)=>e[t].line===e[t-1].line,ht=(e,t,a)=>ut(e,t)&&e[t].type===a,pt=(e,t,a)=>ut(e,t)&&e[t].content===a,bt=(e,t)=>e[t].offset>e[t-1].offset,mt=(e,t,a,o)=>{let n,r=[],c=!1;if(!e.lexemes[t])throw d("blockNothing",e.lexemes[t-1]);for(;!c&&t<e.lexemes.length;)(c=e.lexemes[t].offset<o)||(n=r,({lex:t,pcode:r}=st(e,t,a+r.length)),r=n.concat(r));return{lex:t,pcode:r}};var gt=(e,t)=>{const a=e[0],o=e.slice(1).length>0?4:3,n=ft(e,o,t),r=o+n.length,c=yt(a,r,t);return((e,t,a)=>{const o=K(e),n=[[P.a.jump,o.length+t.length+2]],r=[[P.a.halt]];return t.length>1?o.concat(n).concat(t).concat(a).concat(r):o.concat(a).concat(r)})(e[0],n,c)};const ft=(e,t,a)=>{let o=[],n=1;for(;n<e.length;){e[n].startLine=t;const r=D(e[n]).length;let c=yt(e[n],t+r,a),s=M(e[n],c);o=o.concat(s),n+=1,t+=s.length}return o},yt=(e,t,a)=>{const o={BASIC:Ke,Pascal:et,Python:st};let n=[],r=0;for(;r<e.lexemes.length;){let c=o[a].call(null,e,r,t+n.length);n=n.concat(c.pcode),r=c.lex}return n};var wt=(e,t)=>{const a=((e,t)=>{const a=Object(u.a)(e,t),o=[],n=["BASIC","Pascal","Python"].indexOf(t);let r=0,c=1,s=!0,i=0;for(;r<a.length;){switch(a[r].type){case"linebreak":c+=1,s=!0,i=0;break;case"spaces":s&&(i=a[r].content.length),s=!1;break;case"comment":s=!1;break;case"unterminated-comment":throw d(h[0],p(a[r],c,i,t));case"unterminated-string":throw d(h[1],p(a[r],c,i,t));case"bad-binary":throw d(h[2+n],p(a[r],c,i,t));case"bad-octal":throw d(h[5+n],p(a[r],c,i,t));case"bad-hexadecimal":throw d(h[8+n],p(a[r],c,i,t));case"bad-decimal":throw d(h[11],p(a[r],c,i,t));case"illegal":throw d(h[12],p(a[r],c,i,t));default:s=!1,o.push(p(a[r],c,i,t))}r+=1}return o})(e,t),o=((e,t)=>{const a={BASIC:be,Pascal:ye,Python:Re};if(0===e.length)throw d("Program does not contain any lexemes.");const o=a[t](e),n=o[0],r=o.slice(1);if("Python"===t){Ge(o,0),o.length>1&&He(o,o.length-1);const e=ze(o);if(e)throw d("Could not detetermine type of variable {lex}.",e.lexeme)}return o.forEach(We),n.turtleAddress=Ye(r),o})(a,t);console.log(o);const n=gt(o,t);return console.log(n),{usage:((e,t,a)=>c.c.concat({title:"Subroutine calls",expressions:t}).map(l.bind(null,a,e)).filter(e=>e.expressions.length>0))(a,o.slice(1),t),pcode:n}};const Ot=(e,t)=>{qt.addEventListener(e,t)},xt=(e,t)=>{qt.removeEventListener(e,t)},vt=()=>qt.getBoundingClientRect(),jt=(e,t)=>{qt.width=e,qt.height=t},kt=e=>{const t=e<0||e>15?1:e;qt.style.cursor=n.b[t].css},Tt=(e,t,a,r)=>{Mt.textBaseline="top",Mt.fillStyle=Object(o.c)(e.c),Mt.font=`${r}pt ${n.d[15&a].css}`,(16&a)>0&&(Mt.font=`bold ${Mt.font}`),(32&a)>0&&(Mt.font=`italic ${Mt.font}`),Mt.fillText(t,e.x,e.y)},Pt=(e,t,a)=>{Mt.beginPath(),Mt.moveTo(e.x,e.y),Mt.lineTo(t,a),Mt.lineCap="round",Mt.lineWidth=e.t,Mt.strokeStyle=Object(o.c)(e.c),Mt.stroke()},St=(e,t,a)=>{Mt.beginPath(),t.forEach((e,t)=>{0===t?Mt.moveTo(e[0],e[1]):Mt.lineTo(e[0],e[1])}),a?(Mt.closePath(),Mt.fillStyle=Object(o.c)(e.c),Mt.fill()):(Mt.lineCap="round",Mt.lineWidth=e.t,Mt.strokeStyle=Object(o.c)(e.c),Mt.stroke())},$t=(e,t,a,n)=>{Mt.beginPath(),t===a?Mt.arc(e.x,e.y,t,0,2*Math.PI,!1):(Mt.save(),Mt.translate(e.x-t,e.y-a),Mt.scale(t,a),Mt.arc(1,1,1,0,2*Math.PI,!1),Mt.restore()),n?(Mt.fillStyle=Object(o.c)(e.c),Mt.fill()):(Mt.lineWidth=e.t,Mt.strokeStyle=Object(o.c)(e.c),Mt.stroke())},Ct=(e,t,a,n,r)=>{Mt.beginPath(),Mt.moveTo(e.x,e.y),Mt.lineTo(t,e.y),Mt.lineTo(t,a),Mt.lineTo(e.x,a),Mt.closePath(),Mt.fillStyle=Object(o.c)(n),Mt.fill(),r&&(Mt.lineCap="round",Mt.lineWidth=e.t,Mt.strokeStyle=Object(o.c)(e.c),Mt.stroke())},It=(e,t)=>{const a=Mt.getImageData(e,t,1,1);return 65536*a.data[0]+256*a.data[1]+a.data[2]},Et=(e,t,a,o)=>{const n=Mt.createImageData(1,1);n.data[0]=a>>16&255,n.data[1]=a>>8&255,n.data[2]=255&a,n.data[3]=255,Mt.putImageData(n,e,t),o&&(Mt.putImageData(n,e-1,t),Mt.putImageData(n,e,t-1),Mt.putImageData(n,e-1,t-1))},At=e=>{Mt.fillStyle=Object(o.c)(e),Mt.fillRect(0,0,qt.width,qt.height)},Rt=(e,t,a,o,n)=>{const r=Mt.getImageData(0,0,qt.width,qt.height),c=[],s=[0,-1,1,0],i=[-1,0,0,1];let l=0,d=4*(t*qt.width+e);const u=65536*r.data[d]+256*r.data[d+1]+r.data[d+2];let h,p,b,m,g,f,y=e,w=t;for(c.push(y),c.push(w);c.length>0;)for(w=c.pop(),y=c.pop(),l=0;l<4;l+=1)p=w+i[l],m=(h=y+s[l])>0&&h<=qt.width,g=p>0&&p<=qt.height,m&&g&&(d=4*(p*qt.width+h),b=65536*r.data[d],b+=256*r.data[d+1],m=(b+=r.data[d+2])!==a,g=b!==o||!n,m&&g&&(f=b===u||n)&&(d=4*(p*qt.width+h),r.data[d]=(16711680&a)>>16,r.data[d+1]=(65280&a)>>8,r.data[d+2]=255&a,c.push(h),c.push(p)));Mt.putImageData(r,0,0)},Lt=e=>{Ft.innerHTML+=e,Dt.innerHTML+=e},Bt=(e,t)=>{e&&(Ft.innerHTML=""),Ft.style.background=Object(o.c)(t)},Nt=(e,t)=>{e&&(Dt.innerHTML=""),Dt.style.background=Object(o.c)(t)};let qt,Mt,Dt,Ft;const Ut=(e,t)=>{Yt[e]=t},Gt=()=>Kt.running,Ht=()=>{return{stack:Xt.slice(0,aa.stackTop+1),heap:Xt.slice(aa.heapBase,aa.heapMax)}},zt=(e,t)=>{qt=document.querySelector(".tsx-canvas"),Mt=qt.getContext("2d"),Dt=document.querySelector(".tsx-console"),Ft=document.querySelector(".tsx-output"),jt(1e3,1e3),Nt(!0,16777215),Bt(!0,16777215),t.showCanvas&&Yt.show("canvas"),Xt.length=2097152,Vt.length=256,Qt.length=16,Xt.fill(0),Vt.fill(-1),Qt.fill(-1),_t.length=0,Zt.length=0,Jt.length=0,ea.length=0,ta.length=0,aa.stackTop=0,aa.heapGlobal=-1,aa.heapBase=t.stackSize-1,aa.heapTemp=aa.heapBase,aa.heapPerm=aa.heapTemp,aa.heapMax=aa.heapTemp,oa.startx=0,oa.starty=0,oa.sizex=1e3,oa.sizey=1e3,oa.width=1e3,oa.height=1e3,oa.degrees=360,oa.doubled=!1,na.startTime=Date.now(),na.pendown=!0,na.update=!0,na.keyecho=!0,na.input="",na.detect=null,na.readline=null,Kt.running=!0,Kt.paused=!1,window.addEventListener("keydown",ra),window.addEventListener("keyup",ca),window.addEventListener("keypress",sa),Ot("contextmenu",ua),Ot("mousemove",ia),Ot("touchmove",ua),Ot("touchmove",ia),Ot("mousedown",ua),Ot("mousedown",la),Ot("touchstart",la),Ot("mouseup",da),Ot("touchend",da),Yt.run(),ha(e,0,0,t)},Wt=()=>{window.removeEventListener("keydown",ra),window.removeEventListener("keyup",ca),window.removeEventListener("keypress",sa),xt("contextmenu",ua),xt("mousemove",ia),xt("touchmove",ua),xt("touchmove",ia),xt("mousedown",ua),xt("mousedown",la),xt("touchstart",la),xt("mouseup",da),xt("touchend",da),kt(1),Kt.running=!1,Kt.paused=!1,Yt.halt()},Yt={},Kt={running:!1,paused:!1},Xt=[],Vt=[],Qt=[],_t=[],Zt=[],Jt=[],ea=[],ta=[],aa={},oa={},na={},ra=e=>{const t=e.keyCode||e.charCode;if(8===t){e.preventDefault();const t=Xt[1],a=Xt[t+1],o=Xt[t+2];a<o&&(Xt[o]=0,Xt[t+2]-=1),na.input=na.input.slice(0,-1),na.keyecho&&(Dt.innerHTML=Dt.innerHTML.slice(0,-1))}t>=37&&t<=40&&e.preventDefault(),Qt[9]=t,Qt[10]=128,e.shiftKey&&(Qt[10]+=8),e.altKey&&(Qt[10]+=16),e.ctrlKey&&(Qt[10]+=32),Vt[t]=Qt[10]},ca=e=>{const t=e.keyCode||e.charCode;Qt[9]=-Qt[9],Qt[10]=-Qt[10],Vt[t]=-Vt[t]},sa=e=>{const t=e.keyCode||e.charCode,a=Xt[1];if(a>0){let e=0;(e=Xt[a+2]===Xt[a]?a+3:Xt[a+2]+1)!==Xt[a+1]&&(Xt[Xt[a+2]]=t,Xt[a+2]=e)}na.keyecho&&(e=>{Dt.innerHTML+=e})(String.fromCharCode(t))},ia=e=>{switch(e.type){case"mousemove":Qt[7]=Ta(e.clientX),Qt[8]=Pa(e.clientY);break;case"touchmove":case"touchstart":Qt[7]=Ta(e.touches[0].clientX),Qt[8]=Pa(e.touches[0].clientY)}},la=e=>{const t=Date.now();switch(Qt[4]=128,e.shiftKey&&(Qt[4]+=8),e.altKey&&(Qt[4]+=16),e.ctrlKey&&(Qt[4]+=32),t-Qt[11]<300&&(Qt[4]+=64),Qt[11]=t,e.type){case"mousedown":switch(Qt[5]=Ta(e.clientX),Qt[6]=Pa(e.clientY),e.button){case 0:Qt[4]+=1,Qt[1]=Qt[4],Qt[2]=-1,Qt[3]=-1;break;case 1:Qt[4]+=4,Qt[1]=-1,Qt[2]=-1,Qt[3]=Qt[4];break;case 2:Qt[4]+=2,Qt[1]=-1,Qt[2]=Qt[4],Qt[3]=-1}break;case"touchstart":Qt[5]=Ta(e.touches[0].clientX),Qt[6]=Pa(e.touches[0].clientY),Qt[4]+=1,Qt[1]=Qt[4],Qt[2]=-1,Qt[3]=-1,ia(e)}},da=e=>{switch(Qt[4]=-Qt[4],e.type){case"mouseup":switch(e.button){case 0:Qt[1]=-Qt[1];break;case 1:Qt[2]=-Qt[3];break;case 2:Qt[2]=-Qt[2]}break;case"touchend":Qt[1]=-Qt[1]}},ua=e=>{e.preventDefault()},ha=(e,t,a,o)=>{if(!Kt.running)return;if(Kt.paused)return void setTimeout(ha,1,e,t,a,o);window.removeEventListener("keypress",na.detect),window.removeEventListener("keypress",na.readline);let r,c,s,i,l=0,d=0;for(;l<o.drawCountMax&&d<=o.codeCountMax;){switch(e[t][a]){case P.a.dupl:r=Zt.pop(),Zt.push(r,r);break;case P.a.swap:c=Zt.pop(),r=Zt.pop(),Zt.push(c,r);break;case P.a.rota:s=Zt.pop(),c=Zt.pop(),r=Zt.pop(),Zt.push(c,s,r);break;case P.a.incr:r=Zt.pop(),Zt.push(r+1);break;case P.a.decr:r=Zt.pop(),Zt.push(r-1);break;case P.a.not:r=Zt.pop(),Zt.push(~r);break;case P.a.and:c=Zt.pop(),r=Zt.pop(),Zt.push(r&c);break;case P.a.or:c=Zt.pop(),r=Zt.pop(),Zt.push(r|c);break;case P.a.xor:c=Zt.pop(),r=Zt.pop(),Zt.push(r^c);break;case P.a.neg:r=Zt.pop(),Zt.push(-r);break;case P.a.abs:r=Zt.pop(),Zt.push(Math.abs(r));break;case P.a.sign:r=Zt.pop(),Zt.push(Math.sign(r));break;case P.a.rand:r=Zt.pop(),Zt.push(Math.floor(Math.random()*Math.abs(r)));break;case P.a.plus:c=Zt.pop(),r=Zt.pop(),Zt.push(r+c);break;case P.a.subt:c=Zt.pop(),r=Zt.pop(),Zt.push(r-c);break;case P.a.mult:c=Zt.pop(),r=Zt.pop(),Zt.push(r*c);break;case P.a.divr:c=Zt.pop(),r=Zt.pop(),Zt.push(Math.round(r/c));break;case P.a.div:c=Zt.pop(),r=Zt.pop(),Zt.push(Math.floor(r/c));break;case P.a.mod:c=Zt.pop(),r=Zt.pop(),Zt.push(r%c);break;case P.a.divm:s=Zt.pop(),c=Zt.pop(),r=Zt.pop(),Zt.push(Math.round(r/c*s));break;case P.a.sqrt:c=Zt.pop(),r=Zt.pop(),Zt.push(Math.round(Math.sqrt(r)*c));break;case P.a.hyp:s=Zt.pop(),c=Zt.pop(),r=Zt.pop(),Zt.push(Math.round(Math.sqrt(r*r+c*c)*s));break;case P.a.root:i=Zt.pop(),s=Zt.pop(),c=Zt.pop(),r=Zt.pop(),Zt.push(Math.round(Math.pow(r/c,1/s)*i));break;case P.a.powr:i=Zt.pop(),s=Zt.pop(),c=Zt.pop(),r=Zt.pop(),Zt.push(Math.round(Math.pow(r/c,s)*i));break;case P.a.log:s=Zt.pop(),c=Zt.pop(),r=Zt.pop(),Zt.push(Math.round(Math.log(r/c)/Math.LN10*s));break;case P.a.alog:s=Zt.pop(),c=Zt.pop(),r=Zt.pop(),Zt.push(Math.round(Math.pow(10,r/c)*s));break;case P.a.ln:s=Zt.pop(),c=Zt.pop(),r=Zt.pop(),Zt.push(Math.round(Math.log(r/c)*s));break;case P.a.exp:s=Zt.pop(),c=Zt.pop(),r=Zt.pop(),Zt.push(Math.round(Math.exp(r/c)*s));break;case P.a.sin:i=Zt.pop(),s=Zt.pop(),r=(c=Zt.pop())/s*(2*Math.PI)/oa.degrees,Zt.push(Math.round(Math.sin(r)*i));break;case P.a.cos:i=Zt.pop(),s=Zt.pop(),r=(c=Zt.pop())/s*(2*Math.PI)/oa.degrees,Zt.push(Math.round(Math.cos(r)*i));break;case P.a.tan:i=Zt.pop(),s=Zt.pop(),r=(c=Zt.pop())/s*(2*Math.PI)/oa.degrees,Zt.push(Math.round(Math.tan(r)*i));break;case P.a.asin:i=Zt.pop(),s=Zt.pop(),c=Zt.pop(),r=oa.degrees/(2*Math.PI),Zt.push(Math.round(Math.asin(c/s)*i*r));break;case P.a.acos:i=Zt.pop(),s=Zt.pop(),c=Zt.pop(),r=oa.degrees/(2*Math.PI),Zt.push(Math.round(Math.acos(c/s)*i*r));break;case P.a.atan:i=Zt.pop(),s=Zt.pop(),c=Zt.pop(),r=oa.degrees/(2*Math.PI),Zt.push(Math.round(Math.atan2(c,s)*i*r));break;case P.a.pi:r=Zt.pop(),Zt.push(Math.round(Math.PI*r));break;case P.a.ctos:r=Zt.pop(),ba(String.fromCharCode(r));break;case P.a.itos:r=Zt.pop(),ba(r.toString());break;case P.a.hexs:for(c=Zt.pop(),r=Zt.pop().toString(16).toUpperCase();r.length<c;)r="0"+r;ba(r);break;case P.a.sval:s=Zt.pop(),c=Zt.pop(),r=ma(c),i="#"===r[0]?isNaN(parseInt(r.slice(1),16))?s:parseInt(r.slice(1),16):isNaN(parseInt(r,10))?s:parseInt(r,10),Zt.push(i);break;case P.a.qtos:i=Zt.pop(),s=Zt.pop(),c=Zt.pop(),ba((r=c/s).toFixed(i));break;case P.a.qval:s=Zt.pop(),c=Zt.pop(),r=ma(Zt.pop()),i=isNaN(parseFloat(r))?s:parseFloat(r),Zt.push(Math.round(i*c));break;case P.a.scat:c=ma(Zt.pop()),r=ma(Zt.pop()),ba(r+c);break;case P.a.slen:r=ma(Zt.pop()),Zt.push(r.length);break;case P.a.case:c=Zt.pop(),r=ma(Zt.pop()),ba(c>0?r.toUpperCase():c<0?r.toLowerCase():r);break;case P.a.copy:s=Zt.pop(),c=Zt.pop(),r=ma(Zt.pop()),ba(r.substr(c-1,s));break;case P.a.dels:i=Zt.pop(),s=Zt.pop(),r=(c=ma(Zt.pop())).substr(0,s-1)+c.substr(s-1+i),ba(r);break;case P.a.inss:i=Zt.pop(),s=ma(Zt.pop()),c=ma(Zt.pop()),r=s.substr(0,i-1)+c+s.substr(i-1),ba(r);break;case P.a.poss:c=ma(Zt.pop()),r=ma(Zt.pop()),Zt.push(c.indexOf(r)+1);break;case P.a.repl:if(i=Zt.pop(),s=ma(Zt.pop()),c=ma(Zt.pop()),r=ma(Zt.pop()),i>0){for(;i>0;)r=r.replace(c,s),i-=1;ba(r)}else ba(r.replace(new RegExp(c,"g"),s));break;case P.a.eqal:c=Zt.pop(),r=Zt.pop(),Zt.push(r===c?-1:0);break;case P.a.noeq:c=Zt.pop(),r=Zt.pop(),Zt.push(r!==c?-1:0);break;case P.a.less:c=Zt.pop(),r=Zt.pop(),Zt.push(r<c?-1:0);break;case P.a.more:c=Zt.pop(),r=Zt.pop(),Zt.push(r>c?-1:0);break;case P.a.lseq:c=Zt.pop(),r=Zt.pop(),Zt.push(r<=c?-1:0);break;case P.a.mreq:c=Zt.pop(),r=Zt.pop(),Zt.push(r>=c?-1:0);break;case P.a.maxi:c=Zt.pop(),r=Zt.pop(),Zt.push(Math.max(r,c));break;case P.a.mini:c=Zt.pop(),r=Zt.pop(),Zt.push(Math.min(r,c));break;case P.a.seql:c=ma(Zt.pop()),r=ma(Zt.pop()),Zt.push(r===c?-1:0);break;case P.a.sneq:c=ma(Zt.pop()),r=ma(Zt.pop()),Zt.push(r!==c?-1:0);break;case P.a.sles:c=ma(Zt.pop()),r=ma(Zt.pop()),Zt.push(r<c?-1:0);break;case P.a.smor:c=ma(Zt.pop()),r=ma(Zt.pop()),Zt.push(r>c?-1:0);break;case P.a.sleq:c=ma(Zt.pop()),r=ma(Zt.pop()),Zt.push(r<=c?-1:0);break;case P.a.smeq:c=ma(Zt.pop()),r=ma(Zt.pop()),Zt.push(r>=c?-1:0);break;case P.a.smax:c=ma(Zt.pop()),r=ma(Zt.pop()),ba(Math.max(r,c));break;case P.a.smin:c=ma(Zt.pop()),r=ma(Zt.pop()),ba(Math.min(r,c));break;case P.a.ldin:r=e[t][a+1],Zt.push(r),a+=1;break;case P.a.ldvg:r=e[t][a+1],Zt.push(Xt[r]),a+=1;break;case P.a.ldvv:r=e[t][a+1],c=e[t][a+2],Zt.push(Xt[Xt[r]+c]),a+=2;break;case P.a.ldvr:r=e[t][a+1],c=e[t][a+2],Zt.push(Xt[Xt[Xt[r]+c]]),a+=2;break;case P.a.ldag:r=e[t][a+1],Zt.push(r),a+=1;break;case P.a.ldav:r=e[t][a+1],c=e[t][a+2],Zt.push(Xt[r]+c),a+=2;break;case P.a.lstr:for(c=(a+=1)+(r=e[t][a]),s="";a<c;)a+=1,s+=String.fromCharCode(e[t][a]);ba(s);break;case P.a.ldmt:Zt.push(Jt.length-1);break;case P.a.zero:r=e[t][a+1],c=e[t][a+2],Xt[Xt[r]+c]=0,a+=2;break;case P.a.stvg:r=Zt.pop(),Xt[e[t][a+1]]=r,a+=1;break;case P.a.stvv:r=e[t][a+1],c=e[t][a+2],s=Zt.pop(),Xt[Xt[r]+c]=s,a+=2;break;case P.a.stvr:r=e[t][a+1],c=e[t][a+2],s=Zt.pop(),Xt[Xt[Xt[r]+c]]=s,a+=2;break;case P.a.stmt:r=Zt.pop(),Jt.push(r),aa.stackTop=Math.max(r,aa.stackTop);break;case P.a.lptr:r=Zt.pop(),Zt.push(Xt[r]);break;case P.a.sptr:c=Zt.pop(),r=Zt.pop(),Xt[c]=r;break;case P.a.cptr:s=Zt.pop(),c=Zt.pop(),r=Zt.pop(),fa(r,c,s);break;case P.a.zptr:c=Zt.pop(),r=Zt.pop(),ga(r,c);break;case P.a.test:break;case P.a.cstr:c=Zt.pop(),r=Zt.pop(),i=Xt[c-1],s=Xt[r],fa(r,c,Math.min(s,i)+1);break;case P.a.jump:t=e[t][a+1]-1,a=-1;break;case P.a.ifno:0===Zt.pop()?(t=e[t][a+1]-1,a=-1):a+=1;break;case P.a.halt:return void Wt();case P.a.subr:-1===aa.heapGlobal&&(aa.heapGlobal=aa.heapPerm),ea.push(t+1),t=e[t][a+1]-1,a=-1;break;case P.a.retn:t=ea.pop(),a=-1;break;case P.a.pssr:ta.push(e[t][a+1]),a+=1;break;case P.a.plsr:ta.pop();break;case P.a.psrj:Zt.push(t+1);break;case P.a.plrj:ea.pop(),t=Zt.pop()-1,a=-1;break;case P.a.memc:if(r=e[t][a+1],c=e[t][a+2],(s=Jt.pop())+c>o.stackSize)throw Wt(),pa("Memory stack has overflowed into memory heap. Probable cause is unterminated recursion.");Jt.push(Xt[r]),aa.stackTop=Math.max(Xt[r],aa.stackTop),Xt[r]=s,Jt.push(s+c),aa.stackTop=Math.max(s+c,aa.stackTop),a+=2;break;case P.a.memr:Jt.pop(),r=e[t][a+1],c=Jt.pop(),Jt.push(Xt[r]),aa.stackTop=Math.max(Xt[r],aa.stackTop),Xt[r]=c,a+=2;break;case P.a.hfix:aa.heapPerm=aa.heapTemp;break;case P.a.hclr:aa.heapTemp=aa.heapPerm;break;case P.a.hrst:aa.heapGlobal>-1&&(aa.heapTemp=aa.heapGlobal,aa.heapPerm=aa.heapGlobal);break;case P.a.pnup:na.pendown=!1;break;case P.a.pndn:na.pendown=!0;break;case P.a.udat:na.update=!0,l=o.drawCountMax;break;case P.a.ndat:na.update=!1;break;case P.a.kech:r=-1===Zt.pop(),na.keyecho=r;break;case P.a.outp:s=-1===Zt.pop(),c=Zt.pop(),r=-1===Zt.pop(),Bt(r,c),s?Yt.show("output"):Yt.show("canvas");break;case P.a.cons:c=Zt.pop(),r=-1===Zt.pop(),Nt(r,c);break;case P.a.trac:case P.a.memw:Zt.pop();break;case P.a.dump:Yt.dump(Ht()),o.showMemory&&Yt.show("memory");break;case P.a.time:r=Date.now(),r-=na.startTime,Zt.push(r);break;case P.a.tset:r=Date.now(),c=Zt.pop(),na.startTime=r-c;break;case P.a.wait:return r=Zt.pop(),(a+=1)===e[t].length&&(t+=1,a=0),void setTimeout(ha,r,e,t,a,o);case P.a.tdet:return c=Zt.pop(),r=Zt.pop(),Zt.push(0),(a+=1)===e[t].length&&(t+=1,a=0),s=setTimeout(ha,r,e,t,a,o),na.detect=ya.bind(null,c,s,e,t,a,o),void window.addEventListener("keyup",na.detect);case P.a.inpt:(r=Zt.pop())<0?Zt.push(Qt[-r]):Zt.push(Vt[r]);break;case P.a.iclr:(r=Zt.pop())<0?Qt[-r]=-1:Vt[r]=-1;break;case P.a.bufr:(r=Zt.pop())>0&&(c=aa.heapTemp+4,Zt.push(aa.heapTemp+1),Xt[aa.heapTemp+1]=c+r,Xt[aa.heapTemp+2]=c,Xt[aa.heapTemp+3]=c,Xt.fill(0,c,c+r),aa.heapTemp=c+r,aa.heapMax=Math.max(aa.heapTemp,aa.heapMax));break;case P.a.read:r=Zt.pop(),c=Xt[1],s="",i="";let d=!1;for(;r>0&&!d;)Xt[c+1]===Xt[c+2]?d=!0:(i=Xt[Xt[c+1]],s+=String.fromCharChode(i),Xt[c+1]+=1),r-=1;ba(s);break;case P.a.rdln:return r=Math.pow(2,31)-1,(a+=1)===e[t].length&&(t+=1,a=0),c=setTimeout(ha,r,e,t,a,o),na.readline=wa.bind(null,c,e,t,a,o),void window.addEventListener("keypress",na.readline);case P.a.prnt:s=Zt.pop(),c=Zt.pop(),r=ma(Zt.pop()),Tt(Oa(),r,c,s);break;case P.a.text:r=ma(Zt.pop()),Lt(r),o.showOutput&&Yt.show("output");break;case P.a.newl:Lt("\n");break;case P.a.fdir:case P.a.open:case P.a.clos:case P.a.fptr:case P.a.fbeg:case P.a.eof:case P.a.frds:case P.a.frln:case P.a.fwrs:case P.a.fwnl:break;case P.a.canv:oa.sizey=Zt.pop(),oa.sizex=Zt.pop(),oa.starty=Zt.pop(),oa.startx=Zt.pop(),Xt[Xt[0]+1]=Math.round(oa.startx+oa.sizex/2),Xt[Xt[0]+2]=Math.round(oa.starty+oa.sizey/2),Xt[Xt[0]+3]=0,Yt.turtx(Xt[Xt[0]+1]),Yt.turty(Xt[Xt[0]+2]),Yt.turtd(Xt[Xt[0]+3]),_t.push([Xt[Xt[0]+1],Xt[Xt[0]+2]]),l=o.drawCountMax;break;case P.a.reso:c=Zt.pop(),r=Zt.pop(),Math.min(r,c)<o.smallSize&&(r*=2,c*=2,oa.doubled=!0),oa.width=r,oa.height=c,jt(r,c),At(16777215),l=o.drawCountMax;break;case P.a.pixc:c=Zt.pop(),r=Zt.pop(),Zt.push(It(xa(r),va(c)));break;case P.a.pixs:s=Zt.pop(),c=Zt.pop(),r=Zt.pop(),Et(xa(r),va(c),s,oa.doubled),na.update&&(l+=1);break;case P.a.angl:r=Zt.pop(),c=Math.round(r+Xt[Xt[0]+3]*r/oa.degrees),Xt[Xt[0]+3]=c%r,Yt.turtd(Xt[Xt[0]+3]),oa.degrees=r;break;case P.a.curs:r=Zt.pop(),kt(r);break;case P.a.home:r=oa.startx+oa.sizex/2,c=oa.starty+oa.sizey/2,Xt[Xt[0]+1]=Math.round(r),Xt[Xt[0]+2]=Math.round(c),Xt[Xt[0]+3]=0,Yt.turtx(Xt[Xt[0]+1]),Yt.turty(Xt[Xt[0]+2]),Yt.turtd(Xt[Xt[0]+3]),_t.push([Xt[Xt[0]+1],Xt[Xt[0]+2]]);break;case P.a.setx:r=Zt.pop(),Xt[Xt[0]+1]=r,Yt.turtx(r),_t.push([Xt[Xt[0]+1],Xt[Xt[0]+2]]);break;case P.a.sety:r=Zt.pop(),Xt[Xt[0]+2]=r,Yt.turty(r),_t.push([Xt[Xt[0]+1],Xt[Xt[0]+2]]);break;case P.a.setd:r=Zt.pop()%oa.degrees,Xt[Xt[0]+3]=r,Yt.turtd(r);break;case P.a.thik:r=Zt.pop(),Xt[Xt[0]+4]=r,Yt.turtt(r);break;case P.a.colr:r=Zt.pop(),Xt[Xt[0]+5]=r,Yt.turtc(r);break;case P.a.rgb:r=Zt.pop(),(r%=50)<=0&&(r+=50),r=n.a[r-1].value,Zt.push(r);break;case P.a.mixc:i=Zt.pop(),s=Zt.pop(),c=Zt.pop();const u=(e,t)=>Math.round((e*s+t*i)/(s+i)),h=e=>Math.floor(e/65536),p=e=>Math.floor((65280&e)/256),b=e=>255&e,m=u(h(r=Zt.pop()),h(c)),g=u(p(r),p(c)),f=u(b(r),b(c));Zt.push(65536*m+256*g+f);break;case P.a.toxy:c=Zt.pop(),r=Zt.pop(),Xt[Xt[0]+1]=r,Xt[Xt[0]+2]=c,Yt.turtx(r),Yt.turty(c),_t.push([r,c]);break;case P.a.mvxy:c=Zt.pop()+Xt[Xt[0]+2],r=Zt.pop()+Xt[Xt[0]+1],Xt[Xt[0]+1]=r,Xt[Xt[0]+2]=c,Yt.turtx(r),Yt.turty(c),_t.push([r,c]);break;case P.a.drxy:c=Zt.pop()+Xt[Xt[0]+2],r=Zt.pop()+Xt[Xt[0]+1],na.pendown&&(Pt(Oa(),xa(r),va(c)),na.update&&(l+=1)),Xt[Xt[0]+1]=r,Xt[Xt[0]+2]=c,Yt.turtx(r),Yt.turty(c),_t.push([r,c]);break;case P.a.fwrd:s=Zt.pop(),c=Xt[Xt[0]+3],c=Math.cos(c*Math.PI/(oa.degrees/2)),c=-Math.round(c*s),c+=Xt[Xt[0]+2],r=Xt[Xt[0]+3],r=Math.sin(r*Math.PI/(oa.degrees/2)),r=Math.round(r*s),r+=Xt[Xt[0]+1],na.pendown&&(Pt(Oa(),xa(r),va(c)),na.update&&(l+=1)),Xt[Xt[0]+1]=r,Xt[Xt[0]+2]=c,Yt.turtx(r),Yt.turty(c),_t.push([r,c]);break;case P.a.back:s=Zt.pop(),c=Xt[Xt[0]+3],c=Math.cos(c*Math.PI/(oa.degrees/2)),c=Math.round(c*s),c+=Xt[Xt[0]+2],r=Xt[Xt[0]+3],r=Math.sin(r*Math.PI/(oa.degrees/2)),r=-Math.round(r*s),r+=Xt[Xt[0]+1],na.pendown&&(Pt(Oa(),xa(r),va(c)),na.update&&(l+=1)),Xt[Xt[0]+1]=r,Xt[Xt[0]+2]=c,Yt.turtx(r),Yt.turty(c),_t.push([r,c]);break;case P.a.left:r=(Xt[Xt[0]+3]-Zt.pop())%oa.degrees,Xt[Xt[0]+3]=r,Yt.turtd(r);break;case P.a.rght:r=(Xt[Xt[0]+3]+Zt.pop())%oa.degrees,Xt[Xt[0]+3]=r,Yt.turtd(r);break;case P.a.turn:c=Zt.pop(),r=Zt.pop(),Math.abs(c)>=Math.abs(r)?(s=Math.atan(-r/c),c>0?s+=Math.PI:r<0&&(s+=2,s*=Math.PI)):(s=Math.atan(c/r),r>0?s+=Math.PI:(s+=3,s*=Math.PI),s/=2),s=Math.round(s*oa.degrees/Math.PI/2)%oa.degrees,Xt[Xt[0]+3]=s,Yt.turtd(s);break;case P.a.rmbr:_t.push([Xt[Xt[0]+1],Xt[Xt[0]+2]]);break;case P.a.frgt:_t.length-=Zt.pop();break;case P.a.poly:s=Zt.pop(),c=_t.length,r=s>c?0:c-s,St(Oa(),_t.slice(r,c).map(ka),!1),na.update&&(l+=1);break;case P.a.pfil:s=Zt.pop(),c=_t.length,r=s>c?0:c-s,St(Oa(),_t.slice(r,c).map(ka),!0),na.update&&(l+=1);break;case P.a.circ:r=Zt.pop(),$t(Oa(),xa(r+oa.startx),va(r+oa.starty),!1),na.update&&(l+=1);break;case P.a.blot:r=Zt.pop(),$t(Oa(),xa(r+oa.startx),va(r+oa.starty),!0),na.update&&(l+=1);break;case P.a.elps:c=Zt.pop(),r=Zt.pop(),$t(Oa(),xa(r+oa.startx),va(c+oa.starty),!1),na.update&&(l+=1);break;case P.a.eblt:c=Zt.pop(),r=Zt.pop(),$t(Oa(),xa(r+oa.startx),va(c+oa.starty),!0),na.update&&(l+=1);break;case P.a.box:i=-1===Zt.pop(),s=Zt.pop(),c=Xt[Xt[0]+2]+Zt.pop(),r=Xt[Xt[0]+1]+Zt.pop(),Ct(Oa(),xa(r),va(c),s,i),na.update&&(l+=1);break;case P.a.blnk:r=Zt.pop(),At(r),na.update&&(l+=1);break;case P.a.rcol:s=Zt.pop(),c=Zt.pop(),r=Zt.pop(),Rt(r,c,s,0,!1),na.update&&(l+=1);break;case P.a.fill:i=Zt.pop(),s=Zt.pop(),c=Zt.pop(),r=Zt.pop(),Rt(r,c,s,i,!0),na.update&&(l+=1);break;case P.a.mxin:Zt.push(Math.pow(2,31)-1)}if(d+=1,a+=1,!e[t])throw Wt(),pa("The program has tried to jump to a line that does not exist. This is either a bug in our compiler, or in your assembled code.");a===e[t].length&&(t+=1,a=0)}setTimeout(ha,0,e,t,a,o)},pa=e=>{const t=new Error(e);return t.type="Machine",t},ba=e=>{const t=Array.from(e).map(e=>e.charCodeAt(0));Zt.push(aa.heapTemp+1),aa.heapTemp+=1,Xt[aa.heapTemp]=e.length,t.forEach(e=>{aa.heapTemp+=1,Xt[aa.heapTemp]=e}),aa.heapMax=Math.max(aa.heapTemp,aa.heapMax)},ma=e=>{const t=Xt[e],a=e+1,o=Xt.slice(a,a+t).reduce((e,t)=>e+String.fromCharCode(t),"");return e+t+1>aa.heapPerm&&(aa.heapTemp=e+t),o},ga=(e,t)=>{t>0&&(Xt[e]=0,ga(e+1,t-1))},fa=(e,t,a)=>{a>0&&(Xt[t]=Xt[e],fa(e+1,t+1,a-1))},ya=(e,t,a,o,n,r,c)=>{(c.keyCode||c.charCode)===e&&(Zt.pop(),Zt.push(-1),window.clearTimeout(t),ha(a,o,n,r))},wa=(e,t,a,o,n,r)=>{const c=r.keyCode||r.charCode;13===c?(ba(na.input),na.input="",window.clearTimeout(e),ha(t,a,o,n)):8===c?na.input=na.input.slice(0,-1):na.input+=String.fromCharCode(c)},Oa=()=>({x:xa(Xt[Xt[0]+1]),y:va(Xt[Xt[0]+2]),d:Xt[Xt[0]+3],t:ja(Xt[Xt[0]+4]),c:Xt[Xt[0]+5]}),xa=e=>{const t=(e-oa.startx)*oa.width/oa.sizex;return oa.doubled?Math.round(t)+1:Math.round(t)},va=e=>{const t=(e-oa.starty)*oa.height/oa.sizey;return oa.doubled?Math.round(t)+1:Math.round(t)},ja=e=>oa.doubled?2*e:e,ka=([e,t])=>[xa(e),va(t)],Ta=e=>{const{left:t,width:a}=vt(),o=(e-t)*oa.sizex/a+oa.startx;return Math.round(o)},Pa=e=>{const{height:t,top:a}=vt(),o=(e-a)*oa.sizey/t+oa.starty;return Math.round(o)};a.d(t,"b",function(){return Sa}),a.d(t,"a",function(){return $a});const Sa=(e,t)=>{try{switch(e){case"ready":Ca("language-changed",Aa("language")),Ca("show-canvas-changed",Aa("show-canvas")),Ca("show-output-changed",Aa("show-output")),Ca("show-memory-changed",Aa("show-memory")),Ca("draw-count-max-changed",Aa("draw-count-max")),Ca("code-count-max-changed",Aa("code-count-max")),Ca("small-size-changed",Aa("small-size")),Ca("stack-size-changed",Aa("stack-size")),Ca("group-changed",Aa("group")),Ca("simple-changed",Aa("simple")),Ca("intermediate-changed",Aa("intermediate")),Ca("advanced-changed",Aa("advanced"));break;case"new-program":Ea("name",""),Ea("compiled",!1),Ea("code",""),Ea("usage",[]),Ea("pcode",[]),Ca("file-changed");break;case"new-skeleton-program":switch(Ea("name","Skeleton program"),Ea("compiled",!1),Ea("usage",[]),Ea("pcode",[]),Aa("language")){case"BASIC":Ea("code","REM progname\n\nvar1%=100\nCOLOUR(GREEN)\nBLOT(var1%)\nEND");break;case"Pascal":Ea("code","PROGRAM progname;\nVAR var1: integer;\nBEGIN\n  var1:=100;\n  colour(green);\n  blot(var1)\nEND.");break;case"Python":Ea("code","# progname\n\ndef main():\n  var1=100\n  colour(green)\n  blot(var1)")}Ca("file-changed");break;case"save-program":const a=new window.Blob([Aa("code")],{type:"text/plain;charset=utf-8"}),c=document.createElement("a");c.setAttribute("href",URL.createObjectURL(a)),c.setAttribute("download",`${Aa("name")}.${n.c[Aa("language")]}`),c.click();break;case"save-tgx-program":Ra();const s=JSON.stringify(Aa("file")),i=new window.Blob([s],{type:"text/plain;charset=utf-8"}),l=document.createElement("a");l.setAttribute("href",URL.createObjectURL(i)),l.setAttribute("download",`${Aa("name")}.tgx`),l.click();break;case"set-language":Ea("language",t),Ca("language-changed",Aa("language"));break;case"set-example":n.f.forEach(e=>{Object(o.b)({url:`examples/${e}/${t}.${n.c[e]}`,success:a=>{Ea(`name-${e}`,r.names[t]),Ea(`compiled-${e}`,!1),Ea(`code-${e}`,a.trim()),Ea(`usage-${e}`,[]),Ea(`pcode-${e}`,[]),Ca("file-changed")},error:e=>{throw La(`Failed to load example file (response code ${e}).`)}})});break;case"set-file":const d=t.filename.split("."),u=d.pop(),h=d.join(".");switch(u){case"tgb":Ea("language","BASIC"),Ea("name-BASIC",h),Ea("compiled-BASIC",!1),Ea("code-BASIC",t.content.trim()),Ea("usage-BASIC",[]),Ea("pcode-BASIC",[]);break;case"tgp":Ea("language","Pascal"),Ea("name-Pascal",h),Ea("compiled-Pascal",!1),Ea("code-Pascal",t.content.trim()),Ea("usage-Pascal",[]),Ea("pcode-Pascal",[]);break;case"tgy":Ea("language","Python"),Ea("name-Python",h),Ea("compiled-Python",!1),Ea("code-Python",t.content.trim()),Ea("usage-Python",[]),Ea("pcode-Python",[]);break;case"tgx":try{const e=JSON.parse(t.content);Ea("language",e.language),Ea(`name-${e.language}`,e.name),Ea(`compiled-${e.language}`,!0),Ea(`code-${e.language}`,e.code.trim()),Ea(`usage-${e.language}`,e.usage),Ea(`pcode-${e.language}`,e.pcode)}catch(e){throw La("Invalid TGX file.")}break;default:throw La("Invalid file type.")}Ca("language-changed",Aa("language"));break;case"set-name":Ea("name",t),Ca("name-changed",Aa("name"));break;case"set-code":Ea("code",t),Ea("compiled",!1),Ca("code-changed",{code:Aa("code"),language:Aa("language")});break;case"toggle-assembler":Ea("assembler",!Aa("assembler")),Ca("pcode-changed",{pcode:Aa("pcode"),assembler:Aa("assembler"),decimal:Aa("decimal")});break;case"toggle-decimal":Ea("decimal",!Aa("decimal")),Ca("pcode-changed",{pcode:Aa("pcode"),assembler:Aa("assembler"),decimal:Aa("decimal")});break;case"toggle-show-canvas":Ea("show-canvas",!Aa("show-canvas")),Ca("show-canvas-changed",Aa("show-canvas"));break;case"toggle-show-output":Ea("show-output",!Aa("show-output")),Ca("show-output-changed",Aa("show-output"));break;case"toggle-show-memory":Ea("show-memory",!Aa("show-memory")),Ca("show-memory-changed",Aa("show-memory"));break;case"show-settings":Ca("show-settings");break;case"set-draw-count-max":Ea("draw-count-max",t),Ca("draw-count-max-changed",Aa("draw-count-max"));break;case"set-code-count-max":Ea("code-count-max",t),Ca("code-count-max-changed",Aa("code-count-max"));break;case"set-small-size":Ea("small-size",t),Ca("small-size-changed",Aa("small-size"));break;case"set-stack-size":Ea("stack-size",t),Ca("stack-size-changed",Aa("stack-size"));break;case"reset-machine-options":Ea("show-canvas",!0),Ea("show-output",!1),Ea("show-memory",!0),Ea("draw-count-max",4),Ea("code-count-max",1e5),Ea("small-size",60),Ea("stack-size",2e4),Ca("show-canvas-changed",Aa("show-canvas")),Ca("show-output-changed",Aa("show-output")),Ca("show-memory-changed",Aa("show-memory")),Ca("draw-count-max-changed",Aa("draw-count-max")),Ca("code-count-max-changed",Aa("code-count-max")),Ca("small-size-changed",Aa("small-size")),Ca("stack-size-changed",Aa("stack-size"));break;case"set-group":Ea("group",t),Ca("help-options-changed",Aa("help-options"));break;case"toggle-simple":Ea("simple",!Aa("simple")),Ca("help-options-changed",Aa("help-options"));break;case"toggle-intermediate":Ea("intermediate",!Aa("intermediate")),Ca("help-options-changed",Aa("help-options"));break;case"toggle-advanced":Ea("advanced",!Aa("advanced")),Ca("help-options-changed",Aa("help-options"));break;case"machine-run-halt":Gt()?Wt():(Ra(),zt(Aa("pcode"),Aa("machine-options")));break;case"machine-play-pause":Gt()&&(Kt.paused?(Kt.paused=!1,Yt.play()):(Kt.paused=!0,Yt.pause()));break;case"dump-memory":Ca("dump-memory",Ht());break;default:console.log(`unknown signal '${e}'`)}}catch(e){Ca("error",e)}},$a=(e,t)=>{Ia[e]?Ia[e].push(t):Ia[e]=[t]},Ca=(e,t)=>{Ia[e]&&Ia[e].forEach(e=>e(t)),"language-changed"===e&&(Ca("file-changed"),Ca("help-options-changed",Aa("help-options"))),"file-changed"===e&&(Ca("name-changed",Aa("name")),Ca("code-changed",{code:Aa("code"),language:Aa("language")}),Ca("usage-changed",Aa("usage")),Ca("pcode-changed",{pcode:Aa("pcode"),assembler:Aa("assembler"),decimal:Aa("decimal")}))},Ia={},Ea=(e,t)=>{switch(e){case"name":case"compiled":case"code":case"usage":case"pcode":Ea(`${e}-${Aa("language")}`,t);break;default:window.localStorage.setItem(e,JSON.stringify(t))}},Aa=e=>{switch(e){case"name":case"compiled":case"code":case"usage":case"pcode":return Aa(`${e}-${Aa("language")}`);case"file":return{name:Aa("name"),compiled:Aa("compiled"),code:Aa("code"),usage:Aa("usage"),pcode:Aa("pcode")};case"machine-options":return{showCanvas:Aa("show-canvas"),showOutput:Aa("show-output"),showMemory:Aa("show-memory"),drawCountMax:Aa("draw-count-max"),codeCountMax:Aa("code-count-max"),smallSize:Aa("small-size"),stackSize:Aa("stack-size")};case"help-options":return{language:Aa("language"),group:Aa("group"),simple:Aa("simple"),intermediate:Aa("intermediate"),advanced:Aa("advanced")};default:return JSON.parse(window.localStorage.getItem(e))}},Ra=()=>{if(!Aa("compiled")){let e=wt(Aa("code"),Aa("language"));Ea("usage",e.usage),Ea("pcode",e.pcode),Ea("compiled",!0),Ca("usage-changed",e.usage),Ca("pcode-changed",{pcode:e.pcode,assembler:Aa("assembler"),decimal:Aa("decimal")})}},La=e=>{const t=new Error(e);return t.type="System",t};null===Aa("language")&&Ea("language","Pascal"),n.f.forEach(e=>{null===Aa(`name-${e}`)&&Ea(`name-${e}`,""),null===Aa(`compiled-${e}`)&&Ea(`compiled-${e}`,!1),null===Aa(`code-${e}`)&&Ea(`code-${e}`,""),null===Aa(`usage-${e}`)&&Ea(`usage-${e}`,[]),null===Aa(`pcode-${e}`)&&Ea(`pcode-${e}`,[])}),null===Aa("assembler")&&Ea("assembler",!0),null===Aa("decimal")&&Ea("decimal",!0),null===Aa("show-canvas")&&Ea("show-canvas",!0),null===Aa("show-output")&&Ea("show-output",!1),null===Aa("show-memory")&&Ea("show-memory",!0),null===Aa("draw-count-max")&&Ea("draw-count-max",4),null===Aa("code-count-max")&&Ea("code-count-max",1e5),null===Aa("small-size")&&Ea("small-size",60),null===Aa("stack-size")&&Ea("stack-size",2e4),null===Aa("group")&&Ea("group",0),null===Aa("simple")&&Ea("simple",!0),null===Aa("intermediate")&&Ea("intermediate",!1),null===Aa("advanced")&&Ea("advanced",!1),Ut("run",()=>Ca("machine-started")),Ut("halt",()=>Ca("machine-stopped")),Ut("play",()=>Ca("machine-played")),Ut("pause",()=>Ca("machine-paused")),Ut("turtx",e=>Ca("turtx-changed",e)),Ut("turty",e=>Ca("turty-changed",e)),Ut("turtd",e=>Ca("turtd-changed",e)),Ut("turtt",e=>Ca("turtt-changed",e)),Ut("turtc",e=>Ca("turtc-changed",e)),Ut("show",e=>Ca(`show-${e}`)),Ut("dump",e=>Ca("dump-memory",e))},function(e,t,a){"use strict";a.d(t,"f",function(){return i}),a.d(t,"c",function(){return l}),a.d(t,"a",function(){return d}),a.d(t,"b",function(){return u}),a.d(t,"d",function(){return h}),a.d(t,"e",function(){return p});var o=a(1);const n=(e,t,a,n)=>({index:e,names:{BASIC:t.toUpperCase(),Pascal:t,Python:t},type:"integer",value:a,hex:{BASIC:`&${Object(o.d)(a.toString(16))}`,Pascal:`$${Object(o.d)(a.toString(16))}`,Python:`0x${Object(o.d)(a.toString(16))}`},css:`#${Object(o.d)(a.toString(16))}`,dark:n}),r=(e,t,a)=>({index:e,name:t,css:a}),c=(e,t,a)=>({index:e,name:t,css:a}),s=(e,t)=>({names:{BASIC:e.toUpperCase(),Pascal:e,Python:e},value:t}),i=["BASIC","Pascal","Python"],l={BASIC:"tgb",Pascal:"tgp",Python:"tgy"},d=[n(1,"green",2263842,!0),n(2,"red",16711680,!0),n(3,"blue",255,!0),n(4,"yellow",16776960,!1),n(5,"violet",9055202,!0),n(6,"lime",65280,!1),n(7,"orange",16755200,!1),n(8,"skyblue",45311,!1),n(9,"brown",9849600,!0),n(10,"pink",15602313,!0),n(11,"darkgreen",25600,!0),n(12,"darkred",11674146,!0),n(13,"darkblue",128,!0),n(14,"ochre",12628016,!0),n(15,"indigo",4915330,!0),n(16,"olive",8421376,!0),n(17,"orangered",16737792,!0),n(18,"teal",32896,!0),n(19,"darkbrown",6045747,!0),n(20,"magenta",16711935,!0),n(21,"lightgreen",10025880,!1),n(22,"lightred",13458524,!1),n(23,"lightblue",10075135,!1),n(24,"cream",16777147,!1),n(25,"lilac",11572223,!1),n(26,"yellowgreen",11193395,!1),n(27,"peach",16764080,!1),n(28,"cyan",65535,!1),n(29,"lightbrown",11567184,!1),n(30,"lightpink",16758465,!1),n(31,"seagreen",3978097,!1),n(32,"maroon",8388608,!0),n(33,"royal",4286945,!0),n(34,"gold",16762880,!1),n(35,"purple",8388736,!0),n(36,"emerald",51543,!1),n(37,"salmon",16416882,!1),n(38,"turquoise",48833,!1),n(39,"coffee",9596735,!1),n(40,"rose",16746666,!1),n(41,"greengrey",7377008,!0),n(42,"redgrey",11567232,!0),n(43,"bluegrey",8421536,!0),n(44,"yellowgrey",9474160,!0),n(45,"darkgrey",4210752,!0),n(46,"midgrey",8421504,!0),n(47,"lightgrey",10526880,!1),n(48,"silver",12632256,!1),n(49,"white",16777215,!1),n(50,"black",0,!0)],u=[r(0,"None","none"),r(1,"Default","default"),r(2,"Pointer","pointer"),r(3,"Crosshair","crosshair"),r(4,"Text","text"),r(5,"Move","move"),r(6,"Resize NESW","nesw-resize"),r(7,"Resize NS","ns-resize"),r(8,"Resize NWSE","nwse-resize"),r(9,"Resize EW","ew-resize"),r(10,"Resize N","n-resize"),r(11,"Wait","wait"),r(12,"Progress","progress"),r(13,"No Drop","no-drop"),r(14,"Forbidden","not-allowed"),r(15,"Help","help")],h=[c(0,"Arial","Arial, sans-serif"),c(1,"Arial Black",'"Arial Black", sans-serif'),c(2,"Comic Sans MS",'"Comic Sans MS", cursive, sans-serif'),c(3,"Courier New",'"Courier New", Courier, monospace'),c(4,"Georgia","Georgia, serif"),c(5,"Impact","Impact, Charcoal, sans-serif"),c(6,"Lucida Console",'"Lucida Console", monospace'),c(7,"Lucida Sans Unicode",'"Lucida Sans Unicode", sans-serif'),c(8,"Palatino Linotype",'"Palatino Linotype", "Book Antiqua", Palatino, serif'),c(9,"Symbol","Symbol"),c(10,"Tahoma","Tahoma, Geneva, sans-serif"),c(11,"Times New Roman",'"Times New Roman", Times, serif'),c(12,"Trebuchet MS",'"Trebuchet MS", helvetica, sans-serif'),c(13,"Verdana","Verdana, Geneva, sans-serif"),c(14,"Webdings","Webdings"),c(15,"Wingdings","Wingdings")],p=[s("?kshift",-10),s("?key",-9),s("?mousey",-8),s("?mousex",-7),s("?clicky",-6),s("?clickx",-5),s("?click",-4),s("?mmouse",-3),s("?rmouse",-2),s("?lmouse",-1),s("\\backspace",8),s("\\tab",9),s("\\enter",13),s("\\shift",16),s("\\ctrl",17),s("\\alt",18),s("\\pause",19),s("\\capslock",20),s("\\escape",27),s("\\space",32),s("\\pgup",33),s("\\pgdn",34),s("\\end",35),s("\\home",36),s("\\left",37),s("\\up",38),s("\\right",39),s("\\down",40),s("\\insert",45),s("\\delete",46),s("\\0",48),s("\\1",49),s("\\2",50),s("\\3",51),s("\\4",52),s("\\5",53),s("\\6",54),s("\\7",55),s("\\8",56),s("\\9",57),s("\\a",65),s("\\b",66),s("\\c",67),s("\\d",68),s("\\e",69),s("\\f",70),s("\\g",71),s("\\h",72),s("\\i",73),s("\\j",74),s("\\k",75),s("\\l",76),s("\\m",77),s("\\n",78),s("\\o",79),s("\\p",80),s("\\q",81),s("\\r",82),s("\\s",83),s("\\t",84),s("\\u",85),s("\\v",86),s("\\w",87),s("\\x",88),s("\\y",89),s("\\z",90),s("\\lwin",91),s("\\rwin",92),s("\\#0",96),s("\\#1",97),s("\\#2",98),s("\\#3",99),s("\\#4",100),s("\\#5",101),s("\\#6",102),s("\\#7",103),s("\\#8",104),s("\\#9",105),s("\\multiply",106),s("\\add",107),s("\\subtract",109),s("\\decimal",110),s("\\divide",111),s("\\f1",112),s("\\f2",113),s("\\f3",114),s("\\f4",115),s("\\f5",116),s("\\f6",117),s("\\f7",118),s("\\f8",119),s("\\f9",120),s("\\f10",121),s("\\f11",122),s("\\f12",123),s("\\numlock",144),s("\\scrolllock",145),s("\\semicolon",186),s("\\equals",187),s("\\comma",188),s("\\dash",189),s("\\fullstop",190),s("\\forwardslash",191),s("\\singlequote",192),s("\\openbracket",219),s("\\backslash",220),s("\\closebracket",221),s("\\hash",222),s("\\backtick",223)]},function(e,t,a){"use strict";a.d(t,"b",function(){return i}),a.d(t,"a",function(){return l}),a.d(t,"c",function(){return d});var o=a(0);const n=e=>({names:{BASIC:e.names[0],Pascal:e.names[1],Python:e.names[2]},code:e.code,parameters:e.parameters||[],returns:e.returns,type:e.returns?"function":"procedure",category:e.category,level:e.level,description:e.description}),r=(e,t,a=!1,o=1)=>({name:e,type:t,byref:a,length:o}),c=(e,t,a)=>({index:e,title:t,expressions:a}),s=(e,t)=>({names:{BASIC:e[0],Pascal:e[1],Python:e[2]},level:t}),i=[n({names:["FORWARD","forward","forward"],code:o.a.fwrd,parameters:[r("n","integer")],category:0,level:0,description:"Moves the Turtle forward <code>n</code> units, drawing as it goes (unless the pen is up)."}),n({names:["BACK","back","back"],code:o.a.back,parameters:[r("n","integer")],category:0,level:0,description:"Moves the Turtle back <code>n</code> units, drawing as it goes (unless the pen is up)."}),n({names:["LEFT","left","left"],code:o.a.left,parameters:[r("n","integer")],category:0,level:0,description:"Rotates the Turtle left by <code>n</code> degrees."}),n({names:["RIGHT","right","right"],code:o.a.rght,parameters:[r("n","integer")],category:0,level:0,description:"Rotates the Turtle right by <code>n</code> degrees."}),n({names:["DRAWXY","drawxy","drawxy"],code:o.a.drxy,parameters:[r("x","integer"),r("y","integer")],category:0,level:1,description:"Moves the Turtle in a straight line to a point <code>x</code> units away along the x-axis and <code>y</code> units away along the y-axis, drawing as it goes (unless the pen is up)."}),n({names:["MOVEXY","movexy","movexy"],code:o.a.mvxy,parameters:[r("x","integer"),r("y","integer")],category:0,level:1,description:"Moves the Turtle in a straight line to a point <code>x</code> units away along the x-axis and <code>y</code> units away along the y-axis, <em>without</em> drawing (regardless of the current pen status)."}),n({names:["HOME","home","home"],code:o.a.home,category:1,level:0,description:"Moves the Turtle back to its starting position in the centre of the canvas, facing north, drawing as it goes (unless the pen is up)."}),n({names:["SETX","setx","setx"],code:o.a.setx,parameters:[r("x","integer")],category:1,level:0,description:"Sets the Turtle&rsquo;s <code>x</code> coordinate directly (without movement or drawing on the canvas). This can also be achieved by direct assignment of the global variable <code>turtx</code>."}),n({names:["SETY","sety","sety"],code:o.a.sety,parameters:[r("y","integer")],category:1,level:0,description:"Sets the Turtle&rsquo;s <code>y</code> coordinate directly (without movement or drawing on the canvas). This can also be achieved by direct assignment of the global variable <code>turty</code>."}),n({names:["SETXY","setxy","setxy"],code:o.a.toxy,parameters:[r("x","integer"),r("y","integer")],category:1,level:0,description:"Sets the Turtle&rsquo;s <code>x</code> and <code>y</code> coordinates directly (without movement or drawing on the canvas). This can also be achieved by direct assingment of the global variables <code>turtx</code> and <code>turty</code>."}),n({names:["DIRECTION","direction","direction"],code:o.a.setd,parameters:[r("n","integer")],category:1,level:0,description:"Sets the Turtle&rsquo;s direction to <code>n</code> degrees (0 for north, 90 for east, 180 for south, 270 for west). This can also be achieved by direct assignment of the global variable <code>turtd</code>. Note that the number of degrees in a circle (360 by default) can be changed with the <code>angles</code> command."}),n({names:["TURNXY","turnxy","turnxy"],code:o.a.turn,parameters:[r("x","integer"),r("y","integer")],category:1,level:1,description:"Turns the Turtle to face the point <code>x</code> units away alongthe x-axis and <code>y</code> units away along the y-axis."}),n({names:["CIRCLE","circle","circle"],code:o.a.circ,parameters:[r("radius","integer")],category:2,level:0,description:"Draws a circle outline in the Turtle&rsquo;s current colour and thickness, of the given <code>radius</code>, centred on the Turtle&rsquo;s current location."}),n({names:["BLOT","blot","blot"],code:o.a.blot,parameters:[r("radius","integer")],category:2,level:0,description:"Draws a filled circle in the Turtle&rsquo;s current colour, of the given <code>radius</code>, centred on the Turtle&rsquo;s current location."}),n({names:["ELLIPSE","ellipse","ellipse"],code:o.a.elps,parameters:[r("Xradius","integer"),r("Yradius","integer")],category:2,level:0,description:"Draws an ellipse outline in the Turtle&rsquo;s current colour and thickness, of the given <code>Xradius</code> and <code>Yradius</code>, centred on the Turtle&rsquo;s current location."}),n({names:["ELLBLOT","ellblot","ellblot"],code:o.a.eblt,parameters:[r("Xradius","integer"),r("Yradius","integer")],category:2,level:0,description:"Draws a filled ellipse in the Turtle&rsquo;s current colour, of the given <code>Xradius</code> and <code>Yradius</code>, centred on the Turtle&rsquo;s current location."}),n({names:["POLYLINE","polyline","polyline"],code:o.a.poly,parameters:[r("n","integer")],category:2,level:1,description:"Draws a polygon outline in the Turtle&rsquo;s current colour and thickness, connecting the last <code>n</code> locations that the Turtle has visited."}),n({names:["POLYGON","polygon","polygon"],code:o.a.pfil,parameters:[r("n","integer")],category:2,level:1,description:"Draws a filled polygon in the Turtle&rsquo;s current colour and thickness, connecting the last <code>n</code> locations that the Turtle has visited."}),n({names:["FORGET","forget","forget"],code:o.a.frgt,parameters:[r("n","integer")],category:2,level:1,description:"Makes the Turtle &ldquo;forget&rdquo; the last <code>n</code> points it has visited. Used in conjunction with <code>polyline</code> and <code>polygon</code>."}),n({names:["REMEMBER","remember","remember"],code:o.a.rmbr,category:2,level:1,description:"Makes the Turtle &ldquo;remember&rdquo; its current location. This is only necessary if its current location was set by a direct assignment of the global variables <code>turtx</code> and <code>turty</code>; when using the standard moving commands, the Turtle automatically remembers where it has been."}),n({names:["BOX","box","box"],code:o.a.box,parameters:[r("x","integer"),r("y","integer"),r("colour","integer"),r("border","boolean")],category:2,level:1,description:"Draws a box of width <code>x</code> and height <code>y</code>, with the top left corner in the Turtle&rsquo;s current location, filled with the specified <code>colour</code>. If <code>border</code> is <code>true</code>, a border is drawn around the box in the Turtle&rsquo;s current colour and and thickness. This is intended to be used with the <code>print</code> command, to provide a box for framing text."}),n({names:["COLOUR","colour","colour"],code:o.a.colr,parameters:[r("colour","integer")],category:3,level:0,description:"Sets the <code>colour</code> of the Turtle&rsquo;s pen. Takes as an argument either an RGB value, or one of the Turtle System&rsquo;s fifty predefined colour constants (see the <b>Colours</b> tab). This can also be achieved by direct assignment of the global variable <code>turtc</code>."}),n({names:["RNDCOL","randcol","randcol"],code:o.a.rndc,parameters:[r("n","integer")],category:3,level:0,description:"Assigns a random colour to the Turte&rsquo;s pen, between 1 and <code>n</code> (maximum 50). The colours are taken from the Turtle System&rsquo;s fifty predefined colours, which are each assigned a number between 1 and 50 (see the <b>Colours</b> tab)."}),n({names:["THICKNESS","thickness","thickness"],code:o.a.thik,parameters:[r("thickness","integer")],category:3,level:0,description:"Sets the <code>thickness</code> of the Turtle&rsquo;s pen (for line drawing, and outlines of circles, ellipses, boxes, and polygons). This can also be achieved by direct assignment of the global variable <code>turtt</code>."}),n({names:["PENUP","penup","penup"],code:o.a.pnup,category:3,level:0,description:"Lifts the Turtle&rsquo;s pen, so that subsequent movement will not draw a line on the Canvas."}),n({names:["PENDOWN","pendown","pendown"],code:o.a.pndn,category:3,level:0,description:"Lowers the Turtle&rsquo;s pen, so that subsequent movement will draw a line on the Canvas."}),n({names:["OUTPUT","output","output"],code:o.a.outp,parameters:[r("clear","boolean"),r("colour","integer"),r("tofront","boolean")],category:3,level:1,description:"Modifies the textual output. If the first argument is <code>true</code>, it clears any existing text. The second argument specifies the background colour, and the third argument is for switching the display. If the third argument is <code>true</code>, it switches to the <b>Output</b> tab, while if it is <code>false</code>, it switches to the <b>Canvas and Console</b> tab."}),n({names:["CONSOLE","console","console"],code:o.a.cons,parameters:[r("clear","boolean"),r("colour","integer")],category:3,level:1,description:"Modifies the Console; if the first argument is <code>true</code>, it clears any existing text, while the second argument specifies the background colour."}),n({names:["RGB","rgb","rgb"],code:o.a.rgb,parameters:[r("colour","integer")],returns:"integer",category:3,level:2,description:"Returns the RGB value of the input <code>colour</code> (an integer between 1 and 50). For example, <code>rgb(red)=255</code>."}),n({names:["MIXCOLS","mixcols","mixcols"],code:o.a.mixc,parameters:[r("colour1","integer"),r("colour1","integer"),r("proportion1","integer"),r("proportion2","integer")],returns:"integer",category:3,level:2,description:"Mixes the given colours in the given proportions."}),n({names:["NEWTURTLE","newturtle","newturtle"],code:o.a.newt,parameters:[r("array","integer",!0,5)],category:3,level:2,description:"Points the Turtle to a custom array in memory (this must be an array of five integers, corresponding to the Turtle&rsquo;s five properties, <code>turtx</code>, <code>turty</code>, <code>turtd</code>, <code>turtt</code>, and <code>turtc</code>). Use repeatedly to simulate multiple Turtles."}),n({names:["OLDTURTLE","oldturtle","oldturtle"],code:o.a.oldt,category:3,level:2,description:"Points the Turtle back to the default (built-in) array in memory. Use in conjunction with <code>newturtle</code>."}),n({names:["UPDATE","update","update"],code:o.a.udat,category:4,level:0,description:"Makes the Machine update the Canvas, and continue updating with all subsequent drawing commands. Used in conjunction with <em>noupdate</em>."}),n({names:["NOUPDATE","noupdate","noupdate"],code:o.a.ndat,category:4,level:0,description:"Makes the Machine refrain from updating the Canvas when executing all subsequent drawing commands, until <em>update</em> is called. Use this to create smooth animations, by queueing up several drawing commands to execute simultaneously."}),n({names:["BLANK","blank","blank"],code:o.a.blnk,parameters:[r("colour","integer")],category:4,level:0,description:"Blanks the entire Canvas with the specified <code>colour</code>."}),n({names:["CANVAS","canvas","canvas"],code:o.a.canv,parameters:[r("x1","integer"),r("y1","integer"),r("x2","integer"),r("y2","integer")],category:4,level:1,description:"Sets the top left Canvas coordinate to <code>(x1,y1)</code>, and the Canvas width and height to <code>x2</code> and <code>y2</code> respectively. Note that the width and height fix the number of virtual points on the Canvas, not the number of actual pixels."}),n({names:["RESOLUTION","resolution","resolution"],code:o.a.reso,parameters:[r("x","integer"),r("y","integer")],category:4,level:1,description:"Sets the Canvas resolution, i.e. the number of actual pixels in the <code>x</code> and <code>y</code> dimensions. To be used in conjunction with the <code>canvas</code> command, typically to set the number of actual pixels equal to the number of virtual points on the Canvas."}),n({names:["ANGLES","angles","angles"],code:o.a.angl,parameters:[r("degrees","integer")],category:4,level:1,description:"Sets the number of <code>degrees</code> in a circle (360 by default)."}),n({names:["PIXSET","pixset","pixset"],code:o.a.pixs,parameters:[r("x","integer"),r("y","integer"),r("colour","integer")],category:4,level:2,description:"Sets the <code>colour</code> at point <code>(x,y)</code>."}),n({names:["PIXCOL","pixcol","pixcol"],code:o.a.pixc,parameters:[r("x","integer"),r("y","integer")],returns:"integer",category:4,level:2,description:"Returns the RGB value of the colour at point <code>(x,y)</code>."}),n({names:["RECOLOUR","recolour","recolour"],code:o.a.rcol,parameters:[r("x","integer"),r("y","integer"),r("colour","integer")],category:4,level:2,description:"Floods the Canvas with the specified <code>colour</code>, starting at point <code>(x,y)</code>, until reaching any different colour."}),n({names:["FILL","fill","fill"],code:o.a.fill,parameters:[r("x","integer"),r("y","integer"),r("colour","integer"),r("boundary","integer")],category:4,level:2,description:"Floods the Canvas with the specified <code>colour</code>, starting at point <code>(x,y)</code>, until reaching the <code>boundary</code> colour."}),n({names:["INC","inc","inc"],code:o.a.incr,parameters:[r("variable","integer",!0)],category:5,level:0,description:"Increments the specified <code>variable</code> by 1."}),n({names:["DEC","dec","dec"],code:o.a.decr,parameters:[r("variable","integer",!0)],category:5,level:0,description:"Decrements the specified <code>variable</code> by 1."}),n({names:["ABS","abs","abs"],code:o.a.abs,parameters:[r("n","integer")],returns:"integer",category:5,level:0,description:"Returns the absolute value of <code>n</code>, i.e. <code>n</code> if positive, <code>-n</code> if negative."}),n({names:["SIGN","sign","sign"],code:o.a.sign,parameters:[r("a","integer")],returns:"integer",category:5,level:1,description:"Returns <code>+1</code> if <code>a</code> is positive, <code>-1</code> if <code>a</code> is negative, and <code>0</code> otherwise."}),n({names:["MAX","max","max"],code:o.a.maxi,parameters:[r("a","integer"),r("b","integer")],returns:"integer",category:5,level:1,description:"Returns the maximum of <code>a</code> and <code>b</code>."}),n({names:["MIN","min","min"],code:o.a.mini,parameters:[r("a","integer"),r("b","integer")],returns:"integer",category:5,level:1,description:"Returns the minimum of <code>a</code> and <code>b</code>."}),n({names:["SQR","sqrt","sqrt"],code:o.a.sqrt,parameters:[r("a","integer"),r("mult","integer")],returns:"integer",category:5,level:1,description:"Returns <code>&radic;a</code>, multiplied by <code>mult</code> and rounded to the nearest integer. Use the multiplier to approximate real numbers."}),n({names:["HYPOT","hypot","hypot"],code:o.a.hyp,parameters:[r("a","integer"),r("b","integer"),r("mult","integer")],returns:"integer",category:5,level:1,description:"Returns <code>&radic;(a<sup>2</sup>+b<sup>2</sup>)</code>, multiplied by <code>mult</code> and rounded to the nearest integer. Use the multiplier to approximate real numbers."}),n({names:["RND",null,null],code:o.a.rand,parameters:[r("n","integer")],returns:"integer",category:5,level:1,description:"Returns a random integer between 1 and <code>n</code>."}),n({names:[null,"random",null],code:o.a.rand,parameters:[r("n","integer")],returns:"integer",category:5,level:1,description:"Returns a random non-negative integer less than <code>n</code>."}),n({names:[null,null,"randint"],code:o.a.rand,parameters:[r("a","integer"),r("b","integer")],returns:"integer",category:5,level:1,description:"Returns a random integer between <code>a</code> and <code>b</code>."}),n({names:["POWER","power","power"],code:o.a.powr,parameters:[r("a","integer"),r("b","integer"),r("c","integer"),r("mult","integer")],returns:"integer",category:5,level:2,description:"Returns <code>(a/b)<sup>c</sup></code>, multiplied by <code>mult</code> and rounded to the nearest integer. Use the multiplier to approximate real numbers."}),n({names:["ROOT","root","root"],code:o.a.root,parameters:[r("a","integer"),r("b","integer"),r("c","integer"),r("mult","integer")],returns:"integer",category:5,level:2,description:"Returns <code><sup>c</sup>&radic;(a/b)</code>, multiplied by <code>mult</code> and rounded to the nearest integer. Use the multiplier to approximate real numbers."}),n({names:["DIVMULT","divmult","divmult"],code:o.a.divm,parameters:[r("a","integer"),r("b","integer"),r("mult","integer")],returns:"integer",category:5,level:2,description:"Returns <code>a/b</code>, multiplied by <code>mult</code> and rounded to the nearest integer. Use the multiplier to approximate real numbers."}),n({names:["MAXINT","maxint","maxint"],code:o.a.mxin,returns:"integer",category:5,level:2,description:"Returns the maximum integer that the Machine can deal with (2<sup>31</sup>-1)."}),n({names:["SIN","sin","sin"],code:o.a.sin,parameters:[r("a","integer"),r("b","integer"),r("mult","integer")],returns:"integer",category:6,level:1,description:"Returns <code>sin(a/b)</code>, multiplied by <code>mult</code> and rounded to the nearest integer. Use the multiplier to approximate real numbers."}),n({names:["COS","cos","cos"],code:o.a.cos,parameters:[r("a","integer"),r("b","integer"),r("mult","integer")],returns:"integer",category:6,level:1,description:"Returns <code>cos(a/b)</code>, multiplied by <code>mult</code> and rounded to the nearest integer. Use the multiplier to approximate real numbers."}),n({names:["TAN","tan","tan"],code:o.a.tan,parameters:[r("a","integer"),r("b","integer"),r("mult","integer")],returns:"integer",category:6,level:1,description:"Returns <code>tan(a/b)</code>, multiplied by <code>mult</code> and rounded to the nearest integer. Use the multiplier to approximate real numbers."}),n({names:["PI","pi","pi"],code:o.a.pi,parameters:[r("mult","integer")],returns:"integer",category:6,level:1,description:"Returns the value of Pi, multiplied by <code>mult</code> and rounded to the nearest integer. Use the multiplier to approximate real numbers."}),n({names:["EXP","exp","exp"],code:o.a.exp,parameters:[r("a","integer"),r("b","integer"),r("mult","integer")],returns:"integer",category:6,level:1,description:"Returns <code>a<sup>b</sup></code>, multiplied by <code>mult</code> and rounded to the nearest integer. Use the multiplier to approximate real numbers."}),n({names:["LN","ln","ln"],code:o.a.ln,parameters:[r("a","integer"),r("b","integer"),r("mult","integer")],returns:"integer",category:6,level:1,description:"Returns <code>ln(a/b)</code>, multiplied by <code>mult</code> and rounded to the nearest integer. Use the multiplier to approximate real numbers."}),n({names:["ANTILOG","antilog","antilog"],code:o.a.alog,parameters:[r("a","integer"),r("b","integer"),r("mult","integer")],returns:"integer",category:6,level:2,description:"Returns <code>antilog<sub>10</sub>(a/b)</code> - i.e. <code>10<sup>a/b</sub></code> - multiplied by <code>mult</code> and rounded to the nearest integer. Use the multiplier to approximate real numbers."}),n({names:["LOG10","log10","log10"],code:o.a.log,parameters:[r("a","integer"),r("b","integer"),r("mult","integer")],returns:"integer",category:6,level:2,description:"Returns <code>log<sub>10</sub>(a/b)</code>, multiplied by <code>mult</code> and rounded to the nearest integer. Use the multiplier to approximate real numbers."}),n({names:["ASN","arcsin","asin"],code:o.a.asin,parameters:[r("a","integer"),r("b","integer"),r("mult","integer")],returns:"integer",category:6,level:2,description:"Returns <code>arcsin(a/b)</code>, multiplied by <code>mult</code> and rounded to the nearest integer. Use the multiplier to approximate real numbers."}),n({names:["ACS","arccos","acos"],code:o.a.acos,parameters:[r("a","integer"),r("b","integer"),r("mult","integer")],returns:"integer",category:6,level:2,description:"Returns <code>arccos(a/b)</code>, multiplied by <code>mult</code> and rounded to the nearest integer. Use the multiplier to approximate real numbers."}),n({names:["ATN","arctan","atan"],code:o.a.atan,parameters:[r("a","integer"),r("b","integer"),r("mult","integer")],returns:"integer",category:6,level:2,description:"Returns <code>arctan(a/b)</code>, multiplied by <code>mult</code> and rounded to the nearest integer. Use the multiplier to approximate real numbers."}),n({names:["WRITE","write","write"],code:o.a.text,parameters:[r("string","string")],category:7,level:0,description:"Writes the input <code>string</code> to the console and textual output area of the System."}),n({names:["WRITELN","writeln","writeline"],code:o.a.texl,parameters:[r("string","string")],category:7,level:0,description:"Writes the input <code>string</code> to the console and textual output area of the System, followed by a line break."}),n({names:["PRINT","print","print"],code:o.a.prnt,parameters:[r("string","string"),r("font","integer"),r("size","integer")],category:7,level:0,description:"Prints the input <code>string</code> in the Turtle&rsquo;s current colour and at the Turtle&rsquo;s current location, in the specified <code>font</code> and <code>size</code>. Can be used in conjunction with the <code>box</code> drawing command. For a list of available fonts, see the <b>Constants</b> tab."}),n({names:["UCASE$","uppercase","upper"],code:o.a.uppc,parameters:[r("string","string")],returns:"string",category:7,level:1,description:"Returns the input <code>string</code> as all uppercase."}),n({names:["LCASE$","lowercase","lower"],code:o.a.lowc,parameters:[r("string","string")],returns:"string",category:7,level:1,description:"Returns the input <code>string</code> as all lowercase."}),n({names:["LEN","length","len"],code:o.a.slen,parameters:[r("string","string")],returns:"integer",category:7,level:1,description:"Returns the length of the input <code>string</code> (i.e. the number of characters)."}),n({names:["DEL$","delete",null],code:o.a.dels,parameters:[r("string","string"),r("index","integer"),r("length","integer")],returns:"string",category:7,level:2,description:"Returns the input <code>string</code> with some characters removed, starting at the given <code>index</code> and of the specified <code>length</code>."}),n({names:["LEFT$",null,null],code:o.a.lefs,parameters:[r("string","string"),r("length","integer")],returns:"string",category:7,level:2,description:"Returns a copy of the characters in the input <code>string</code>, starting on the left and of the specified <code>length</code>."}),n({names:["MID$","copy","copy"],code:o.a.copy,parameters:[r("string","string"),r("index","integer"),r("length","integer")],returns:"string",category:7,level:2,description:"Returns a copy of the characters in the input <code>string</code>, starting at the given <code>index</code> and of the specified <code>length</code>."}),n({names:["RIGHT$",null,null],code:o.a.rgts,parameters:[r("string","string"),r("length","integer")],returns:"string",category:7,level:2,description:"Returns a copy of the characters in the input <code>string</code>, starting on the right and of the specified <code>length</code>."}),n({names:["INS$",null,"insert"],code:o.a.inss,parameters:[r("string","string"),r("index","integer"),r("substr","string")],returns:"string",category:7,level:2,description:"Returns the input <code>string</code> with the specified <code>substring</code> inserted at the given <code>index</code>."}),n({names:[null,"insert",null],code:o.a.inss,parameters:[r("substr","string"),r("string","string"),r("index","integer")],returns:"string",category:7,level:2,description:"Returns the input <code>string</code> with the specified <code>substring</code> inserted at the given <code>index</code>."}),n({names:["REPLACE","replace","replace"],code:o.a.repl,parameters:[r("string","string"),r("substr","string"),r("replace","string"),r("n","integer")],returns:"string",category:7,level:2,description:"Returns the input <code>string</code> with up to <code>n</code> occurences of <code>substring</code> replaced by <code>replace</code>. Set <code>n</code> equal to <code>0</code> to replace every occurence."}),n({names:["INSTR",null,"find"],code:o.a.poss,parameters:[r("string","string"),r("substr","string")],returns:"integer",category:7,level:2,description:"Searches for the input <code>substring</code> within the given <code>string</code>; returns the index of the first character if found, 0 otherwise."}),n({names:[null,"pos",null],code:o.a.poss,parameters:[r("substr","string"),r("string","string")],returns:"integer",category:7,level:2,description:"Searches for the input <code>substring</code> within the given <code>string</code>; returns the index of the first character if found, 0 otherwise."}),n({names:["STR$","str","str"],code:o.a.itos,parameters:[r("n","integer")],returns:"string",category:8,level:0,description:"Returns the integer <code>n</code> as a string, e.g. <code>str(12)='12'</code>."}),n({names:["VAL","val","integer"],code:o.a.svd0,parameters:[r("string","string")],returns:"integer",category:8,level:0,description:"Returns the input <code>string</code> as an integer, e.g. <code>val('12')=12</code>. Returns <code>0</code> if the string cannot be converted (i.e. if it is not an integer string)."}),n({names:["VALDEF","valdef","intdef"],code:o.a.sval,parameters:[r("string","string"),r("default","string")],returns:"integer",category:8,level:0,description:"Returns the input <code>string</code> as an integer, e.g. <code>val('12')=12</code>. Returns the specified <code>default</code> value if the string cannot be converted (i.e. if it is not an integer string)."}),n({names:["QSTR$","qstr","qstr"],code:o.a.qtos,parameters:[r("a","integer"),r("b","integer"),r("decplaces","integer")],returns:"string",category:8,level:1,description:"Returns the value of <code>a/b</code> to the specified number of decimal places, as a decimal string, e.g. <code>qstr(2,3,4)='0.6667'</code>."}),n({names:["QVAL","qval","qval"],code:o.a.qval,parameters:[r("string","string"),r("mult","integer"),r("default","integer")],returns:"integer",category:8,level:1,description:"Returns the input decimal <code>string</code> as an integer, multiplied by <code>mult</code> and rounded to the nearest integer, e.g. <code>qval('1.5',10)=15</code>. Returns the specified <code>default</code> value if the string cannot be converted (i.e. if it is not a decimal string)."}),n({names:["CHR$","chr","chr"],code:o.a.null,parameters:[r("n","integer")],returns:"char",category:8,level:2,description:"Returns the character with ASCII character code <code>n</code>, e.g. <code>chr(65)='A'</code>."}),n({names:["ASC","ord","ord"],code:o.a.null,parameters:[r("char","char")],returns:"integer",category:8,level:2,description:"Returns the ASCII code of the input character <code>char</code> (which must be a string of length 1), e.g. <code>ord('A')=65</code>."}),n({names:["BOOLINT","boolint",null],code:o.a.null,parameters:[r("boolean","boolean")],returns:"integer",category:8,level:2,description:"Returns the input <code>boolean</code> as an integer (-1 for <code>true</code>, 0 for <code>false</code>)."}),n({names:[null,null,"boolint"],code:o.a.bool,parameters:[r("boolean","boolean")],returns:"integer",category:8,level:2,description:"Returns the input <code>boolean</code> as an integer (1 for <code>true</code>, 0 for <code>false</code>)."}),n({names:["HEX$","hexstr","hex"],code:o.a.hexs,parameters:[r("n","integer"),r("minlength","integer")],category:8,level:2,description:"Returns a string representation of integer <code>n</code> in hexadecimal format, padded with leading zeros as up to <code>minlength</code>, e.g. <code>hexstr(255,6)='0000FF'</code>."}),n({names:["PAUSE","pause","pause"],code:o.a.wait,parameters:[r("m","integer")],category:9,level:0,description:"Makes the Turtle Machine wait <code>m</code> milliseconds before performing the next operation. This is useful for controlling the speed of animations."}),n({names:["GETLINE$","readln","readline"],code:o.a.rdln,returns:"string",category:9,level:0,description:"Waits for the RETURN key to be pressed, then returns everything in the keybuffer up to (and not including) the new line character."}),n({names:["INPUT$",null,"input"],code:o.a.ilin,parameters:[r("prompt","string")],returns:"string",category:9,level:0,description:"Gives an input prompt, then returns the input when the RETURN key is pressed (using the keybuffer)."}),n({names:["CURSOR","cursor","cursor"],code:o.a.curs,parameters:[r("cursorcode","integer")],category:9,level:1,description:"Sets which cursor to display (1-15) when the mouse pointer is over the canvas. 0 hides the cursor; any value outside the range 0-15 resets the default cursor. For a list of available cursors, see the <b>Cursors</b> tab."}),n({names:["KEYECHO","keyecho","keyecho"],code:o.a.kech,parameters:[r("on","boolean")],category:9,level:1,description:"Turns the keyboard echo to the console on (<code>true</code>) or off (<code>false</code>)."}),n({names:["DETECT","detect","detect"],code:o.a.tdet,parameters:[r("keycode","integer"),r("m","integer")],returns:"boolean",category:9,level:1,description:"Waits a maximum of <code>m</code> milliseconds for the key with the specified <code>keycode</code> to be pressed; returns <code>true</code> if pressed (and stops waiting), <code>false</code> otherwise."}),n({names:["GET$","read","read"],code:o.a.read,parameters:[r("n","integer")],returns:"string",category:9,level:1,description:"Returns the first <code>n</code> characters from the keybuffer as a string."}),n({names:["TIME","time","time"],code:o.a.time,returns:"integer",category:9,level:1,description:"Returns the time (in milliseconds) since the program began."}),n({names:["TIMESET","timeset","timeset"],code:o.a.tset,parameters:[r("m","integer")],category:9,level:1,description:"Artificially sets the time since the program began to <code>m</code> milliseconds."}),n({names:["RESET","reset","reset"],code:o.a.iclr,parameters:[r("?input","integer")],category:9,level:2,description:"Resets the specified <code>?input</code> (<code>?mousex</code>, <code>?mousey</code>, <code>?click</code>, etc.) to its initial value (i.e. -1)."}),n({names:["KEYSTATUS","keystatus","keystatus"],code:o.a.inpt,parameters:[r("keycode","integer")],returns:"integer",category:9,level:2,description:"Returns the <code>?kshift</code> value for the most recent press of the key with the specified <code>keycode</code>."}),n({names:["KEYBUFFER","keybuffer","keybuffer"],code:o.a.bufr,parameters:[r("n","integer")],category:9,level:2,description:"Creates a new custom keybuffer of length <code>n</code>. A keybuffer of length 32 is available by default; use this command if you need a larger buffer."}),n({names:["HALT","halt","halt"],code:o.a.halt,category:10,level:0,description:"Halts the program."}),n({names:["TRACE","trace","trace"],code:o.a.trac,parameters:[r("on","boolean")],category:10,level:2,description:"Turns the PCode trace facility on (<code>true</code>) or off (<code>false</code>)."}),n({names:["WATCH","watch","watch"],code:o.a.memw,parameters:[r("address","integer")],category:10,level:2,description:"Sets an <code>address</code> in memory for the trace facility to watch."}),n({names:["DUMP","dump","dump"],code:o.a.dump,category:10,level:2,description:"&ldquo;Dumps&rdquo; the current memory state into the display in the memory tab."}),n({names:["HEAPRESET","heapreset","heapreset"],code:o.a.hrst,category:10,level:2,description:"Resets the memory heap to the initial global value."})],l=[c(0,"Turtle: relative movement",i.filter(e=>0===e.category)),c(1,"Turtle: absolute movement",i.filter(e=>1===e.category)),c(2,"Turtle: drawing shapes",i.filter(e=>2===e.category)),c(3,"Other Turtle commands",i.filter(e=>3===e.category)),c(4,"Canvas operations",i.filter(e=>4===e.category)),c(5,"General arithmetic functions",i.filter(e=>5===e.category)),c(6,"Trig / exp / log functions",i.filter(e=>6===e.category)),c(7,"String operations",i.filter(e=>7===e.category)),c(8,"Type conversion routines",i.filter(e=>8===e.category)),c(9,"Input and timing routines",i.filter(e=>9===e.category)),c(10,"Turtle Machine monitoring",i.filter(e=>10===e.category))],d=l.concat({title:"Command structures",expressions:[s(["IF","if","if"],0),s(["ELSE","else","else"],0),s(["FOR","for","for"],0),s(["REPEAT","repeat","repeat"],1),s(["WHILE","while","while"],1),s(["DEF",null,"def"],1),s([null,"procedure",null],1),s([null,"function",null],2)]},{title:"Variable scope modifiers",expressions:[s(["LOCAL",null,null],1),s(["PRIVATE",null,null],2),s([null,null,"global"],1),s([null,null,"nonlocal"],2)]})},function(e,t,a){"use strict";var o=e=>{let t=[];for(;e.length>0;){let a=n(e)||r(e)||c(e)||l(e)||s(e)||i(e)||d(e)||u(e)||h(e)||p(e)||b(e)||m(e)||O(e)||g(e)||f(e)||x(e)||y(e)||w(e)||v(e);t.push(a),e=e.slice(a.content.length)}return t};const n=e=>{return!!("\n"===e[0])&&{type:"linebreak",content:"\n"}},r=e=>{const t=e.match(/^( +)/);return!!t&&{type:"spaces",content:t[0]}},c=e=>{return!!e.match(/^REM\b/)&&{type:"comment",content:e.split("\n")[0]}},s=e=>{const t=e.match(/^(\+|-|\*|\/|DIV\b|MOD\b|=|<>|<=|>=|<|>|NOT\b|AND\b|OR\b|EOR\b)/);return!!t&&{type:"operator",content:t[0]}},i=e=>{const t=e.match(/^(\(|\)|,|:)/);return!!t&&{type:"punctuation",content:t[0]}},l=e=>{const t="'"===e[0],a='"'===e[0],o=e.match(/[^\\](')/),n=e.match(/[^\\](")/);return t&&o?{type:"string",content:e.slice(0,o.index+2)}:t?{type:"unterminated-string",content:e.split("\n")[0]}:a&&n?{type:"string",content:e.slice(0,n.index+2)}:!!a&&{type:"unterminated-string",content:e.split("\n")[0]}},d=e=>{const t=e.match(/^(TRUE|FALSE)\b/);return!!t&&{type:"boolean",content:t[0]}},u=e=>{const t=e.match(/^(%[01]+)\b/),a=e.match(/^(0b[01]+)\b/);return t?{type:"binary",content:t[0]}:!!a&&{type:"bad-binary",content:a[0]}},h=e=>{const t=e.match(/^((\$|#|(0x))[A-Fa-f0-9]+)\b/),a=e.match(/^(&[A-Fa-f0-9]+)\b/);return t?{type:"bad-hexadecimal",content:t[0]}:!!a&&{type:"hexadecimal",content:a[0]}},p=e=>{const t=e.match(/^(\d+\.\d+)/),a=e.match(/^(\d+)\b/);return t?{type:"bad-decimal",content:t[0]}:!!a&&{type:"decimal",content:a[0]}},b=e=>{const t=e.match(/^(DEF|DIM|ELSE|END|ENDIF|ENDPROC|ENDWHILE|FOR|IF|LOCAL|NEXT|PRIVATE|REPEAT|RETURN|STEP|THEN|TO|UNTIL|WHILE)\b/);return!!t&&{type:"keyword",content:t[0]}},m=e=>{const t=e.match(/^(ABS\b|ACS\b|ANGLES\b|ANTILOG\b|ASC\b|ASN\b|ATN\b|BACK\b|BLANK\b|BLOT\b|BOOLINT\b|BOX\b|CANVAS\b|CHR\$|CIRCLE\b|COLOU?R\b|CONSOLE\b|COS\b|CURSOR\b|DEC\b|DEL\$|DETECT\b|DIRECTION\b|DIVMULT\b|DRAWXY\b|DUMP\b|ELLBLOT\b|ELLIPSE\b|EXP\b|FILL\b|FORGET\b|FORWARD\b|GET\$|GETLINE\$|HEAPRESET|HEX\$|HOME\b|HYPOT\b|INC\b|INPUT\$|INSTR|KEYBUFFER\b|KEYECHO\b|KEYSTATUS\b|LCASE\$|LEFT\$|LEFT\b|LEN\b|LN\b|LOG10\b|MAX\b|MAXINT\b|MID\$|MIN\b|MIXCOLS\b|MOVEXY\b|NEWTURTLE\b|NOUPDATE\b|OLDTURTLE\b|OUTPUT\b|PAUSE\b|PENDOWN\b|PENUP\b|PI\b|PIXCOL\b|PIXSET\b|POLYGON\b|POLYLINE\b|POWER\b|PRINT\b|QSTR\$|QVAL\b|RECOLOUR\b|REMEMBER\b|RESET\b|RESOLUTION\b|RGB\b|RIGHT\$|RIGHT\b|RND\b|RNDCOL\b|ROOT\b|SETX\b|SETXY\b|SETY\b|SIGN\b|SIN\b|SQR\b|STR\$|TAN\b|THICKNESS\b|TIME\b|TIMESET\b|TRACE\b|TURNXY\b|UPDATE\b|UCASE\$|VAL\b|VALDEF\b|WATCH\b|WRITE\b|WRITELN\b)/);return!!t&&{type:"command",content:t[0]}},g=e=>{const t=e.match(/^(TURT[XYDTC]%)\b/);return!!t&&{type:"turtle",content:t[0]}},f=e=>{const t=e.match(/^(TRUE|FALSE|GREEN|DARKGREEN|LIGHTGREEN|SEAGREEN|GREENGREY|GREENGRAY|RED|DARKRED|LIGHTRED|MAROON|REDGREY|REDGRAY|BLUE|DARKBLUE|LIGHTBLUE|ROYAL|BLUEGREY|YELLOW|OCHRE|CREAM|GOLD|YELLOWGREY|YELLOWGRAY|VIOLET|INDIGO|LILAC|PURPLE|DARKGREY|DARKGRAY|LIME|OLIVE|YELLOWGREEN|EMERALD|MIDGREY|MIDGRAY|ORANGE|ORANGERED|PEACH|SALMON|LIGHTGREY|LIGHTGRAY|SKYBLUE|TEAL|CYAN|TURQUOISE|SILVER|BROWN|DARKBROWN|LIGHTBROWN|COFFEE|WHITE|PINK|MAGENTA|LIGHTPINK|ROSE|BLACK)\b/);return!!t&&{type:"colour",content:t[0]}},y=e=>{const t=e.match(/^(\\[#A-Z0-9]+)/);return!!t&&{type:"keycode",content:t[0]}},w=e=>{const t=e.match(/^(\?[A-Z]+)\b/);return!!t&&{type:"query",content:t[0]}},O=e=>{const t=e.match(/^((PROC|FN)[_a-zA-Z]+)\b/);return!!t&&{type:"custom",content:t[0]}},x=e=>{const t=e.match(/^([_a-zA-Z0-9]+[$|%])/);return!!t&&{type:"variable",content:t[0]}},v=e=>{const t=e.match(/^\d+/),a="#"===e[0];return t?{type:"unterminated-integer",content:e}:a?{type:"bad-hexadecimal",content:e}:{type:"illegal",content:e.split(/\b/)[0]}};var j=e=>{const t=[];for(;e.length>0;){let a=k(e)||T(e)||P(e)||S(e)||$(e)||C(e)||I(e)||E(e)||A(e)||R(e)||L(e)||B(e)||N(e)||q(e)||M(e)||D(e)||F(e)||U(e)||G(e)||H(e);t.push(a),e=e.slice(a.content.length)}return t};const k=e=>{return!!("\n"===e[0])&&{type:"linebreak",content:"\n"}},T=e=>{const t=e.match(/^( +)/);return!!t&&{type:"spaces",content:t[0]}},P=e=>{const t="{"===e[0],a=e.match(/}/);return t&&a?{type:"comment",content:e.slice(0,a.index+1)}:!!t&&{type:"unterminated-comment",content:e.split("\n")[0]}},S=e=>{const t=e.match(/^(\+|-|\*|\/|div\b|mod\b|=|<>|<=|>=|<|>|:=|not\b|and\b|or\b|xor\b)/i);return!!t&&{type:"operator",content:t[0]}},$=e=>{const t=e.match(/^(\(|\)|\[|\]|,|:|;|\.\.|\.)/);return!!t&&{type:"punctuation",content:t[0]}},C=e=>{const t="'"===e[0],a='"'===e[0],o=e.match(/[^\\](')/),n=e.match(/[^\\](")/);return t&&o?{type:"string",content:e.slice(0,o.index+2)}:t?{type:"unterminated-string",content:e.split("\n")[0]}:a&&n?{type:"string",content:e.slice(0,n.index+2)}:!!a&&{type:"unterminated-string",content:e.split("\n")[0]}},I=e=>{const t=e.match(/^(true|false)\b/i);return!!t&&{type:"boolean",content:t[0]}},E=e=>{const t=e.match(/^(%[01]+)\b/),a=e.match(/^(0b[01]+)\b/);return t?{type:"binary",content:t[0]}:!!a&&{type:"bad-binary",content:a[0]}},A=e=>{const t=e.match(/^(&[0-7]+)\b/),a=e.match(/^(0o[0-7]+)\b/);return t?{type:"octal",content:t[0]}:!!a&&{type:"bad-octal",content:a[0]}},R=e=>{const t=e.match(/^((&|#|(0x))[A-Fa-f0-9]+)\b/),a=e.match(/^(\$[A-Fa-f0-9]+)\b/);return t?{type:"bad-hexadecimal",content:t[0]}:!!a&&{type:"hexadecimal",content:a[0]}},L=e=>{const t=e.match(/^(\d+\.\d+)/),a=e.match(/^(\d+)\b/);return t?{type:"bad-decimal",content:t[0]}:!!a&&{type:"decimal",content:a[0]}},B=e=>{const t=e.match(/^(begin|const|do|downto|else|end|for|function|if|of|procedure|program|repeat|result|then|to|until|var|while)\b/i);return!!t&&{type:"keyword",content:t[0]}},N=e=>{const t=e.match(/^(array|boolean|char|integer|string)\b/i);return!!t&&{type:"type",content:t[0]}},q=e=>{const t=e.match(/^(abs|angles|antilog|arccos|arcsin|arctan|back|blank|blot|boolint|box|canvas|chr|circle|colou?r|console|copy|cos|cursor|dec|delete|detect|direction|divmult|drawxy|dump|ellblot|ellipse|exp|fill|forget|forward|heapreset|hexstr|home|hypot|inc|insert|keybuffer|keyecho|keystatus|left|length|ln|log10|lowercase|max|maxint|min|mixcols|movexy|newturtle|noupdate|oldturtle|ord|output|pause|pendown|penup|pi|pixcol|pixset|polygon|polyline|pos|power|print|qstr|qval|randcol|random|read|readln|recolour|remember|reset|resolution|rgb|right|root|setx|setxy|sety|sign|sin|sqrt|str|tan|thickness|time|timeset|trace|turnxy|update|uppercase|val|valdef|watch|write|writeln)\b/i);return!!t&&{type:"command",content:t[0]}},M=e=>{const t=e.match(/^(turt[xydtc])\b/i);return!!t&&{type:"turtle",content:t[0]}},D=e=>{const t=e.match(/^(true|false|green|darkgreen|lightgreen|seagreen|greengrey|greengray|red|darkred|lightred|maroon|redgrey|redgray|blue|darkblue|lightblue|royal|bluegrey|yellow|ochre|cream|gold|yellowgrey|yellowgray|violet|indigo|lilac|purple|darkgrey|darkgray|lime|olive|yellowgreen|emerald|midgrey|midgray|orange|orangered|peach|salmon|lightgrey|lightgray|skyblue|teal|cyan|turquoise|silver|brown|darkbrown|lightbrown|coffee|white|pink|magenta|lightpink|rose|black)\b/i);return!!t&&{type:"colour",content:t[0]}},F=e=>{const t=e.match(/^(\\[#a-z0-9]+)/i);return!!t&&{type:"keycode",content:t[0]}},U=e=>{const t=e.match(/^(\?[a-z]+)\b/i);return!!t&&{type:"query",content:t[0]}},G=e=>{const t=e.match(/^([_a-zA-Z][_a-zA-Z0-9]*)\b/);return!!t&&{type:"identifier",content:t[0]}},H=e=>({type:"illegal",content:e.split(/\b/)[0]});var z=e=>{let t=[];for(;e.length>0;){let a=W(e)||Y(e)||K(e)||X(e)||V(e)||Q(e)||_(e)||Z(e)||J(e)||ee(e)||te(e)||ae(e)||oe(e)||ne(e)||re(e)||ce(e)||se(e)||ie(e)||le(e);t.push(a),e=e.slice(a.content.length)}return t};const W=e=>{return!!("\n"===e[0])&&{type:"linebreak",content:"\n"}},Y=e=>{const t=e.match(/^( +)/);return!!t&&{type:"spaces",content:t[0]}},K=e=>{return!!e.match(/^#/)&&{type:"comment",content:e.split("\n")[0]}},X=e=>{const t=e.match(/^(\+|-|\*|\/\/|\/|%|==|!=|<=|>=|=|<|>|not\b|and\b|or\b|xor\b)/);return!!t&&{type:"operator",content:t[0]}},V=e=>{const t=e.match(/^(\(|\)|,|:)/);return!!t&&{type:"punctuation",content:t[0]}},Q=e=>{const t="'"===e[0],a='"'===e[0],o=e.match(/[^\\](')/),n=e.match(/[^\\](")/);return t&&o?{type:"string",content:e.slice(0,o.index+2)}:t?{type:"unterminated-string",content:e.split("\n")[0]}:a&&n?{type:"string",content:e.slice(0,n.index+2)}:!!a&&{type:"unterminated-string",content:e.split("\n")[0]}},_=e=>{const t=e.match(/^(True|False)\b/);return!!t&&{type:"boolean",content:t[0]}},Z=e=>{const t=e.match(/^(0b[01]+)\b/),a=e.match(/^(%[01]+)\b/);return t?{type:"binary",content:t[0]}:!!a&&{type:"bad-binary",content:a[0]}},J=e=>{const t=e.match(/^(0o[0-7]+)\b/),a=e.match(/^(&[0-7]+)\b/);return t?{type:"octal",content:t[0]}:!!a&&{type:"bad-octal",content:a[0]}},ee=e=>{const t=e.match(/^(0x[A-Fa-f0-9]+)\b/),a=e.match(/^((&|#|\$)[A-Fa-f0-9]+)\b/);return t?{type:"hexadecimal",content:t[0]}:!!a&&{type:"bad-hexadecimal",content:a[0]}},te=e=>{const t=e.match(/^(\d+\.\d+)/),a=e.match(/^(\d+)\b/);return t?{type:"bad-decimal",content:t[0]}:!!a&&{type:"decimal",content:a[0]}},ae=e=>{const t=e.match(/^(def|else|for|global|if|in|nonlocal|pass|range|return|while)\b/);return!!t&&{type:"keyword",content:t[0]}},oe=e=>{const t=e.match(/^(abs|acos|angles|antilog|asin|atan|back|blank|blot|boolint|box|canvas|chr|circle|colou?r|console|copy|cos|cursor|dec|detect|direction|divmult|drawxy|dump|ellblot|ellipse|exp|fill|find|forget|forward|heapreset|hex|home|hypot|inc|input|insert|int|intdef|keybuffer|keyecho|keystatus|left|len|ln|log10|lower|max|maxint|min|mixcols|movexy|newturtle|noupdate|oldturtle|ord|output|pause|pendown|penup|pi|pixcol|pixset|polygon|polyline|power|print|qstr|qval|randcol|randint|read|readline|recolour|remember|reset|resolution|rgb|right|root|setx|setxy|sety|sign|sin|sqrt|str|tan|thickness|time|timeset|trace|turnxy|update|upper|watch|write|writeline)\b/);return!!t&&{type:"command",content:t[0]}},ne=e=>{const t=e.match(/^(turt[xydtc])\b/);return!!t&&{type:"turtle",content:t[0]}},re=e=>{const t=e.match(/^(green|darkgreen|lightgreen|seagreen|greengrey|greengray|red|darkred|lightred|maroon|redgrey|redgray|blue|darkblue|lightblue|royal|bluegrey|yellow|ochre|cream|gold|yellowgrey|yellowgray|violet|indigo|lilac|purple|darkgrey|darkgray|lime|olive|yellowgreen|emerald|midgrey|midgray|orange|orangered|peach|salmon|lightgrey|lightgray|skyblue|teal|cyan|turquoise|silver|brown|darkbrown|lightbrown|coffee|white|pink|magenta|lightpink|rose|black)\b/);return!!t&&{type:"colour",content:t[0]}},ce=e=>{const t=e.match(/^(\\[#a-z0-9]+)/i);return!!t&&{type:"keycode",content:t[0]}},se=e=>{const t=e.match(/^(\?[a-z]+)\b/);return!!t&&{type:"query",content:t[0]}},ie=e=>{const t=e.match(/^([_a-zA-Z][_a-zA-Z0-9]*)\b/);return!!t&&{type:"identifier",content:t[0]}},le=e=>({type:"illegal",content:e.split(/\b/)[0]});t.a=((e,t)=>{return{BASIC:o,Pascal:j,Python:z}[t](e)})},function(e,t){const a=(e,t,a)=>({index:e,title:t,examples:a});e.exports.help=[a(1,"Drawing, counting, and procedures/methods",["DrawPause","OlympicRings1","OlympicRings2","ThePlough","ForLoop","Circles","NestedLoops","SimpleProcedure","ColourSpiral","ParameterProcedure","Polygons","YouAreHere"]),a(2,"Further commands and structures",["Stars","PolygonRings","Clock","DigitalClock","CycleColours","Triangles","Flashlights","RefParams","Balls3D","AskInput","StringFunctions","MathFunctions","TrigonometricGraphs"]),a(3,"Smooth movement and interaction",["MovingBall","BouncingBall","TurtleMove","TurtleBounce","MultiBounce","GravitySteps","SolarSystem","SimpleDraw","FiveTurtles"]),a(4,"Complex applications",["PaintApp","SnakeGame","Shoot","Mandelbrot","Quine","NoughtsAndCrosses"]),a(5,"Artificial life and social models",["GameOfLife","Schelling","IteratedPD"])],e.exports.csac=[a(1,"Introduction, Computer Science for Fun, and Turtling",["DrawPause","ColourSpiral"]),a(2,"Animation and Movement",["MovingBall","BouncingBall","TurtleMove","TurtleBounce","AskInput"]),a(3,"Computing in Physics: Cannons and Rockets",["GravitySteps","AimCannon","AutoCannon","Launch"]),a(4,"Cellular Automata: Modelling Disease, 'Life', and Shell Patterns",["LifeStart","Disease","GameOfLife","Automata"]),a(5,"Computing in Chemistry: Diffusion and Brownian Motion",["Diffusion","BrownianMotion"]),a(6,"Computing in Biology: Evolution and Behaviour",["Cheetahs","SexRatio","Flocking"]),a(7,"Chaos and Self-Similarity",["Logistic","LogisticSpider","Mandelbrot","MandelbrotMini","MandelbrotSpectrum","MandelbrotMiniSpectrum","Triangles","Sierpinski","SierpinskiDots","IFSBackground","SierpinskiColour","SierpinskiIFS","BarnsleyIFS","BarnsleyColour","TreeIFS","DragonIFS","DragonColour"]),a(8,"Waves and Quantum Mechanics",["Interference","WaveSuperposer","TwoSlits"]),a(9,"Games and Computer Science",["KnightsTour","Nim","NoughtsAndCrosses"]),a(10,"Philosophy and Social Science",["Schelling","IteratedPD"])],e.exports.names={AimCannon:"Firing a cannon (manual)",AskInput:"Asking for typed input",AutoCannon:"Firing a cannon (automatic)",Automata:"One-dimensional cellular automata",Balls3D:"3D colour effects",BarnsleyColour:"Barnsley colour",BarnsleyIFS:"Barnsley IFS",BouncingBall:"Bouncing ball (using variables)",BrownianMotion:"Brownian motion",Cheetahs:"Cheetahs and gazelles",Circles:"Circling circles",Clock:"Analogue clock (using REPEAT)",ColourSpiral:"Spiral of colours",CycleColours:"Cycling colours (using MOD)",Diffusion:"A model of diffusion",DigitalClock:"Digital clock (using IF and WHILE)",Disease:"Spread of disease",DragonColour:"Dragon colour",DragonIFS:"Dragon IFS",DrawPause:"Simple drawing with pauses",FiveTurtles:"Five turtles moving to the mouse",Flashlights:"Using Booleans",Flocking:"Flocking behaviour",ForLoop:"FOR (counting) loop",GameOfLife:"Conway's Game of Life",GravitySteps:"Movement under gravity",IFSBackground:"Iterated function systems (IFS) background",Interference:"Interference",IteratedPD:"Iterated Prisoner's Dilemma",KnightsTour:"Knight's tour",Launch:"Launching a rocket into orbit",LifeStart:"Initialising Conway's Game of Life",Logistic:"Logistic equation",LogisticSpider:"Logistic spider",Mandelbrot:"Mandelbrot set",MandelbrotMini:"Mandelbrot mini",MandelbrotMiniSpectrum:"Mandelbrot mini spectrum",MandelbrotSpectrum:"Mandelbrot spectrum",MathFunctions:"Mathematical functions",MovingBall:"Moving ball (using variables)",MultiBounce:"Multiple bouncing balls",NestedLoops:"Nested FOR loops",Nim:"Nim",NoughtsAndCrosses:"Noughts and crosses",OlympicRings1:"Olympic rings 1 (using PENUP)",OlympicRings2:"Olympic rings 2 (with variable)",PaintApp:"Painting application",ParameterProcedure:"Procedure with parameter",PolygonRings:"Polygon rings",Polygons:"POLYGON and POLYLINE",Quine:"Quine (self-replicating) program",RefParams:"Reference parameters",Schelling:"Schelling's segregation model",SexRatio:"The sex ratio",Shoot:"Arcade shooting game",Sierpinski:"Sierpinski triangle",SierpinskiColour:"Sierpinski colour",SierpinskiDots:"Sierpinski dots",SierpinskiIFS:"Sierpinski IFS",SimpleDraw:"Drawing to the mouse",SimpleProcedure:"Simple procedure",SnakeGame:"Snake (classic game)",SolarSystem:"Solar system (using ARRAY)",Stars:"Stars (using ANGLES and FORGET)",StringFunctions:"String functions",ThePlough:"The plough constellation",TreeIFS:"Tree IFS",Triangles:"Recursive triangles",TrigonometricGraphs:"Trigonometric graphs",TurtleBounce:"Bouncing ball (using the Turtle)",TurtleMove:"Moving ball (using the Turtle)",TwoSlits:"Young's two-slit experiment",WaveSuperposer:"Wave superposer",YouAreHere:"Text and arrow (using PRINT)"}},function(e,t,a){"use strict";a.d(t,"b",function(){return g}),a.d(t,"a",function(){return f});var o=a(1),n=a(4),r=a(3);const c=Object(o.a)("input",{type:"text",placeholder:"filename",on:[{type:"input",callback:e=>{Object(r.b)("set-name",e.currentTarget.value)}}]}),s=Object(o.a)("select",{content:n.f.map(e=>Object(o.a)("option",{content:e,value:e})),on:[{type:"change",callback:e=>{Object(r.b)("set-language",e.currentTarget.value)}}]}),i=Object(o.a)("button",{content:"RUN",classes:["tsx-run-halt-button"],on:[{type:"click",callback:e=>{Object(r.b)("machine-run-halt"),e.currentTarget.blur()}}]}),l=Object(o.a)("button",{content:"&#10074;&#10074;",classes:["tsx-play-pause-button"],on:[{type:"click",callback:e=>{Object(r.b)("machine-play-pause"),e.currentTarget.blur()}}]}),d=Object(o.a)("dd",{classes:["tsx-turtxy"],content:"500"}),u=Object(o.a)("dd",{classes:["tsx-turtxy"],content:"500"}),h=Object(o.a)("dd",{classes:["tsx-turtd"],content:"0"}),p=Object(o.a)("dd",{classes:["tsx-turttc"],content:"2"}),b=Object(o.a)("dd",{classes:["tsx-turttc"],style:"background:#000;"}),m=Object(o.a)("dl",{classes:["tsx-turtle-properties"],content:[Object(o.a)("dt",{content:"X"}),d,Object(o.a)("dt",{content:"Y"}),u,Object(o.a)("dt",{content:"D"}),h,Object(o.a)("dt",{content:"T"}),p,Object(o.a)("dt",{content:"C"}),b]}),g=Object(o.a)("div",{classes:["tsx-controls"],content:[c,s]}),f=Object(o.a)("div",{classes:["tsx-controls"],content:[i,l,m]});Object(r.a)("name-changed",e=>{c.value=e}),Object(r.a)("language-changed",e=>{s.value=e}),Object(r.a)("machine-started",()=>{i.innerHTML="HALT",l.innerHTML="&#10074;&#10074;",d.innerHTML="500",u.innerHTML="500",h.innerHTML="0",p.innerHTML="2",b.style.background="#000"}),Object(r.a)("machine-stopped",()=>{i.innerHTML="RUN",l.innerHTML="&#10074;&#10074;"}),Object(r.a)("machine-played",()=>{l.innerHTML="&#10074;&#10074;"}),Object(r.a)("machine-paused",()=>{l.innerHTML="&#9658;"}),Object(r.a)("turtx-changed",e=>{d.innerHTML=e.toString(10)}),Object(r.a)("turty-changed",e=>{u.innerHTML=e.toString(10)}),Object(r.a)("turtd-changed",e=>{h.innerHTML=e.toString(10)}),Object(r.a)("turtt-changed",e=>{p.innerHTML=e.toString(10)}),Object(r.a)("turtc-changed",e=>{b.style.background=Object(o.c)(e)})},function(e,t,a){"use strict";a.r(t);var o={};a.r(o),a.d(o,"BASIC",function(){return h}),a.d(o,"Pascal",function(){return p}),a.d(o,"Python",function(){return b});var n={};a.r(n),a.d(n,"BASIC",function(){return m}),a.d(n,"Pascal",function(){return g}),a.d(n,"Python",function(){return f});var r={};a.r(r),a.d(r,"BASIC",function(){return y}),a.d(r,"Pascal",function(){return w}),a.d(r,"Python",function(){return O});var c={};a.r(c),a.d(c,"BASIC",function(){return x}),a.d(c,"Pascal",function(){return v}),a.d(c,"Python",function(){return j});var s=a(8),i=a(1),l=a(4),d=a(5),u=a(2);const h=[Object(i.a)("h3",{content:"Programs and Procedures: the Basics"}),Object(i.a)("p",{content:"The simplest BASIC programs take this form:"}),Object(i.a)("pre",{content:`<code>${Object(u.a)("REM myprog  [this is a comment]\nREM [program commands]\nEND","BASIC")}</code>`}),Object(i.a)("p",{content:`The first couple of Turtle example programs (from the Help menu) are like this. But the &lsquo;Olympic rings 2&rsquo; program introduces a global variable: it is called <code>${Object(u.a)("ringsize%","BASIC")}</code> and specifies the size of the rings. Such variables are &lsquo;declared&rsquo; by assigning a value, like this:`}),Object(i.a)("pre",{content:`<code>${Object(u.a)("ringsize% = 130\nREM [other program commands]\nEND","BASIC")}</code>`}),Object(i.a)("p",{content:"Complicated programs are usually divided into subroutines, to separate the various tasks and make them easier to understand. BASIC has two types of subroutine, procedures (which are like mini-programs) and functions (which are designed to calculate some value)."}),Object(i.a)("p",{content:`The &lsquo;Simple procedure&rsquo; example program has a procedure to draw a &lsquo;prong&rsquo; – a line ending in a blot – and then return to the starting point. Procedures fit into a BASIC program after the end of the main program, indicated by <code>${Object(u.a)("END","BASIC")}</code>. They look like this:`}),Object(i.a)("pre",{content:`<code>${Object(u.a)("DEF PROCmyprocedure(par1%)\n  LOCAL local1%, local2$\n  REM [procedure commands]\nENDPROC","BASIC")}</code>`}),Object(i.a)("p",{content:`All procedure names must begin with &lsquo;PROC&rsquo;, e.g. &lsquo;PROCmyprocedure&rsquo;. A procedure can have its own local variables, declared using <code>${Object(u.a)("LOCAL","BASIC")}</code>. A <code>${Object(u.a)("PRIVATE","BASIC")}</code> variable is declared the same way, but unlike a <code>${Object(u.a)("LOCAL","BASIC")}</code> variable, it retains its value between procedure calls. A procedure can also have parameters (or &lsquo;arguments&rsquo;) that are values sent into the subroutine when it is called from the program, and given a name within the subroutine (e.g. <code>${Object(u.a)("par1%","BASIC")}</code> above).`}),Object(i.a)("p",{content:"A function is similar to a procedure, with the addition that it returns a value. Also a function name must begin with &lsquo;FN&rsquo;, for example:"}),Object(i.a)("pre",{content:`<code>${Object(u.a)('DEF FNmyfunction(par1%)\n  REM [procedure commands]\n  = "output"',"BASIC")}</code>`}),Object(i.a)("p",{content:`The last statement of a function always begins with <code>${Object(u.a)("=","BASIC")}</code> and the <code>${Object(u.a)('"output"',"BASIC")}</code> provides the return value for the function.`}),Object(i.a)("h4",{content:"Reserved Words, Declarations, Types, and Variables"}),Object(i.a)("p",{content:`The words <code>${Object(u.a)("REM","BASIC")}</code>, <code>${Object(u.a)("END","BASIC")}</code>, <code>${Object(u.a)("DEF","BASIC")}</code>, etc. are all capitalized to emphasise the program structure. BASIC takes notice of capitalization. These three words are also in red here (or gray for comments) – this is to indicate that they are special &lsquo;reserved&rsquo; words that cannot be used for other purposes (so you can&rsquo;t call a procedure or variable &lsquo;END&rsquo;).`}),Object(i.a)("p",{content:"Variables all end with either a &lsquo;%&rsquo; or a &lsquo;$&rsquo; – Turtle will tell you if you forget! Turtle BASIC allows two types of variables:"}),Object(i.a)("table",{classes:["tsx-help-table"],content:[Object(i.a)("tr",{content:"<td>integer</td><td>whole number (name ends in &lsquo;%&rsquo;)</td>"}),Object(i.a)("tr",{content:"<td>string</td><td>sequence of characters (name ends in &lsquo;$&rsquo;)</td>"})]}),Object(i.a)("p",{content:`Most of your variables are likely to be integer variables, like a transparent box that stores a number. You can look at the box to see which number it contains at any time, and you can change the number by assigning a new value. In the &lsquo;Olympic rings 2&rsquo; example program, <code>${Object(u.a)("ringsize%","BASIC")}</code> is declared by assigning the value <code>${Object(u.a)("130","BASIC")}</code> using the command:`}),Object(i.a)("pre",{content:`<code>${Object(u.a)("ringsize% = 130","BASIC")}</code>`}),Object(i.a)("p",{content:"Five special integer variables are &lsquo;built in&rsquo; from the start, and these are called the Turtle&rsquo;s fields:"}),Object(i.a)("table",{classes:["tsx-help-table"],content:[Object(i.a)("tr",{content:`<td><code>${Object(u.a)("TURTX%","BASIC")}</code></td><td>The Turtle&rsquo;s x-coordinate</td>`}),Object(i.a)("tr",{content:`<td><code>${Object(u.a)("TURTY%","BASIC")}</code></td><td>The Turtle&rsquo;s y-coordinate</td>`}),Object(i.a)("tr",{content:`<td><code>${Object(u.a)("TURTD%","BASIC")}</code></td><td>The Turtle&rsquo;s direction</td>`}),Object(i.a)("tr",{content:`<td><code>${Object(u.a)("TURTT%","BASIC")}</code></td><td>The Turtle&rsquo;s pen thickness</td>`}),Object(i.a)("tr",{content:`<td><code>${Object(u.a)("TURTC%","BASIC")}</code></td><td>The Turtle&rsquo;s colour setting</td>`})]}),Object(i.a)("p",{content:"These automatically change to keep track of the Turtle&rsquo;s state, and are shown above the Canvas."}),Object(i.a)("p",{content:`For a use of <code>${Object(u.a)("TURTD%","BASIC")}</code>, see the &lsquo;Simple procedure&rsquo; example.`})],p=[Object(i.a)("h3",{content:"Programs and Procedures: the Basics"}),Object(i.a)("p",{content:"The simplest Pascal programs take this form:"}),Object(i.a)("pre",{content:`<code>${Object(u.a)("PROGRAM myprog;\nBEGIN\n  {program commands}\nEND.","Pascal")}</code>`}),Object(i.a)("p",{content:`The first couple of Turtle example programs (from the Help menu) are like this. But the &lsquo;Olympic rings 2&rsquo; program introduces a global variable: it is called <code>${Object(u.a)("ringsize","Pascal")}</code> and specifies the size of the rings. Such variables are &lsquo;declared&rsquo; at the beginning of the program, like this:`}),Object(i.a)("pre",{content:`<code>${Object(u.a)("PROGRAM myprog;\nVAR global1: integer;\n    global2, global3: integer;\nBEGIN\n  {program commands}\nEND.","Pascal")}</code>`}),Object(i.a)("p",{content:`Complicated programs are usually divided into subroutines, to separate the various tasks and make them easier to understand. Pascal has two types of subroutine, procedures (which are like mini-programs) and functions (which are designed to calculate some value). The &lsquo;Simple procedure&rsquo; example program has a procedure to draw a &lsquo;prong&rsquo; – a line ending in a blot – and then return to the starting point. Procedures fit into a Pascal program after the global variables and before the <code>${Object(u.a)("BEGIN","Pascal")}</code> of the main program; they look like this:`}),Object(i.a)("pre",{content:`<code>${Object(u.a)("Procedure myprocedure(par1: integer);\nVar local1, local2: integer;\nBegin\n  {procedure commands}\nEnd;","Pascal")}</code>`}),Object(i.a)("p",{content:`A procedure can have its own local variables, declared much like global variables. But it can also have parameters (or &lsquo;arguments&rsquo;) that are values sent into the subroutine when it is called from the program, and given a name within the subroutine (e.g. <code>${Object(u.a)("par1","Pascal")}</code> above).`}),Object(i.a)("h4",{content:"Reserved Words, Declarations, Types, and Variables"}),Object(i.a)("p",{content:`The words <code>${Object(u.a)("PROGRAM","Pascal")}</code>, <code>${Object(u.a)("BEGIN","Pascal")}</code> and <code>${Object(u.a)("END","Pascal")}</code> are often capitalized to emphasise the program structure, but Pascal actually takes no notice of capitalization (so you could write <code>${Object(u.a)("program","Pascal")}</code>, <code>${Object(u.a)("Program","Pascal")}</code> or even <code>${Object(u.a)("PrOgRaM","Pascal")}</code>!). These three words are also in red here – this is to indicate that they are special &lsquo;reserved&rsquo; words that cannot be used for other purposes (so you can&rsquo;t call a procedure or variable &lsquo;begin&rsquo;). As well as variables, a program can use constants to give a convenient name to a particular value. Any constants must be &lsquo;declared&rsquo; even before the variables, like this:`}),Object(i.a)("pre",{content:`<code>${Object(u.a)("PROGRAM myprog;\nCONST limit = 4;\nVAR global1: integer;\n{and so on}","Pascal")}</code>`}),Object(i.a)("p",{content:`Notice that variable and constant declarations must all end with a semicolon – Turtle will tell you if you forget! Notice also that while constants are given a value when declared (e.g. <code>${Object(u.a)("limit","Pascal")}</code> is given the value <code>${Object(u.a)("4","Pascal")}</code> above), variables are given a <em>type</em>, to indicate the sort of data that they can store. Turtle Pascal allows four main types of variables:`}),Object(i.a)("table",{classes:["tsx-help-table"],content:[Object(i.a)("tr",{content:"<td>integer</td><td>whole number</td>"}),Object(i.a)("tr",{content:"<td>boolean</td><td>true or false</td>"}),Object(i.a)("tr",{content:"<td>char</td><td>single character</td>"}),Object(i.a)("tr",{content:"<td>string</td><td>sequence of character(s)</td>"})]}),Object(i.a)("p",{content:"Most of your variables are likely to be integer variables, like a transparent box that stores a number. You can look at the box to see which number it contains at any time, and you can change the number by assigning a new value, e.g."}),Object(i.a)("pre",{content:`<code>${Object(u.a)("VAR ringsize: integer;","Pascal")}</code>`}),Object(i.a)("p",{content:`is declared in the &lsquo;Olympic rings 2&rsquo; example program, and <code>${Object(u.a)("ringsize","Pascal")}</code> is later assigned the value <code>${Object(u.a)("130","Pascal")}</code> using the command:`}),Object(i.a)("pre",{content:`<code>${Object(u.a)("ringsize := 130;","Pascal")}</code>`}),Object(i.a)("p",{content:"Five special integer variables are &lsquo;built in&rsquo; from the start, and these are called the Turtle&rsquo;s fields:"}),Object(i.a)("table",{classes:["tsx-help-table"],content:[Object(i.a)("tr",{content:`<td><code>${Object(u.a)("turtx","Pascal")}</code></td><td>The Turtle’s x-coordinate</td>`}),Object(i.a)("tr",{content:`<td><code>${Object(u.a)("turty","Pascal")}</code></td><td>The Turtle’s y-coordinate</td>`}),Object(i.a)("tr",{content:`<td><code>${Object(u.a)("turtd","Pascal")}</code></td><td>The Turtle’s direction</td>`}),Object(i.a)("tr",{content:`<td><code>${Object(u.a)("turtt","Pascal")}</code></td><td>The Turtle’s pen thickness</td>`}),Object(i.a)("tr",{content:`<td><code>${Object(u.a)("turtc","Pascal")}</code></td><td>The Turtle’s colour setting</td>`})]}),Object(i.a)("p",{content:"These automatically change to keep track of the Turtle&rsquo;s state, and are shown above the Canvas."}),Object(i.a)("p",{content:`For a use of <code>${Object(u.a)("turtd","Pascal")}</code>, see the &lsquo;Simple procedure&rsquo; example.`})],b=[Object(i.a)("h3",{content:"Programs and Procedures: the Basics"}),Object(i.a)("p",{content:"The simplest Python programs take this form:"}),Object(i.a)("pre",{content:`<code>${Object(u.a)("# myprog  [this is a comment]\ndef main():\n  # program commands","Python")}</code>`}),Object(i.a)("p",{content:`The first couple of Turtle example programs (from the Help menu) are like this. But the &lsquo;Olympic rings 2&rsquo; program introduces a variable: it is called <code>${Object(u.a)("ringsize","Python")}</code> and specifies the size of the rings. Such variables are &lsquo;declared&rsquo; by assigning a value, like this:`}),Object(i.a)("pre",{content:`<code>${Object(u.a)("ringsize = 130\n# other program commands","Python")}</code>`}),Object(i.a)("p",{content:`Complicated programs are usually divided into functions, to separate the various tasks and make them easier to understand. The &lsquo;Simple procedure&rsquo; example program has a function to draw a &lsquo;prong&rsquo; – a line ending in a blot – and then return to the starting point. Functions fit into a Python program before the <code>${Object(u.a)("main()","Python")}</code> function and may be nested; they look like this:`}),Object(i.a)("pre",{content:`<code>${Object(u.a)("def outsidefunction(par1):\n  global global1, global2        # optional\n  nonlocal nonlocal1, nonlocal2  # optional\n\n  def insidefunction():\n    # insidefunction&rsquo;s commands\n\n  # outsidefunction&rsquo;s commands","Python")}`}),Object(i.a)("p",{content:`Nested functions must occur after any <code>${Object(u.a)("global","Python")}</code> or <code>${Object(u.a)("nonlocal","Python")}</code> declarations and before the function&rsquo;s commands. Functions may return a value like this:`}),Object(i.a)("pre",{content:`<code>${Object(u.a)("def fname(par1):\n  # function commands\n  return somevalue","Python")}</code>`}),Object(i.a)("p",{content:"If there is no return statement then the function behaves like a procedure in Pascal or BASIC."}),Object(i.a)("p",{content:`A function can also have parameters (or &lsquo;arguments&rsquo;) that are values sent into the subroutine when it is called from the program, and given a name within the subroutine (e.g. <code>${Object(u.a)("par1","Python")}</code> above).`}),Object(i.a)("h4",{content:"Reserved Words, Declarations, Types, and Variables"}),Object(i.a)("p",{content:`The words <code>${Object(u.a)("def","Python")}</code>, <code>${Object(u.a)("return","Python")}</code>, <code>${Object(u.a)("global","Python")}</code>, etc. must all be in lower case; Python takes notice of capitalisation! These three words are also in red here – this is to indicate that they are special &lsquo;reserved&rsquo; words that cannot be used for other purposes (so you can&rsquo;t call a procedure or variable &lsquo;return&rsquo;). Variables are of two types, depending on the sort of data that they can store. Turtle Python allows two main types of variables:`}),Object(i.a)("table",{classes:["tsx-help-table"],content:[Object(i.a)("tr",{content:"<td>integer</td><td>whole number</td>"}),Object(i.a)("tr",{content:"<td>string</td><td>sequence of character(s)</td>"})]}),Object(i.a)("p",{content:`Most of your variables are likely to be integer variables, like a transparent box that stores a number. You can look at the box to see which number it contains at any time, and you can change the number by assigning a new value. In the &lsquo;Olympic rings 2&rsquo; example program, <code>${Object(u.a)("ringsize","Python")}</code> is declared by assigning the value <span>${Object(u.a)("130","Python")}</span> using the command:`}),Object(i.a)("pre",{content:`<code>${Object(u.a)("ringsize = 130","Python")}</code>`}),Object(i.a)("p",{content:`Note that sometimes Python cannot automatically determine what type a variable is meant to be. If this occurs an error message will be generated. To solve these cases the type of the variable can be forced into an integer by adding zero, e.g. <code>${Object(u.a)("varname + 0","Python")}</code>, or forced into a string by adding the null string, e.g. <code>${Object(u.a)("varname + ''","Python")}</code>.`}),Object(i.a)("p",{content:"Five special global integer variables are &lsquo;built in&rsquo; from the start, and these are called the Turtle&rsquo;s fields:"}),Object(i.a)("table",{classes:["tsx-help-table"],content:[Object(i.a)("tr",{content:`<td><code>${Object(u.a)("turtx","Python")}</code></td><td>The Turtle&rsquo;s x-coordinate</td>`}),Object(i.a)("tr",{content:`<td><code>${Object(u.a)("turty","Python")}</code></td><td>The Turtle&rsquo;s y-coordinate</td>`}),Object(i.a)("tr",{content:`<td><code>${Object(u.a)("turtd","Python")}</code></td><td>The Turtle&rsquo;s direction</td>`}),Object(i.a)("tr",{content:`<td><code>${Object(u.a)("turtt","Python")}</code></td><td>The Turtle&rsquo;s pen thickness</td>`}),Object(i.a)("tr",{content:`<td><code>${Object(u.a)("turtc","Python")}</code></td><td>The Turtle&rsquo;s colour setting</td>`})]}),Object(i.a)("p",{content:"These automatically change to keep track of the Turtle&rsquo;s state, and are shown above the Canvas."}),Object(i.a)("p",{content:`For a use of <code>${Object(u.a)("turtd","Python")}</code>, see the &lsquo;Simple procedure&rsquo; example.`})],m=[Object(i.a)("h3",{content:"Command Structures"}),Object(i.a)("p",{content:"Selection and ordering of commands is done by <em>sequencing</em>, <em>conditional selection</em>, and <em>looping</em>."}),Object(i.a)("h4",{content:"Sequencing of Commands"}),Object(i.a)("p",{content:"Commands to be performed in sequence are usually placed in the appropriate order within the program, e.g.:"}),Object(i.a)("pre",{content:`<code>${Object(u.a)("COLOUR(GREEN)\nBLOT(100)\nPAUSE(1000)\nCOLOUR(RED)\nFORWARD(450) REM etc.","BASIC")}</code>`}),Object(i.a)("p",{content:"(From the first example program in the Help menu.)"}),Object(i.a)("h4",{content:"Conditional Selection of Commands"}),Object(i.a)("p",{content:`Suppose you want to draw a blot with a given radius (stored as the integer variable <code>${Object(u.a)("radius%","BASIC")}</code>), but only if that value is less than 500; do it like this:`}),Object(i.a)("pre",{content:`<code>${Object(u.a)("IF radius% < 500 THEN\n  BLOT(radius%)\nENDIF","BASIC")}</code>`}),Object(i.a)("p",{content:`If you want to do something different when the condition is not met (e.g. drawing a blot with half the radius), extend the <code>${Object(u.a)("IF - THEN","BASIC")}</code> structure by adding <code>${Object(u.a)("ELSE","BASIC")}</code> and then the new command:`}),Object(i.a)("pre",{content:`<code>${Object(u.a)("IF radius% < 500 THEN\n  BLOT(radius%)\nELSE\n  BLOT(radius% / 2)\nENDIF","BASIC")}</code>`}),Object(i.a)("h4",{content:"Grouping of Commands"}),Object(i.a)("p",{content:`A sequence of commands within an <code>${Object(u.a)("IF - THEN - ELSE - ENDIF","BASIC")}</code> structure is always treated as a single command. The <code>${Object(u.a)("ELSE","BASIC")}</code> and <code>${Object(u.a)("ENDIF","BASIC")}</code> words bracket off the sequence of commands. (Another possibility is to package them into a procedure.) You can also write these on a single line without the <code>${Object(u.a)("ENDIF","BASIC")}</code>, like this:`}),Object(i.a)("pre",{content:`<code>${Object(u.a)("IF radius% < 500 THEN BLOT(radius%)","BASIC")}</code>`}),Object(i.a)("h4",{content:"Spacing, Indenting, Auto-Formatting"}),Object(i.a)("p",{content:"Unnecessary &lsquo;white space&rsquo; is ignored by BASIC, so you can use line breaks and indenting to make the structure of your program easy to read. However, each statement must be on its own line, unless separated by a colon &lsquo;:&rsquo;."}),Object(i.a)("h4",{content:"Looping Structures"}),Object(i.a)("p",{content:`BASIC provides three different structures for looping (or &lsquo;iterating&rsquo;) commands. If you know in advance how many times you want to loop – or you want to &lsquo;loop over&rsquo; a particular range of values (e.g. from 1 to 200), then the simplest is a &lsquo;<code>${Object(u.a)("FOR","BASIC")}</code> loop&rsquo; (or &lsquo;counting loop&rsquo;):`}),Object(i.a)("pre",{content:`<code>${Object(u.a)("FOR count% = 1 TO 200\n  FORWARD(count% / 3)\n  RIGHT(5)\n  REM etc.\nNEXT","BASIC")}</code>`}),Object(i.a)("p",{content:`(From the first <code>${Object(u.a)("FOR","BASIC")}</code> loop example program in the Help menu.)`}),Object(i.a)("p",{content:`Here, <code>${Object(u.a)("NEXT","BASIC")}</code> is used to bracket together a number of commands, and indenting is used to show the structure.`}),Object(i.a)("p",{content:`To count downwards, use <code>${Object(u.a)("STEP -1","BASIC")}</code> at then end (as in the &lsquo;Procedure with parameter&rsquo; example program).`}),Object(i.a)("p",{content:`In a <code>${Object(u.a)("FOR","BASIC")}</code> loop, the &lsquo;loop variable&rsquo; (here <code>${Object(u.a)("count%","BASIC")}</code>) is given in turn each of the values in the range (here 1, 2, 3, &hellip;, 199, 200), and the loop instructions are performed each time. So in the example above, a spiral is drawn as the Turtle moves forward gradually more and more (as <code>${Object(u.a)("count%","BASIC")}</code> increases).`}),Object(i.a)("p",{content:"If instead of looping a specific number of times, you want to loop through some sequence of commands until some particular condition becomes true, then you can use:"}),Object(i.a)("pre",{content:`<code>${Object(u.a)("REPEAT\n  REM command1\n  REM command2 (etc.)\nUNTIL REM condition","BASIC")}</code>`}),Object(i.a)("p",{content:`The &lsquo;Simple procedure&rsquo; example program does this, looping until the Turtle is pointing directly north (i.e., <code>${Object(u.a)("TURTD% = 0","BASIC")}</code>).`}),Object(i.a)("p",{content:"Alternatively, you can loop through a sequence of commands while some condition is true (so that it stops when the condition becomes false):"}),Object(i.a)("pre",{content:`<code>${Object(u.a)("WHILE REM condition\n  REM sequence of commands\nENDWHILE","BASIC")}</code>`}),Object(i.a)("p",{content:`Things that can be done with a <code>${Object(u.a)("REPEAT","BASIC")}</code> loop can equally be done with a <code>${Object(u.a)("WHILE","BASIC")}</code> loop (and vice-versa), but sometimes one is more natural than the other. Notice also that a <code>${Object(u.a)("REPEAT","BASIC")}</code> loop always executes the sequence of commands at least once, because it tests the condition at the end of the loop. But a <code>${Object(u.a)("WHILE","BASIC")}</code> loop tests the condition <em>before</em> executing the sequence of commands, and so will not execute them even once if condition is false to start with. (For examples of the various loops, see the second set of example programs, &lsquo;Further commands and structures&rsquo;.)`})],g=[Object(i.a)("h3",{content:"Command Structures"}),Object(i.a)("p",{content:"Selection and ordering of commands is done by <em>sequencing</em>, <em>conditional selection</em>, and <em>looping</em>."}),Object(i.a)("h4",{content:"Sequencing of Commands"}),Object(i.a)("p",{content:"Commands to be performed in sequence are usually placed in the appropriate order within the program, separated by semicolons, e.g.:"}),Object(i.a)("pre",{content:`<code>${Object(u.a)("colour(green);\nblot(100);\npause(1000);\ncolour(red);\nforward(450); {etc.}","Pascal")}</code>`}),Object(i.a)("p",{content:"(From the first example program in the Help menu.)"}),Object(i.a)("h4",{content:"Conditional Selection of Commands"}),Object(i.a)("p",{content:`Suppose you want to draw a blot with a given radius (stored as the integer variable <code>${Object(u.a)("radius","Pascal")}</code>), but only if that value is less than 500; do it like this:`}),Object(i.a)("pre",{content:`<code>${Object(u.a)("if radius < 500 then\n  blot(radius);","Pascal")}</code>`}),Object(i.a)("p",{content:`If you want to do something different when the condition is not met (e.g. drawing a blot with half the radius), extend the <code>${Object(u.a)("if condition then","Pascal")}</code> structure by adding <code>${Object(u.a)("else","Pascal")}</code> and then the new command:`}),Object(i.a)("pre",{content:`<code>${Object(u.a)("if radius < 500 then\n  blot(radius)\nelse\n  blot(radius / 2);","Pascal")}</code>`}),Object(i.a)("p",{content:`Notice that this is a single complex command, so you must not put a semicolon before the <code>${Object(u.a)("else","Pascal")}</code> (if you do, Turtle will give you a warning).`}),Object(i.a)("h4",{content:"Grouping of Commands"}),Object(i.a)("p",{content:`Sometimes you will want to do a sequence of commands within an <code>${Object(u.a)("if {condition} then {command} else","Pascal")}</code> structure, in which case you can bracket them between <code>${Object(u.a)("begin","Pascal")}</code> and <code>${Object(u.a)("end","Pascal")}</code>, e.g.`}),Object(i.a)("pre",{content:`<code>${Object(u.a)("if {condition} then\n  begin\n    {sequence1}\n  end\nelse\n  begin\n    {sequence2}\n  end;","Pascal")}</code>`}),Object(i.a)("p",{content:"Any such bracketed sequence of commands is always treated as a single command. (Another possibility is to package them into a procedure.)"}),Object(i.a)("h4",{content:"Spacing, Indenting, Auto-Formatting"}),Object(i.a)("p",{content:"Unnecessary &lsquo;white space&rsquo; is ignored by Pascal, so you can use line breaks and indenting to make the structure of your program easy to read."}),Object(i.a)("h4",{content:"Looping Structures"}),Object(i.a)("p",{content:`Pascal provides three different structures for looping (or &lsquo;iterating&rsquo;) commands. If you know in advance how many times you want to loop – or you want to &lsquo;loop over&rsquo; a particular range of values (e.g. from 1 to 200), then the simplest is a &lsquo;<code>${Object(u.a)("for","Pascal")}</code> loop&rsquo; (or &lsquo;counting loop&rsquo;):`}),Object(i.a)("pre",{content:`<code>${Object(u.a)("for count := 1 to 200 do\n  begin\n    forward(count / 3);\n    right(5);\n    {etc.}\n  end;","Pascal")}</code>`}),Object(i.a)("p",{content:`(From the first <code>${Object(u.a)("for","Pascal")}</code> loop example program in the Help menu.)`}),Object(i.a)("p",{content:`Again <code>${Object(u.a)("begin {commands} end","Pascal")}</code> is used to bracket together a number of commands, and indenting is used to show the structure.`}),Object(i.a)("p",{content:`In a <code>${Object(u.a)("for","Pascal")}</code> loop, the &lsquo;loop variable&rsquo; (here <code>${Object(u.a)("count","Pascal")}</code>) is given in turn each of the values in the range (here 1, 2, 3, &hellip;, 199, 200), and the loop instructions are performed each time. So in the example above, a spiral is drawn as the Turtle moves forward gradually more and more (as <code>${Object(u.a)("count","Pascal")}</code> increases).`}),Object(i.a)("p",{content:`To count downwards, use <code>${Object(u.a)("downto","Pascal")}</code> instead of <code>${Object(u.a)("to","Pascal")}</code> (as in the &lsquo;Procedure with parameter&rsquo; example program.`}),Object(i.a)("p",{content:"If instead of looping a specific number of times, you want to loop through some sequence of commands until some particular condition becomes true, then you can use:"}),Object(i.a)("pre",{content:`<code>${Object(u.a)("repeat\n  {command1;}\n  {command2; (etc.)}\nuntil {condition}","Pascal")}</code>`}),Object(i.a)("p",{content:`<p>The &lsquo;Simple procedure&rsquo; example program does this, looping until the Turtle is pointing directly north (i.e., <code>${Object(u.a)("turtd = 0","Pascal")}</code>). Alternatively, you can loop through a sequence of commands while some condition is true (so that it stops when the condition becomes false):`}),Object(i.a)("pre",{content:`<code>${Object(u.a)("while {condition} do\n  begin\n    {sequence of commands}\n  end;","Pascal")}</code>`}),Object(i.a)("p",{content:`Things that can be done with a &lsquo;<code>${Object(u.a)("repeat","Pascal")}</code> loop&rsquo; can equally be done with a &lsquo;<code>${Object(u.a)("while","Pascal")}</code> loop&rsquo; (and vice-versa), but sometimes one is more natural than the other. Notice also that a <code>${Object(u.a)("repeat","Pascal")}</code> loop always executes the sequence of commands at least once, because it tests the condition at the end of the loop. But a <code>${Object(u.a)("while","Pascal")}</code> loop tests the condition <em>before</em> executing the sequence of commands, and so will not execute them even once if condition is false to start with. (For examples of the various loops, see the second set of example programs, &lsquo;Further commands and structures&rsquo;.)`})],f=[Object(i.a)("h3",{content:"Command Structures"}),Object(i.a)("p",{content:"Selection and ordering of commands is done by <em>sequencing</em>, <em>conditional selection</em>, and <em>looping</em>."}),Object(i.a)("h4",{content:"Sequencing of Commands"}),Object(i.a)("p",{content:"Commands to be performed in sequence are usually placed in the appropriate order within the program, with the same indent, e.g.:"}),Object(i.a)("pre",{content:`<code>${Object(u.a)("colour(green)\nblot(100)\npause(1000) # etc.","Python")}</code>`}),Object(i.a)("p",{content:"(From the first example program in the Help menu.)"}),Object(i.a)("h4",{content:"Conditional Selection of Commands"}),Object(i.a)("p",{content:`Suppose you want to draw a blot with a given radius (stored as the integer variable <code>${Object(u.a)("radius","Python")}</code>), but only if that value is less than 500; do it like this:`}),Object(i.a)("pre",{content:`<code>${Object(u.a)("if radius < 500:\n  blot(radius)","Python")}</code>`}),Object(i.a)("p",{content:`If you want to do something different when the condition is not met (e.g. drawing a blot with half the radius), extend the <code>${Object(u.a)("if","Python")}</code> structure by adding <code>${Object(u.a)("else","Python")}</code> and then the new command:`}),Object(i.a)("pre",{content:`<code>${Object(u.a)("if radius < 500:\n  blot(radius)\nelse:\n  blot(radius // 2)","Python")}</code>`}),Object(i.a)("p",{content:`Notice that this is a single complex command, so the <code>${Object(u.a)("else","Python")}</code> must have the same indent as <code>${Object(u.a)("if","Python")}</code> and the sub-commands must be further indented (if you do not indent correctly, Turtle will give you a warning).`}),Object(i.a)("h4",{content:"Grouping of Commands"}),Object(i.a)("p",{content:`Sometimes you will want to do a sequence of commands within an <code>${Object(u.a)("if - else","Python")}</code> structure, in which case you can group them by indenting them all by the same amount. Any such indented sequence of commands is treated as a single command. (Another possibility is to package them into a function.)`}),Object(i.a)("p",{content:"Note that indents must be consistent, so the following will generate several errors:"}),Object(i.a)("pre",{content:`<code>${Object(u.a)("if radius < 500:\n  blot(radius)\n    blot(radius // 3)      # too many indents\n  else:            # should match the if line\n  blot(radius // 2) # needs indent after else","Python")}</code>`}),Object(i.a)("h4",{content:"Auto-Formatting"}),Object(i.a)("h4",{content:"Looping Structures"}),Object(i.a)("p",{content:`Python provides two different structures for looping (or &lsquo;iterating&rsquo;) commands. If you know in advance how many times you want to loop – or you want to &lsquo;loop over&rsquo; a particular range of values (e.g. from 1 to 200), then the simplest is a &lsquo;<code>${Object(u.a)("for","Python")}</code> loop&rsquo; (or &lsquo;counting loop&rsquo;):`}),Object(i.a)("pre",{content:`<code>${Object(u.a)("for count in range(1, 201, 1):\n  forward(count // 3)\n  right(5)\n  # etc.","Python")}</code>`}),Object(i.a)("p",{content:`(From the first <code>${Object(u.a)("for","Python")}</code> loop example program in the Help menu.)`}),Object(i.a)("p",{content:"Again indenting is used to group together a number of commands."}),Object(i.a)("p",{content:`In a <code>${Object(u.a)("for","Python")}</code> loop, the &lsquo;loop variable&rsquo; (here <code>${Object(u.a)("count","Python")}</code>) is given in turn each of the values in the range (here 1, 2, 3, &hellip;, 199, 200), and the loop instructions are performed each time. So in the example above, a spiral is drawn as the Turtle moves forward gradually more and more (as <code>${Object(u.a)("count","Python")}</code> increases).`}),Object(i.a)("p",{content:`The <code>${Object(u.a)("range","Python")}</code> function specifies the values that the loop variable will take as follows:`}),Object(i.a)("pre",{content:`<code>${Object(u.a)("range(firstValue, lastValue + 1, increment)","Python")}</code>`}),Object(i.a)("p",{content:"The increment can be either 1 or -1. To count down through a loop, use an increment of -1."}),Object(i.a)("p",{content:"If instead of looping a specific number of times, you want to loop through some sequence of commands while some condition is true (so that it stops when the condition becomes false), then you can use:"}),Object(i.a)("pre",{content:`<code>${Object(u.a)("while condition:\n  # sequence of commands","Python")}</code>`}),Object(i.a)("p",{content:`A <code>${Object(u.a)("while","Python")}</code> loop tests the condition <em>before</em> executing the sequence of commands, and so will not execute them even once if condition is false to start with. (For examples of the various loops, see the second set of example programs, &lsquo;Further commands and structures&rsquo;.)`})],y=[Object(i.a)("h3",{content:"Arithmetical Operators"}),Object(i.a)("p",{content:"The four main arithemetical operators are represented as:"}),Object(i.a)("table",{classes:["tsx-help-table"],content:[Object(i.a)("tr",{content:`<td><code>${Object(u.a)("+","BASIC")}</code></td><td>addition (also used for string concatenation)</td>`}),Object(i.a)("tr",{content:`<td><code>${Object(u.a)("-","BASIC")}</code></td><td>subtraction</td>`}),Object(i.a)("tr",{content:`<td><code>${Object(u.a)("*","BASIC")}</code></td><td>multiplication</td>`}),Object(i.a)("tr",{content:`<td><code>${Object(u.a)("/","BASIC")}</code></td><td>division</td>`})]}),Object(i.a)("p",{content:`<code>${Object(u.a)("/","BASIC")}</code> is <em>integer</em> division, with the remainder discarded (e.g. <code>${Object(u.a)("14 / 3 = 4","BASIC")}</code>). Remainders are given by:`}),Object(i.a)("table",{classes:["tsx-help-table"],content:[Object(i.a)("tr",{content:`<td><code>${Object(u.a)("MOD","BASIC")}</code></td><td>remainder</td>`})]}),Object(i.a)("p",{content:`(e.g. <code>${Object(u.a)("14 MOD 3 = 2","BASIC")}</code>; <code>${Object(u.a)("67 MOD 10 = 7","BASIC")}</code>).`}),Object(i.a)("h3",{content:"Doing Fractional (e.g. Decimal) Arithmetic"}),Object(i.a)("p",{content:`The Turtle Machine is designed to handle memory simply and transparently for the learning of computer science, and so has no special type for representing fractional numbers; which is why <code>${Object(u.a)("/","BASIC")}</code> is integer division. But the Turtle System can handle fractional numbers by treating them explicitly as fractions, with both a numerator (above the line) and a denominator (below the line). A denominator of 1000000, for instance, allows decimal arithmetic to 6 decimal places.`}),Object(i.a)("p",{content:`Thus to get the sine of 34.56 degrees to 6 decimal places, you could use <code>${Object(u.a)("n% = SIN(3456, 100, 1000000)","BASIC")}</code> – this makes <code>${Object(u.a)("n%","BASIC")}</code> equal to the sine of the angle 3456/100, multiplied by 1000000 (and rounded). <code>${Object(u.a)("WRITELN(QSTR$(n%, 1000000, 6))","BASIC")}</code> will then print n%/1000000 to six decimal places, i.e. <code>${Object(u.a)('"0.567269"',"BASIC")}</code>. For more illustrations of this sort of decimal arithmetic, see the example program &lsquo;Mathematical functions&rsquo;.`}),Object(i.a)("h3",{content:"Boolean Operators"}),Object(i.a)("p",{content:"The four main boolean operators are represented in the standard way:"}),Object(i.a)("table",{classes:["tsx-help-table"],content:[Object(i.a)("tr",{content:`<td><code>${Object(u.a)("NOT","BASIC")}</code></td><td>negation</td>`}),Object(i.a)("tr",{content:`<td><code>${Object(u.a)("AND","BASIC")}</code></td><td>conjunction</td>`}),Object(i.a)("tr",{content:`<td><code>${Object(u.a)("OR","BASIC")}</code></td><td>disjunction (inclusive)</td>`}),Object(i.a)("tr",{content:`<td><code>${Object(u.a)("EOR","BASIC")}</code></td><td>exclusive disjunction</td>`})]}),Object(i.a)("p",{content:`These are used between integers, where zero stands for false and any other number stands for true. <code>${Object(u.a)("FALSE","BASIC")}</code> stands for <code>${Object(u.a)("0","BASIC")}</code> and <code>${Object(u.a)("TRUE","BASIC")}</code> for <code>${Object(u.a)("-1","BASIC")}</code>. The Boolean operators can also be used in a bitwise fashion (i.e. each binary bit in the result is calculated as the result of the relevant boolean operation on the corresponding bits of the inputs, e.g. <code>${Object(u.a)("21 AND 6 = 4","BASIC")}</code> (binary <code>${Object(u.a)("10101 AND 00110 = 100","BASIC")}</code>); <code>${Object(u.a)("21 OR 6 = 23","BASIC")}</code> (<code>${Object(u.a)("10111","BASIC")}</code>); <code>${Object(u.a)("21 EOR 6 = 19","BASIC")}</code> (<code>${Object(u.a)("10011","BASIC")}</code>).`}),Object(i.a)("h3",{content:"Comparison Operators"}),Object(i.a)("p",{content:"The six comparison operators are applicable to all types (with strings compared alphabetically):"}),Object(i.a)("table",{classes:["tsx-help-table"],content:[Object(i.a)("tr",{content:`<td><code>${Object(u.a)("=","BASIC")}</code></td><td>equality</td>`}),Object(i.a)("tr",{content:`<td><code>${Object(u.a)("<>","BASIC")}</code></td><td>inequality</td>`}),Object(i.a)("tr",{content:`<td><code>${Object(u.a)("<","BASIC")}</code></td><td>less than</td>`}),Object(i.a)("tr",{content:`<td><code>${Object(u.a)("<=","BASIC")}</code></td><td>less than or equal</td>`}),Object(i.a)("tr",{content:`<td><code>${Object(u.a)(">","BASIC")}</code></td><td>greater than</td>`}),Object(i.a)("tr",{content:`<td><code>${Object(u.a)(">=","BASIC")}</code></td><td>greater than or equal</td>`})]}),Object(i.a)("h3",{content:"Bracketing"}),Object(i.a)("p",{content:"Complex expressions require brackets, e.g."}),Object(i.a)("pre",{content:`<code>${Object(u.a)("IF (n% < 0) OR (n% > 9) THEN\n  n% = ((a% + 1) * (b% + 3) + c%) MOD 10","BASIC")}</code>`})],w=[Object(i.a)("h3",{content:"Arithmetical Operators"}),Object(i.a)("p",{content:"The four main arithemetical operators are represented as:"}),Object(i.a)("table",{classes:["tsx-help-table"],content:[Object(i.a)("tr",{content:`<td><code>${Object(u.a)("+","Pascal")}</code></td><td>addition (also used for string concatenation)</td>`}),Object(i.a)("tr",{content:`<td><code>${Object(u.a)("-","Pascal")}</code></td><td>subtraction</td>`}),Object(i.a)("tr",{content:`<td><code>${Object(u.a)("*","Pascal")}</code></td><td>multiplication</td>`}),Object(i.a)("tr",{content:`<td><code>${Object(u.a)("/","Pascal")}</code></td><td>division</td>`})]}),Object(i.a)("p",{content:`<code>${Object(u.a)("/","Pascal")}</code> is <em>integer</em> division, with the remainder discarded (e.g. <code>${Object(u.a)("14 / 3 = 4","Pascal")}</code>). Remainders are given by:`}),Object(i.a)("table",{classes:["tsx-help-table"],content:[Object(i.a)("tr",{content:`<td><code>${Object(u.a)("mod","Pascal")}</code></td><td>remainder</td>`})]}),Object(i.a)("p",{content:`(e.g. <code>${Object(u.a)("14 mod 3 = 2","Pascal")}</code>; <code>${Object(u.a)("67 mod 10 = 7","Pascal")}</code>).`}),Object(i.a)("h3",{content:"Doing Fractional (e.g. Decimal) Arithmetic"}),Object(i.a)("p",{content:`The Turtle Machine is designed to handle memory simply and transparently for the learning of computer science, and so has no special type for representing fractional numbers; which is why <code>${Object(u.a)("/","Pascal")}</code> is integer division. But the Turtle System can handle fractional numbers by treating them explicitly as fractions, with both a numerator (above the line) and a denominator (below the line). A denominator of 1000000, for instance, allows decimal arithmetic to 6 decimal places.`}),Object(i.a)("p",{content:`Thus to get the sine of 34.56 degrees to six decimal places, you could use <code>${Object(u.a)("n := sin(3456, 100, 1000000)","Pascal")}</code> – this makes <code>${Object(u.a)("n","Pascal")}</code> equal to the sine of the angle 3456/100, multiplied by 1000000 (and rounded). <code>${Object(u.a)("writeln(qstr(n, 1000000, 6))","Pascal")}</code> will then print n/1000000 to six decimal places, i.e. <code>${Object(u.a)('"0.567269"',"Pascal")}</code>. For more illustrations of this sort of decimal arithmetic, see the example program &lsquo;Mathematical functions&rsquo;.`}),Object(i.a)("h3",{content:"Boolean Operators"}),Object(i.a)("p",{content:"The four main boolean operators are represented in the standard way:"}),Object(i.a)("table",{classes:["tsx-help-table"],content:[Object(i.a)("tr",{content:`<td><code>${Object(u.a)("not","Pascal")}</code></td><td>negation</td>`}),Object(i.a)("tr",{content:`<td><code>${Object(u.a)("and","Pascal")}</code></td><td>conjunction</td>`}),Object(i.a)("tr",{content:`<td><code>${Object(u.a)("or","Pascal")}</code></td><td>disjunction (inclusive)</td>`}),Object(i.a)("tr",{content:`<td><code>${Object(u.a)("xor","Pascal")}</code></td><td>exclusive disjunction</td>`})]}),Object(i.a)("p",{content:`These can also be used between integers, in a <em>bitwise</em> fashion (i.e. each binary bit in the result is calculated as the result of the relevant boolean operation on the corresponding bits of the inputs), e.g. <code>${Object(u.a)("21 and 6 = 4","Pascal")}</code> (binary <code>${Object(u.a)("10101 and 00110 = 100","Pascal")}</code>); <code>${Object(u.a)("21 or 6 = 23","Pascal")}</code> (<code>${Object(u.a)("10111","Pascal")}</code>); <code>${Object(u.a)("21 xor 6 = 19","Pascal")}</code> (<code>${Object(u.a)("10011","Pascal")}</code>).`}),Object(i.a)("h3",{content:"Comparison Operators"}),Object(i.a)("p",{content:"The six comparison operators are applicable to all types (with strings compared alphabetically):"}),Object(i.a)("table",{classes:["tsx-help-table"],content:[Object(i.a)("tr",{content:`<td><code>${Object(u.a)("=","Pascal")}</code></td><td>equality</td>`}),Object(i.a)("tr",{content:`<td><code>${Object(u.a)("<>","Pascal")}</code></td><td>inequality</td>`}),Object(i.a)("tr",{content:`<td><code>${Object(u.a)("<","Pascal")}</code></td><td>less than</td>`}),Object(i.a)("tr",{content:`<td><code>${Object(u.a)("<=","Pascal")}</code></td><td>less than or equal</td>`}),Object(i.a)("tr",{content:`<td><code>${Object(u.a)(">","Pascal")}</code></td><td>greater than</td>`}),Object(i.a)("tr",{content:`<td><code>${Object(u.a)(">=","Pascal")}</code></td><td>greater than or equal</td>`})]}),Object(i.a)("h3",{content:"Bracketing"}),Object(i.a)("p",{content:"Complex expressions require brackets, e.g."}),Object(i.a)("pre",{content:`<code>${Object(u.a)("if (n < 0) or (n > 9) then\n  n := ((a + 1) * (b + 3) + c) mod 10","Pascal")}</code>`})],O=[Object(i.a)("h3",{content:"Arithmetical Operators"}),Object(i.a)("p",{content:"The four main arithemetical operators are represented as:"}),Object(i.a)("table",{classes:["tsx-help-table"],content:[Object(i.a)("tr",{content:`<td><code>${Object(u.a)("+","Python")}</code></td><td>addition (also used for string concatenation)</td>`}),Object(i.a)("tr",{content:`<td><code>${Object(u.a)("-","Python")}</code></td><td>subtraction</td>`}),Object(i.a)("tr",{content:`<td><code>${Object(u.a)("*","Python")}</code></td><td>multiplication</td>`}),Object(i.a)("tr",{content:`<td><code>${Object(u.a)("//","Python")}</code></td><td>division</td>`})]}),Object(i.a)("p",{content:`<code>${Object(u.a)("//","Python")}</code> is <em>integer</em> division, with the remainder discarded (e.g. <code>${Object(u.a)("14 // 3 = 4","Python")}</code>). Remainders are given by:`}),Object(i.a)("table",{classes:["tsx-help-table"],content:[Object(i.a)("tr",{content:`<td><code>${Object(u.a)("mod","Python")}</code></td><td>remainder</td>`})]}),Object(i.a)("p",{content:`(e.g. <code>${Object(u.a)("14 mod 3 == 2","Python")}</code>; <code>${Object(u.a)("67 mod 10 == 7","Python")}</code>).`}),Object(i.a)("h3",{content:"Doing Fractional (e.g. Decimal) Arithmetic"}),Object(i.a)("p",{content:`The Turtle Machine is designed to handle memory simply and transparently for the learning of computer science, and so has no special type for representing fractional numbers; which is why <code>${Object(u.a)("//","Python")}</code> is integer division. But the Turtle System can handle fractional numbers by treating them explicitly as fractions, with both a numerator (above the line) and a denominator (below the line). A denominator of 1000000, for instance, allows decimal arithmetic to 6 decimal places.`}),Object(i.a)("p",{content:`Thus to get the sine of 34.56 degrees to six decimal places, you could use <code>${Object(u.a)("n = sin(3456, 100, 1000000)","Python")}</code> – this makes <code>${Object(u.a)("n","Python")}</code> equal to the sine of the angle 3456/100, multiplied by 1000000 (and rounded). <code>${Object(u.a)("writeln(qstr(n, 1000000, 6))","Python")}</code> will then print n/1000000 to six decimal places, i.e. <code>${Object(u.a)("'0.567269'","Python")}</code>. For more illustrations of this sort of decimal arithmetic, see the example program &lsquo;Mathematical functions&rsquo;.`}),Object(i.a)("h3",{content:"Boolean Operators"}),Object(i.a)("p",{content:"The four main boolean operators are represented in the standard way:"}),Object(i.a)("table",{classes:["tsx-help-table"],content:[Object(i.a)("tr",{content:`<td><code>${Object(u.a)("not","Python")}</code></td><td>negation</td>`}),Object(i.a)("tr",{content:`<td><code>${Object(u.a)("and","Python")}</code></td><td>conjunction</td>`}),Object(i.a)("tr",{content:`<td><code>${Object(u.a)("or","Python")}</code></td><td>disjunction (inclusive)</td>`}),Object(i.a)("tr",{content:`<td><code>${Object(u.a)("xor","Python")}</code></td><td>exclusive disjunction</td>`})]}),Object(i.a)("p",{content:`These can also be used between integers, in a <em>bitwise</em> fashion (i.e. each binary bit in the result is calculated as the result of the relevant boolean operation on the corresponding bits of the inputs), e.g. <code>${Object(u.a)("21 and 6 = 4","Python")}</code> (binary <code>${Object(u.a)("10101 and 00110 = 100","Python")}</code>); <code>${Object(u.a)("21 or 6 = 23","Python")}</code> (<code>${Object(u.a)("10111","Python")}</code>); <code>${Object(u.a)("21 xor 6 = 19","Python")}</code> (<code>${Object(u.a)("10011","Python")}</code>).`}),Object(i.a)("h3",{content:"Comparison Operators"}),Object(i.a)("p",{content:"The six comparison operators are applicable to all types (with strings compared alphabetically):"}),Object(i.a)("table",{classes:["tsx-help-table"],content:[Object(i.a)("tr",{content:`<td><code>${Object(u.a)("==","Python")}</code></td><td>equality</td>`}),Object(i.a)("tr",{content:`<td><code>${Object(u.a)("!=","Python")}</code></td><td>inequality</td>`}),Object(i.a)("tr",{content:`<td><code>${Object(u.a)("<","Python")}</code></td><td>less than</td>`}),Object(i.a)("tr",{content:`<td><code>${Object(u.a)("<=","Python")}</code></td><td>less than or equal</td>`}),Object(i.a)("tr",{content:`<td><code>${Object(u.a)(">","Python")}</code></td><td>greater than</td>`}),Object(i.a)("tr",{content:`<td><code>${Object(u.a)(">=","Python")}</code></td><td>greater than or equal</td>`})]}),Object(i.a)("h3",{content:"Bracketing"}),Object(i.a)("p",{content:"Complex expressions require brackets, e.g."}),Object(i.a)("pre",{content:`<code>${Object(u.a)("if (n < 0) or (n > 9):\n  n = ((a + 1) * (b + 3) + c) mod 10","Python")}</code>`})],x=[Object(i.a)("h3",{content:"User Input"}),Object(i.a)("p",{content:"The facilities for user input – via keyboard or mouse – are designed to be as straightforward and comprehensible as possible, while operating strictly through simple processes that are consistent with the workings of the <em>Turtle Machine</em>."}),Object(i.a)("h4",{content:"Mouse Position Detection"}),Object(i.a)("p",{content:`The x- and y-coordinates of the mouse&rsquo;s current position can be found at any time by using the special global variables <code>${Object(u.a)("?MOUSEX","BASIC")}</code> and <code>${Object(u.a)("?MOUSEY","BASIC")}</code> – these do not require the mouse to be clicked.`}),Object(i.a)("h4",{content:"Mouse Click Detection"}),Object(i.a)("p",{content:`When a mouse click is performed, the x- and y-coordinates of the click position are remembered by the variables <code>${Object(u.a)("?CLICKX","BASIC")}</code> and <code>${Object(u.a)("?CLICKY","BASIC")}</code>. However to identify the type of click, use the variable <code>${Object(u.a)("?CLICK","BASIC")}</code>, which is initially set to a value of -1, but after any click has taken place is set to a numerical value of 128 plus additions as follows:`}),Object(i.a)("table",{classes:["tsx-help-table"],content:[Object(i.a)("tr",{content:"<td>1</td><td>if the click was with the left mouse button</td>"}),Object(i.a)("tr",{content:"<td>2</td><td>if the click was with the right mouse button</td>"}),Object(i.a)("tr",{content:"<td>4</td><td>if the click was with the middle mouse button</td>"}),Object(i.a)("tr",{content:"<td>8</td><td>if the <kbd>shift</kbd> key was held down while clicking</td>"}),Object(i.a)("tr",{content:"<td>16</td><td>if the <kbd>alt</kbd> key was held down while clicking</td>"}),Object(i.a)("tr",{content:"<td>32</td><td>if the <kbd>ctrl</kbd> key was held down while clicking</td>"}),Object(i.a)("tr",{content:"<td>64</td><td>if it was a double-click</td>"})]}),Object(i.a)("p",{content:`So if <code>${Object(u.a)("n% = ?CLICK","BASIC")}</code> makes <code>${Object(u.a)("n%","BASIC")}</code> equal to 137 (128+8+1), this indicates that a left-click is currently under way, with the <kbd>shift</kbd> key held down. When the click event is finished, the <code>${Object(u.a)("?CLICK","BASIC")}</code> value will become negative. Thus if <code>${Object(u.a)("?CLICK","BASIC")}</code> returns a value of -137, this indicates that the last click event – now finished – was <kbd>shift</kbd>+left; the coordinate position of that click can still be identified – until the next click takes place – as (<code>${Object(u.a)("?CLICKX","BASIC")}</code>, <code>${Object(u.a)("?CLICKY","BASIC")}</code>). On a left-click, the variable <code>${Object(u.a)("?LMOUSE","BASIC")}</code> records the relevant value (as calculated above); likewise <code>${Object(u.a)("?RMOUSE","BASIC")}</code> and <code>${Object(u.a)("?MMOUSE","BASIC")}</code> record any right-click or middle-click. Again, these are all made negative when the click is released, so an empty loop like:`}),Object(i.a)("pre",{content:`<code>${Object(u.a)("REPEAT\nUNTIL ?LMOUSE > 0","BASIC")}</code>`}),Object(i.a)("p",{content:`waits for a left-click with the mouse. Afterwards, <code>${Object(u.a)("?CLICKX","BASIC")}</code> and <code>${Object(u.a)("?CLICKY","BASIC")}</code> indicate where that click event occurred, and <code>${Object(u.a)("?CLICK","BASIC")}</code> can be queried using the bitwise <code>${Object(u.a)("AND","BASIC")}</code> operator to discover which special keys were pressed (e.g. <code>${Object(u.a)("IF (ABS(?CLICK) AND 8) > 0","BASIC")}</code> will test whether <kbd>shift</kbd> was being held down).`}),Object(i.a)("h4",{content:"Key Press Detection"}),Object(i.a)("p",{content:`Detecting key presses (rather than typing in of characters) uses the variables <code>${Object(u.a)("?KEY","BASIC")}</code> and <code>${Object(u.a)("?KSHIFT","BASIC")}</code>, and the function <code>${Object(u.a)("KEYSTATUS","BASIC")}</code>. <code>${Object(u.a)("?KEY","BASIC")}</code> gives the code of the last key to be pressed – these codes can be tested using the special keycode constants <code>${Object(u.a)("\\ALT","BASIC")}</code>, <code>${Object(u.a)("\\BACKSPACE","BASIC")}</code>, <code>${Object(u.a)("\\CAPSLOCK","BASIC")}</code>, <code>${Object(u.a)("\\CTRL","BASIC")}</code>, <code>${Object(u.a)("\\DELETE","BASIC")}</code>, <code>${Object(u.a)("\\DOWN","BASIC")}</code>, <code>${Object(u.a)("\\END","BASIC")}</code>, <code>${Object(u.a)("\\ESCAPE","BASIC")}</code>, <code>${Object(u.a)("\\HOME","BASIC")}</code>, <code>${Object(u.a)("\\INSERT","BASIC")}</code>, <code>${Object(u.a)("\\LEFT","BASIC")}</code>, <code>${Object(u.a)("\\LWIN","BASIC")}</code>, <code>${Object(u.a)("\\PGDN","BASIC")}</code>, <code>${Object(u.a)("\\PGUP","BASIC")}</code>, <code>${Object(u.a)("\\RETURN","BASIC")}</code>, <code>${Object(u.a)("\\RIGHT","BASIC")}</code>, <code>${Object(u.a)("\\RWIN","BASIC")}</code>, <code>${Object(u.a)("\\SHIFT","BASIC")}</code>, <code>${Object(u.a)("\\SPACE","BASIC")}</code>, <code>${Object(u.a)("\\TAB","BASIC")}</code>, and <code>${Object(u.a)("\\UP","BASIC")}</code>, as well as <code>${Object(u.a)("\\A","BASIC")}</code> to <code>${Object(u.a)("\\Z","BASIC")}</code>, <code>${Object(u.a)("\\0","BASIC")}</code> to <code>${Object(u.a)("\\9","BASIC")}</code>, <code>${Object(u.a)("\\HASH","BASIC")}</code>, <code>${Object(u.a)("\\EQUALS","BASIC")}</code> etc. Keys on the numeric keypad have codes <code>${Object(u.a)("\\#0","BASIC")}</code>, <code>${Object(u.a)("\\#1","BASIC")}</code> etc., and function keys <code>${Object(u.a)("\\F1","BASIC")}</code>, <code>${Object(u.a)("\\F2","BASIC")}</code> etc. All these stand for numeric values (e.g. <code>${Object(u.a)("\\RETURN","BASIC")}</code> is 13, <code>${Object(u.a)("\\ESCAPE","BASIC")}</code> is 27), but <code>${Object(u.a)("IF ?KEY = \\RETURN","BASIC")}</code> is easier to understand than <code>${Object(u.a)("IF ?KEY = 13","BASIC")}</code>.`}),Object(i.a)("p",{content:`Like the mouse-click variables, <code>${Object(u.a)("?KEY","BASIC")}</code> becomes negative after the key is released, so <code>${Object(u.a)("REPEAT : UNTIL ?KEY = -\\A","BASIC")}</code> will wait until the &lsquo;A&rsquo; key has been released. If you want to identify the last key whether it is still pressed or not, use <code>${Object(u.a)("ABS","BASIC")}</code> (e.g. <code>${Object(u.a)("IF ABS(?KEY) = \\A THEN","BASIC")}</code>).`}),Object(i.a)("p",{content:`Whenever a key is pressed, the variable <code>${Object(u.a)("?KSHIFT","BASIC")}</code> gives its &lsquo;shift-status&rsquo;, calculated in the same way as <code>${Object(u.a)("?CLICK","BASIC")}</code> (i.e. 128 plus 8 if <kbd>shift</kbd> was down, 16 for <kbd>alt</kbd>, 32 for <kbd>ctrl</kbd>, and turning negative after the key is released). So to test if <kbd>ctrl</kbd> was down on the last keypress, use <code>${Object(u.a)("IF (ABS(?KSHIFT) AND 32) > 0","BASIC")}</code>, with <code>${Object(u.a)("AND","BASIC")}</code> here acting as a bitwise boolean operator.`}),Object(i.a)("p",{content:`To recover the shift-status for the last press of the <kbd>X</kbd> key (say), use <code>${Object(u.a)("KEYSTATUS(\\X)","BASIC")}</code>, which can tell you (a) whether <kbd>shift</kbd> / <kbd>alt</kbd> / <kbd>ctrl</kbd> were down; (b) whether the <kbd>X</kbd> is still pressed (since <code>${Object(u.a)("KEYSTATUS","BASIC")}</code> goes negative on release); (c) whether <kbd>X</kbd> has been pressed at all (since all of these input codes are set to -1 initially, and can be reset to -1 using <code>${Object(u.a)("RESET(\\X)","BASIC")}</code> etc.).`}),Object(i.a)("h4",{content:"Keyboard Input"}),Object(i.a)("p",{content:`The system provides a <em>keyboard buffer</em> to store typed characters. Initially this is set to store up to 32 characters, but can be extended using e.g. <code>${Object(u.a)("KEYBUFFER(50)","BASIC")}</code>. To read from the buffer into a string, use e.g. <code>${Object(u.a)("s$ = GET$(10)","BASIC")}</code>, which reads up to 10 characters (depending on how many are in the buffer). <code>${Object(u.a)("KEYSTATUS(\\KEYBUFFER)","BASIC")}</code> returns the number of characters it contains, and <code>${Object(u.a)("RESET(\\KEYBUFFER)","BASIC")}</code> flushes it.`}),Object(i.a)("p",{content:`<code>${Object(u.a)("s$ = GETLINE$","BASIC")}</code> reads a line of text, waiting until the <kbd>return</kbd> key is pressed and then making <code>${Object(u.a)("s$","BASIC")}</code> equal to what has been typed into the buffer (discarding the <kbd>return</kbd> character).`}),Object(i.a)("p",{content:`The function <code>${Object(u.a)("DETECT","BASIC")}</code> waits a given time for some input to be received (e.g. a specific key pressed), and returns <code>${Object(u.a)("TRUE","BASIC")}</code> when that input is received, or <code>${Object(u.a)("FALSE","BASIC")}</code> if it is not received in time. Thus <code>${Object(u.a)("IF DETECT(\\ESCAPE, 5000) THEN - ELSE -","BASIC")}</code> gives 5 seconds to press the <kbd>escape</kbd> key (meanwhile continuing to collect any typed characters in the keyboard buffer). By default, text that goes into the keyboard buffer is also &lsquo;echoed&rsquo; to the console (below the Canvas), along with text that is output (using <code>${Object(u.a)("WRITE","BASIC")}</code> or <code>${Object(u.a)("WRITELN","BASIC")}</code>). This behaviour can be turned on and off with <code>${Object(u.a)("KEYECHO(TRUE)","BASIC")}</code> and <code>${Object(u.a)("KEYECHO(FALSE)","BASIC")}</code>.`})],v=[Object(i.a)("h3",{content:"User Input"}),Object(i.a)("p",{content:"The facilities for user input – via keyboard or mouse – are designed to be as straightforward and comprehensible as possible, while operating strictly through simple processes that are consistent with the workings of the <em>Turtle Machine</em>."}),Object(i.a)("h4",{content:"Mouse Position Detection"}),Object(i.a)("p",{content:`The x- and y-coordinates of the mouse&rsquo;s current position can be found at any time by using the special global variables <code>${Object(u.a)("?mousex","Pascal")}</code> and <code>${Object(u.a)("?mousey","Pascal")}</code> – these do not require the mouse to be clicked.`}),Object(i.a)("h4",{content:"Mouse Click Detection"}),Object(i.a)("p",{content:`When a mouse click is performed, the x- and y-coordinates of the click position are remembered by the variables <code>${Object(u.a)("?clickx","Pascal")}</code> and <code>${Object(u.a)("?clicky","Pascal")}</code>. However to identify the type of click, use the variable <code>${Object(u.a)("?click","Pascal")}</code>, which is initially set to a value of -1, but after any click has taken place is set to a numerical value of 128 plus additions as follows:`}),Object(i.a)("table",{classes:["tsx-help-table"],content:[Object(i.a)("tr",{content:"<td>1</td><td>if the click was with the left mouse button</td>"}),Object(i.a)("tr",{content:"<td>2</td><td>if the click was with the right mouse button</td>"}),Object(i.a)("tr",{content:"<td>4</td><td>if the click was with the middle mouse button</td>"}),Object(i.a)("tr",{content:"<td>8</td><td>if the shift key was held down while clicking</td>"}),Object(i.a)("tr",{content:"<td>16</td><td>if the alt key was held down while clicking</td>"}),Object(i.a)("tr",{content:"<td>32</td><td>if the ctrl key was held down while clicking</td>"}),Object(i.a)("tr",{content:"<td>64</td><td>if it was a double-click</td>"})]}),Object(i.a)("p",{content:`So if <code>${Object(u.a)("n := ?click","Pascal")}</code> makes <code>${Object(u.a)("n","Pascal")}</code> equal to 137 (128 + 8 + 1), this indicates that a left-click is currently under way, with the <kbd>shift</kbd> key held down. When the click event is finished, the <code>${Object(u.a)("?click","Pascal")}</code> value will become negative. Thus if <code>${Object(u.a)("?click","Pascal")}</code> returns a value of -137, this indicates that the last click event – now finished – was shift+left; the coordinate position of that click can still be identified – until the next click takes place – as (<code>${Object(u.a)("?clickx","Pascal")}</code>, <code>${Object(u.a)("?clicky","Pascal")}</code>). On a left-click, the variable <code>${Object(u.a)("?lmouse","Pascal")}</code> records the relevant value (as calculated above); likewise <code>${Object(u.a)("?rmouse","Pascal")}</code> and <code>${Object(u.a)("?mmouse","Pascal")}</code> record any right-click or middle-click. Again, these are all made negative when the click is released, so an empty loop like:`}),Object(i.a)("pre",{content:`<code>${Object(u.a)("repeat\nuntil ?lmouse > 0;","Pascal")}</code>`}),Object(i.a)("p",{content:`waits for a left-click with the mouse. Afterwards, <code>${Object(u.a)("?clickx","Pascal")}</code> and <code>${Object(u.a)("?clicky","Pascal")}</code> indicate where that click event occurred, and <code>${Object(u.a)("?click","Pascal")}</code> can be queried using the bitwise <code>${Object(u.a)("and","Pascal")}</code> operator to discover which special keys were pressed (e.g. <code>${Object(u.a)("if (abs(?click) and 8) > 0","Pascal")}</code> will test whether <kbd>shift</kbd> was being held down).`}),Object(i.a)("h4",{content:"Key Press Detection"}),Object(i.a)("p",{content:`Detecting key presses (rather than typing in of characters) uses the variables <code>${Object(u.a)("?key","Pascal")}</code> and <code>${Object(u.a)("?kshift","Pascal")}</code>, and the function <code>${Object(u.a)("keystatus","Pascal")}</code>. <code>${Object(u.a)("?key","Pascal")}</code> gives the code of the last key to be pressed – these codes can be tested using the special keycode constants <code>${Object(u.a)("\\alt","Pascal")}</code>, <code>${Object(u.a)("\\backspace","Pascal")}</code>, <code>${Object(u.a)("\\capslock","Pascal")}</code>, <code>${Object(u.a)("\\ctrl","Pascal")}</code>, <code>${Object(u.a)("\\delete","Pascal")}</code>, <code>${Object(u.a)("\\down","Pascal")}</code>, <code>${Object(u.a)("\\end","Pascal")}</code>, <code>${Object(u.a)("\\escape","Pascal")}</code>, <code>${Object(u.a)("\\home","Pascal")}</code>, <code>${Object(u.a)("\\insert","Pascal")}</code>, <code>${Object(u.a)("\\left","Pascal")}</code>, <code>${Object(u.a)("\\lwin","Pascal")}</code>, <code>${Object(u.a)("\\pgdn","Pascal")}</code>, <code>${Object(u.a)("\\pgup","Pascal")}</code>, <code>${Object(u.a)("\\return","Pascal")}</code>, <code>${Object(u.a)("\\right","Pascal")}</code>, <code>${Object(u.a)("\\rwin","Pascal")}</code>, <code>${Object(u.a)("\\shift","Pascal")}</code>, <code>${Object(u.a)("\\space","Pascal")}</code>, <code>${Object(u.a)("\\tab","Pascal")}</code>, and <code>${Object(u.a)("\\up","Pascal")}</code>, as well as <code>${Object(u.a)("\\a","Pascal")}</code> to <code>${Object(u.a)("\\z","Pascal")}</code>, <code>${Object(u.a)("\\0","Pascal")}</code> to <code>${Object(u.a)("\\9","Pascal")}</code>, <code>${Object(u.a)("\\hash","Pascal")}</code>, <code>${Object(u.a)("\\equals","Pascal")}</code> etc. Keys on the numeric keypad have codes <code>${Object(u.a)("\\#0","Pascal")}</code>, <code>${Object(u.a)("\\#1","Pascal")}</code> etc., and function keys <code>${Object(u.a)("\\f1","Pascal")}</code>, <code>${Object(u.a)("\\f2","Pascal")}</code> etc. All these stand for numeric values (e.g. <code>${Object(u.a)("\\return","Pascal")}</code> is 13, <code>${Object(u.a)("\\escape","Pascal")}</code> is 27), but <code>${Object(u.a)("if ?key = \return","Pascal")}</code> is easier to understand than <code>${Object(u.a)("if ?key = 13","Pascal")}</code>.`}),Object(i.a)("p",{content:`Like the mouse-click functions, <code>${Object(u.a)("?key","Pascal")}</code> becomes negative after the key is released, so <code>${Object(u.a)("repeat until ?key = -\\a","Pascal")}</code> will wait until the <kbd>A</kbd> key has been released. If you want to identify the last key whether it is still pressed or not, use <code>${Object(u.a)("abs","Pascal")}</code> (e.g. <code>${Object(u.a)("if abs(?key) = \\a then {commands}","Pascal")}</code>).`}),Object(i.a)("p",{content:`Whenever a key is pressed, the variable <code>${Object(u.a)("?kshift","Pascal")}</code> gives its &lsquo;shift-status&rsquo;, calculated in the same way as <code>${Object(u.a)("?click","Pascal")}</code> (i.e. 128 plus 8 if <kbd>shift</kbd> was down, 16 for <kbd>alt</kbd>, 32 for <kbd>ctrl</kbd>, and turning negative after the key is released). So to test if <kbd>ctrl</kbd> was down on the last keypress, use <code>${Object(u.a)("if (abs(?kshift) and 32) > 0","Pascal")}</code>, with <code>${Object(u.a)("and","Pascal")}</code> here acting as a bitwise boolean operator.`}),Object(i.a)("p",{content:`To recover the shift-status for the last press of the <kbd>X</kbd> key (say), use <code>${Object(u.a)("keystatus(\\x)","Pascal")}</code>, which can tell you (a) whether <kbd>shift</kbd> / <kbd>alt</kbd> / <kbd>ctrl</kbd> were down; (b) whether the <kbd>X</kbd> is still pressed (since <code>${Object(u.a)("keystatus","Pascal")}</code> goes negative on release); (c) whether <kbd>X</kbd> has been pressed at all (since all of these input codes are set to -1 initially, and can be reset to -1 using <code>${Object(u.a)("reset(\\x)","Pascal")}</code> etc.).`}),Object(i.a)("h4",{content:"Keyboard Input"}),Object(i.a)("p",{content:`The system provides a <em>keyboard buffer</em> to store typed characters. Initially this is set to store up to 32 characters, but can be extended using e.g. <code>${Object(u.a)("keybuffer(50)","Pascal")}</code>. To read from the buffer into a string, use e.g. <code>${Object(u.a)("s := read(10)","Pascal")}</code>, which reads up to 10 characters (depending on how many are in the buffer). <code>${Object(u.a)("keystatus(\\keybuffer)","Pascal")}</code> returns the number of characters it contains, and <code>${Object(u.a)("reset(\\keybuffer)","Pascal")}</code> flushes it.`}),Object(i.a)("p",{content:`<code>${Object(u.a)("s := readln","Pascal")}</code> reads a line of text, waiting until the <kbd>return</kbd> key is pressed and then making <code>${Object(u.a)("s","Pascal")}</code> equal to what has been typed into the buffer (discarding the <kbd>return</kbd> character).`}),Object(i.a)("p",{content:`The function <code>${Object(u.a)("detect","Pascal")}</code> waits a given time for some input to be received (e.g. a specific key pressed), and returns <code>${Object(u.a)("true","Pascal")}</code> when that input is received, or <code>${Object(u.a)("false","Pascal")}</code> if it is not received in time. Thus <code>${Object(u.a)("if detect(\\escape, 5000) then {command1} else {command2}","Pascal")}</code> gives 5 seconds to press the <kbd>escape</kbd> key (meanwhile continuing to collect any typed characters in the keyboard buffer). By default, text that goes into the keyboard buffer is also &lsquo;echoed&rsquo; to the console (below the Canvas), along with text that is output (using <code>${Object(u.a)("write","Pascal")}</code> or <code>${Object(u.a)("writeln","Pascal")}</code>). This behaviour can be turned on and off with <code>${Object(u.a)("keyecho(true)","Pascal")}</code> and <code>${Object(u.a)("keyecho(false)","Pascal")}</code>.`})],j=[Object(i.a)("h3",{content:"User Input"}),Object(i.a)("p",{content:"The facilities for user input – via keyboard or mouse – are designed to be as straightforward and comprehensible as possible, while operating strictly through simple processes that are consistent with the workings of the <em>Turtle Machine</em>."}),Object(i.a)("h4",{content:"Mouse Position Detection"}),Object(i.a)("p",{content:`The x- and y-coordinates of the mouse&rsquo;s current position can be found at any time by using the special global variables <code>${Object(u.a)("?mousex","Python")}</code> and <code>${Object(u.a)("?mousey","Python")}</code> – these do not require the mouse to be clicked.`}),Object(i.a)("h4",{content:"Mouse Click Detection"}),Object(i.a)("p",{content:`When a mouse click is performed, the x- and y-coordinates of the click position are remembered by the variables <code>${Object(u.a)("?clickx","Python")}</code> and <code>${Object(u.a)("?clicky","Python")}</code>. However to identify the type of click, use the variable <code>${Object(u.a)("?click","Python")}</code>, which is initially set to a value of -1, but after any click has taken place is set to a numerical value of 128 plus additions as follows:`}),Object(i.a)("table",{classes:["tsx-help-table"],content:[Object(i.a)("tr",{content:"<td>1</td><td>if the click was with the left mouse button</td>"}),Object(i.a)("tr",{content:"<td>2</td><td>if the click was with the right mouse button</td>"}),Object(i.a)("tr",{content:"<td>4</td><td>if the click was with the middle mouse button</td>"}),Object(i.a)("tr",{content:"<td>8</td><td>if the shift key was held down while clicking</td>"}),Object(i.a)("tr",{content:"<td>16</td><td>if the alt key was held down while clicking</td>"}),Object(i.a)("tr",{content:"<td>32</td><td>if the ctrl key was held down while clicking</td>"}),Object(i.a)("tr",{content:"<td>64</td><td>if it was a double-click</td>"})]}),Object(i.a)("p",{content:`So if <code>${Object(u.a)("n = ?click","Python")}</code> makes <code>${Object(u.a)("n","Python")}</code> equal to 137 (128 + 8 + 1), this indicates that a left-click is currently under way, with the <kbd>shift</kbd> key held down. When the click event is finished, the <code>${Object(u.a)("?click","Python")}</code> variable will become negative. Thus if <code>${Object(u.a)("?click","Python")}</code> returns a value of -137, this indicates that the last click event – now finished – was shift+left; the coordinate position of that click can still be identified – until the next click takes place – as (<code>${Object(u.a)("?clickx","Python")}</code>, <code>${Object(u.a)("?clicky","Python")}</code>). On a left-click, the variable <code>${Object(u.a)("?lmouse","Python")}</code> records the relevant value (as calculated above); likewise <code>${Object(u.a)("?rmouse","Python")}</code> and <code>${Object(u.a)("?mmouse","Python")}</code> record any right-click or middle-click. Again, these are all made negative when the click is released, so an empty loop like:`}),Object(i.a)("pre",{content:`<code>${Object(u.a)("while not(?lmouse > 0):\n  pass  # this statement does nothing!","Python")}</code>`}),Object(i.a)("p",{content:`waits for a left-click with the mouse. Afterwards, <code>${Object(u.a)("?clickx","Python")}</code> and <code>${Object(u.a)("?clicky","Python")}</code> indicate where that click event occurred, and <code>${Object(u.a)("?click","Python")}</code> can be queried using the bitwise <code>${Object(u.a)("and","Python")}</code> operator to discover which special keys were pressed (e.g. <code>${Object(u.a)("if (abs(?click) and 8) > 0","Python")}</code> will test whether <kbd>shift</kbd> was being held down).`}),Object(i.a)("h4",{content:"Key Press Detection"}),Object(i.a)("p",{content:`Detecting key presses (rather than typing in of characters) uses the variables <code>${Object(u.a)("?key","Python")}</code> and <code>${Object(u.a)("?kshift","Python")}</code>, and the function <code>${Object(u.a)("keystatus","Python")}</code>. <code>${Object(u.a)("?key","Python")}</code> gives the code of the last key to be pressed – these codes can be tested using the special keycode constants <code>${Object(u.a)("\\alt","Python")}</code>, <code>${Object(u.a)("\\backspace","Python")}</code>, <code>${Object(u.a)("\\capslock","Python")}</code>, <code>${Object(u.a)("\\ctrl","Python")}</code>, <code>${Object(u.a)("\\delete","Python")}</code>, <code>${Object(u.a)("\\down","Python")}</code>, <code>${Object(u.a)("\\end","Python")}</code>, <code>${Object(u.a)("\\escape","Python")}</code>, <code>${Object(u.a)("\\home","Python")}</code>, <code>${Object(u.a)("\\insert","Python")}</code>, <code>${Object(u.a)("\\left","Python")}</code>, <code>${Object(u.a)("\\lwin","Python")}</code>, <code>${Object(u.a)("\\pgdn","Python")}</code>, <code>${Object(u.a)("\\pgup","Python")}</code>, <code>${Object(u.a)("\return","Python")}</code>, <code>${Object(u.a)("\right","Python")}</code>, <code>${Object(u.a)("\\rwin","Python")}</code>, <code>${Object(u.a)("\\shift","Python")}</code>, <code>${Object(u.a)("\\space","Python")}</code>, <code>${Object(u.a)("\\tab","Python")}</code>, and <code>${Object(u.a)("\\up","Python")}</code>, as well as <code>${Object(u.a)("\\a","Python")}</code> to <code>${Object(u.a)("\\z","Python")}</code>, <code>${Object(u.a)("\\0","Python")}</code> to <code>${Object(u.a)("\\9","Python")}</code>, <code>${Object(u.a)("\\hash","Python")}</code>, <code>${Object(u.a)("\\equals","Python")}</code> etc. Keys on the numeric keypad have codes <code>${Object(u.a)("\\#0","Python")}</code>, <code>${Object(u.a)("\\#1","Python")}</code> etc., and function keys <code>${Object(u.a)("\\f1","Python")}</code>, <code>${Object(u.a)("\\f2","Python")}</code> etc. All these stand for numeric values (e.g. <code>${Object(u.a)("\\return","Python")}</code> is 13, <code>${Object(u.a)("\\escape","Python")}</code> is 27), but <code>${Object(u.a)("if ?key = \return","Python")}</code> is easier to understand than <code>${Object(u.a)("if ?key = 13","Python")}</code>.`}),Object(i.a)("p",{content:`Like the mouse-click variables, <code>${Object(u.a)("?key","Python")}</code> becomes negative after the key is released, so <code>${Object(u.a)("while not(?key = -\\a): pass","Python")}</code> will wait until the <kbd>A</kbd> key has been released. If you want to identify the last key, whether it is still pressed or not, use <code>${Object(u.a)("abs","Python")}</code> (e.g. <code>${Object(u.a)("if abs(?key) = \\a: # command","Python")}</code>).`}),Object(i.a)("p",{content:`Whenever a key is pressed, the variable <code>${Object(u.a)("?kshift","Python")}</code> gives its &lsquo;shift-status&rsquo;, calculated in the same way as <code>${Object(u.a)("?click","Python")}</code> (i.e. 128 plus 8 if <kbd>shift</kbd> was down, 16 for <kbd>alt</kbd>, 32 for <kbd>ctrl</kbd>, and turning negative after the key is released). So to test if <kbd>ctrl</kbd> was down on the last keypress, use <code>${Object(u.a)("if (abs(?kshift) and 32) > 0","Python")}</code>, with <code>${Object(u.a)("and","Python")}</code> here acting as a bitwise boolean operator.`}),Object(i.a)("p",{content:`To recover the shift-status for the last press of the <kbd>X</kbd> key (say), use <code>${Object(u.a)("keystatus(\\x)","Python")}</code>, which can tell you (a) whether <kbd>shift</kbd> / <kbd>alt</kbd> / <kbd>ctrl</kbd> were down; (b) whether the <kbd>X</kbd> is still pressed (since <code>${Object(u.a)("keystatus","Python")}</code> goes negative on release); (c) whether <kbd>X</kbd> has been pressed at all (since all of these input codes are set to -1 initially, and can be reset to -1 using <code>${Object(u.a)("reset(\\x)","Python")}</code> etc.).`}),Object(i.a)("h4",{content:"Keyboard Input"}),Object(i.a)("p",{content:`The system provides a <em>keyboard buffer</em> to store typed characters. Initially this is set to store up to 32 characters, but can be extended using e.g. <code>${Object(u.a)("keybuffer(50)","Python")}</code>. To read from the buffer into a string, use e.g. <code>${Object(u.a)("s = read(10)","Python")}</code>, which reads up to 10 characters (depending on how many are in the buffer). <code>${Object(u.a)("keystatus(\\keybuffer)","Python")}</code> returns the number of characters it contains, and <code>${Object(u.a)("reset(\\keybuffer)","Python")}</code> flushes it.`}),Object(i.a)("p",{content:`<code>${Object(u.a)("s = readln","Python")}</code> reads a line of text, waiting until the <kbd>return</kbd> key is pressed and then making <code>${Object(u.a)("s","Python")}</code> equal to what has been typed into the buffer (discarding the <kbd>return</kbd> character).`}),Object(i.a)("p",{content:`The function <code>${Object(u.a)("detect","Python")}</code> waits a given time for some input to be received (e.g. a specific key pressed), and returns <code>${Object(u.a)("True","Python")}</code> when that input is received, or <code>${Object(u.a)("False","Python")}</code> if it is not received in time. Thus <code>${Object(u.a)("if detect(\\escape, 5000): #command1","Python")}</code> <code>${Object(u.a)("else: #command2","Python")}</code> gives 5 seconds to press the <kbd>escape</kbd> key (meanwhile continuing to collect any typed characters in the keyboard buffer). By default, text that goes into the keyboard buffer is also &lsquo;echoed&rsquo; to the console (below the Canvas), along with text that is output (using <code>${Object(u.a)("write","Python")}</code> or <code>${Object(u.a)("writeln","Python")}</code>). This behaviour can be turned on and off with <code>${Object(u.a)("keyecho(True)","Python")}</code> and <code>${Object(u.a)("keyecho(False)","Python")}</code>.`})];var k=a(3);const T=Object(i.a)("select",{content:d.a.map(e=>Object(i.a)("option",{content:`${e.index+1}. ${e.title}`,value:e.index})),on:[{type:"change",callback:e=>Object(k.b)("set-group",parseInt(e.currentTarget.value))}]}),P=Object(i.a)("input",{type:"checkbox",on:[{type:"change",callback:e=>Object(k.b)("toggle-simple")}]}),S=Object(i.a)("input",{type:"checkbox",on:[{type:"change",callback:e=>Object(k.b)("toggle-intermediate")}]}),$=Object(i.a)("input",{type:"checkbox",on:[{type:"change",callback:e=>Object(k.b)("toggle-advanced")}]}),C=Object(i.a)("tbody"),I=Object(i.a)("div",{content:[Object(i.a)("h3",{content:"Native Turtle Commands"}),Object(i.a)("p",{content:"The languages understood by the Turtle System come with several built in procedures and functions, including those that implement the Turtle Graphics drawing metaphor. A full list of commands is show in the table below. For convenience, they have been grouped into 11 categories, and divided into three difficulty levels. Only simple commands are shown by default; use the checkboxes below to show intermediate and advanced commands as well."}),Object(i.a)("div",{classes:["tsx-commands-options"],content:[Object(i.a)("label",{content:["Select group",T]}),Object(i.a)("label",{content:[P,"Simple"]}),Object(i.a)("label",{content:[S,"Intermediate"]}),Object(i.a)("label",{content:[$,"Advanced"]})]}),Object(i.a)("table",{classes:["tsx-help-table"],content:[Object(i.a)("thead",{content:[Object(i.a)("tr",{content:[Object(i.a)("th",{content:"Command"}),Object(i.a)("th",{content:"Description"})]})]}),C]})]}),E=Object(i.a)("div"),A=Object(i.a)("div"),R=Object(i.a)("div"),L=Object(i.a)("div"),B=Object(i.a)("tbody"),N=(e,t)=>`${e}<td>${t.index}</td><td style="cursor:${t.css}">${t.name}</td>`,q=Object(i.a)("div",{content:[Object(i.a)("h3",{content:"Colours"}),Object(i.a)("p",{content:"The Turtle System has 50 predefined colour constants, shown in the table below. Every command that takes a colour argument (e.g. the <code>colour</code> command, which sets the Turtle's current drawing colour) can be given an RGB value, or one of the predefined colour names below. The compiler will translate this name into the corresponding RGB value. Alternatively, you can also use the corresponding number between 1 and 50, which the Turtle Machine will translate into the RGB value when your program runs."}),Object(i.a)("table",{classes:["tsx-help-table"],content:[Object(i.a)("thead",{content:[Object(i.a)("tr",{content:[Object(i.a)("th",{content:"No."}),Object(i.a)("th",{content:"Name<br>Value"}),Object(i.a)("th",{content:"No."}),Object(i.a)("th",{content:"Name<br>Value"}),Object(i.a)("th",{content:"No."}),Object(i.a)("th",{content:"Name<br>Value"}),Object(i.a)("th",{content:"No."}),Object(i.a)("th",{content:"Name<br>Value"}),Object(i.a)("th",{content:"No."}),Object(i.a)("th",{content:"Name<br>Value"})]})]}),B]}),Object(i.a)("h3",{content:"Fonts"}),Object(i.a)("p",{content:"The Turtle System has 16 fonts for drawing text on the canvas, shown in the table below. The <code>print</code> command takes a font parameter, which must be an integer between 0 and 255. The integers in the range 0-15 correspond to plain versions of the 16 fonts. To render the text in italics, add 16 to this base; to render it in bold, add 32. This additions are cumulative; thus to render the text in italic and bold, add 16+32."}),Object(i.a)("table",{classes:["tsx-help-table"],content:[Object(i.a)("thead",{content:[Object(i.a)("tr",{content:[Object(i.a)("th",{content:"Font Family Name"}),Object(i.a)("th",{content:"Plain"}),Object(i.a)("th",{content:"Italic"}),Object(i.a)("th",{content:"Bold"}),Object(i.a)("th",{content:"Italic+Bold"})]})]}),Object(i.a)("tbody",{content:l.d.map(e=>Object(i.a)("tr",{content:[Object(i.a)("td",{content:e.name,style:`font-family:${e.css}`}),Object(i.a)("td",{content:e.index.toString(10)}),Object(i.a)("td",{content:(e.index+16).toString(10)}),Object(i.a)("td",{content:(e.index+32).toString(10)}),Object(i.a)("td",{content:(e.index+48).toString(10)})]}))})]}),Object(i.a)("h3",{content:"Cursors"}),Object(i.a)("p",{content:"The native <code>cursor</code> command sets which cursor to display when the mouse is over the canvas. Setting it to 0 makes the mouse invisible. Values in the range 1-15 set it to the cursor shown in the table below (move your mouse over each box to preview the cursor). Any other value will reset to the default cursor. Note that the actual cursor displayed depends on your operating system, and may vary from computer to computer."}),Object(i.a)("table",{content:[Object(i.a)("thead",{content:[Object(i.a)("tr",{content:[Object(i.a)("th",{content:"No."}),Object(i.a)("th",{content:"Name"}),Object(i.a)("th",{content:"No."}),Object(i.a)("th",{content:"Name"}),Object(i.a)("th",{content:"No."}),Object(i.a)("th",{content:"Name"}),Object(i.a)("th",{content:"No."}),Object(i.a)("th",{content:"Name"})]})]}),Object(i.a)("tbody",{content:[Object(i.a)("tr",{content:l.b.slice(0,4).reduce(N,"")}),Object(i.a)("tr",{content:l.b.slice(4,8).reduce(N,"")}),Object(i.a)("tr",{content:l.b.slice(8,12).reduce(N,"")}),Object(i.a)("tr",{content:l.b.slice(12,16).reduce(N,"")})]})]})]});var M=Object(i.f)("tsx-system-tabs",[{label:"Commands",active:!0,content:[I]},{label:"Basics",active:!1,content:[E]},{label:"Structures",active:!1,content:[A]},{label:"Operators",active:!1,content:[R]},{label:"User Input",active:!1,content:[L]},{label:"Constants",active:!1,content:[q]}]);const D=(e,t,a)=>{const o=a.dark?"#fff":"#000";return`${t}<th>${a.index}</th><td style="background:${a.css};color:${o}">${a.names[e]}<br>${a.hex[e]}</td>`};Object(k.a)("language-changed",e=>{E.innerHTML="",A.innerHTML="",R.innerHTML="",L.innerHTML="",B.innerHTML="",o[e].forEach(e=>E.appendChild(e)),n[e].forEach(e=>A.appendChild(e)),r[e].forEach(e=>R.appendChild(e)),c[e].forEach(e=>L.appendChild(e));for(let t=0;t<10;t+=1)B.innerHTML+=`<tr>${l.a.slice(5*t,5*t+5).reduce(D.bind(null,e),"")}</tr>`}),Object(k.a)("help-options-changed",({language:e,group:t,simple:a,intermediate:o,advanced:n})=>{let r=d.b.filter(e=>e.category===t);a||(r=r.filter(e=>0!==e.level)),o||(r=r.filter(e=>1!==e.level)),n||(r=r.filter(e=>2!==e.level)),T.value=t,P.checked=a,S.checked=o,$.checked=n,C.innerHTML="",r.forEach(t=>{t.names[e]&&(C.innerHTML+=`<tr><td>${t.names[e]}</td><td>${t.description}</td></tr>`)})});const F=document.getElementById("tsx");F.classList.add("tsx"),window.isElectron?document.body.parentElement.classList.add("tsx-electron"):document.body.parentElement.classList.add("tsx-browser"),F.classList.add("tsx-help"),F.appendChild(s.b),F.appendChild(M),Object(k.b)("ready")}]);